import{r as d,M as e,a3 as _}from"./vendor-CPBPwzYD.js";import{C as N,b as ae,c as te,d as v,L as A,h as fe,i as pe,j as Ne,k as ve,l as U,I as me,B as T,f as Se,o as Pe,a as xe,e as W,m as he}from"./index-BifUC4c9.js";import{T as Ce,a as Ee,b as ue,c as ge,S as _e}from"./scroll-area-DQuTYI96.js";import{w as Te,i as ke,o as ye,h as Ie,l as Y,p as Ae,S as Ge,z as X,E as $e,C as je,a as Re,M as ze,A as Le,T as Oe}from"./icon-vendor-DwJrfwQP.js";import q from"./ComparisonChart-_b3qqr6-.js";import"./ui-vendor-nq4IHmv4.js";import"./utils-vendor-DrCDvq1f.js";import"./chart-vendor-BCXW5yoB.js";const be=({title:x="날짜 범위",description:G="분석할 기간을 선택하세요",startDate:P,endDate:$,onDateChange:C,preset:g="",onPresetChange:D,disabled:h=!1,error:R=null,className:b="",showPresets:z=!0,minDate:f=null,maxDate:w=null})=>{const[y,k]=d.useState(P||""),[r,L]=d.useState($||""),[V,O]=d.useState(null),F=[{value:"last7days",label:"최근 7일",days:7},{value:"last14days",label:"최근 14일",days:14},{value:"last30days",label:"최근 30일",days:30},{value:"thisweek",label:"이번 주",custom:!0},{value:"lastweek",label:"지난 주",custom:!0},{value:"thismonth",label:"이번 달",custom:!0},{value:"lastmonth",label:"지난 달",custom:!0},{value:"custom",label:"직접 선택",custom:!0}];d.useEffect(()=>{k(P||""),L($||"")},[P,$]);const M=(c,t)=>{if(!c||!t)return"시작 날짜와 종료 날짜를 모두 입력해주세요";const o=new Date(c),m=new Date(t);return isNaN(o)||isNaN(m)?"올바른 날짜 형식을 입력해주세요":o>=m?"종료 날짜는 시작 날짜보다 이후여야 합니다":(m-o)/(1e3*60*60*24)>365?"날짜 범위는 최대 365일까지 선택할 수 있습니다":f&&o<new Date(f)?`시작 날짜는 ${f} 이후여야 합니다`:w&&m>new Date(w)?`종료 날짜는 ${w} 이전이어야 합니다`:null},B=(c,t)=>{let o=y,m=r;c==="start"?(o=t,k(t)):c==="end"&&(m=t,L(t));const p=M(o,m);O(p),!p&&C&&C({startDate:o,endDate:m})},Z=c=>{const t=new Date;let o,m;switch(c){case"last7days":m=new Date(t),o=new Date(t.getTime()-10080*60*1e3);break;case"last14days":m=new Date(t),o=new Date(t.getTime()-336*60*60*1e3);break;case"last30days":m=new Date(t),o=new Date(t.getTime()-720*60*60*1e3);break;case"thisweek":const J=new Date(t);J.setDate(t.getDate()-t.getDay()),o=J,m=new Date(t);break;case"lastweek":const I=new Date(t);I.setDate(t.getDate()-t.getDay()-1);const Q=new Date(I);Q.setDate(I.getDate()-6),o=Q,m=I;break;case"thismonth":o=new Date(t.getFullYear(),t.getMonth(),1),m=new Date(t);break;case"lastmonth":const ee=new Date(t.getFullYear(),t.getMonth()-1,1),se=new Date(t.getFullYear(),t.getMonth(),0);o=ee,m=se;break;case"custom":D&&D(c);return;default:return}const p=o.toISOString().split("T")[0],K=m.toISOString().split("T")[0];k(p),L(K);const H=M(p,K);O(H),!H&&C&&C({startDate:p,endDate:K}),D&&D(c)},j=(()=>{if(!y||!r)return null;try{const c=new Date(y),t=new Date(r);return{days:Math.ceil((t-c)/(1e3*60*60*24)),startFormatted:c.toLocaleDateString("ko-KR"),endFormatted:t.toLocaleDateString("ko-KR")}}catch{return null}})(),S=R||V,E=!S&&y&&r;return e.jsxs(N,{className:`${b} ${h?"opacity-50":""}`,children:[e.jsxs(ae,{className:"pb-3",children:[e.jsxs(te,{className:"flex items-center gap-2 text-base",children:[e.jsx(Te,{className:"h-4 w-4"}),x]}),G&&e.jsx("p",{className:"text-sm text-muted-foreground",children:G})]}),e.jsxs(v,{className:"space-y-4",children:[z&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"빠른 선택"}),e.jsxs(fe,{value:g,onValueChange:Z,disabled:h,children:[e.jsx(pe,{children:e.jsx(Ne,{placeholder:"기간을 선택하세요"})}),e.jsx(ve,{children:F.map(c=>e.jsx(U,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:`start-${x}`,className:"text-sm",children:"시작 날짜"}),e.jsx(me,{id:`start-${x}`,type:"date",value:y,onChange:c=>B("start",c.target.value),disabled:h,min:f,max:w,className:S?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:`end-${x}`,className:"text-sm",children:"종료 날짜"}),e.jsx(me,{id:`end-${x}`,type:"date",value:r,onChange:c=>B("end",c.target.value),disabled:h,min:f,max:w,className:S?"border-red-500":""})]})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(ke,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:S})]}),j&&E&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(ye,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("span",{className:"font-medium",children:[j.days,"일 기간"]}),e.jsxs("span",{className:"text-green-600 ml-2",children:["(",j.startFormatted," ~ ",j.endFormatted,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{variant:E?"default":"secondary",className:"text-xs",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),E?"유효한 범위":"범위 설정 필요"]}),j&&E&&e.jsxs(T,{variant:"outline",className:"text-xs",children:[j.days,"일 데이터"]})]})]})]})},Ve=()=>{var re,ne,ce,ie,de,oe;const{settings:x,updateSettings:G}=Se(),{preferences:P,updatePreference:$,isSaving:C}=Pe(),[g,D]=d.useState({startDate:"",endDate:"",preset:"last7days"}),[h,R]=d.useState({startDate:"",endDate:"",preset:"last14days"}),[b,z]=d.useState(["availability","rrc","erab"]),[f,w]=d.useState(!0),[y,k]=d.useState(4),[r,L]=d.useState(null),[V,O]=d.useState(!1),[F,M]=d.useState(null),[B,Z]=d.useState(null),[u,j]=d.useState(new Set),[S,E]=d.useState([]),[c,t]=d.useState(!1),[o,m]=d.useState(null),p=d.useCallback(async()=>{console.log("🔍 Available PEGs 로드 시작"),t(!0),m(null);try{const s=localStorage.getItem("dbConfig"),a=localStorage.getItem("useDbPegs")==="true";console.log("📊 DB 설정 상태:",{hasDbConfig:!!s,useDbPegs:a,dbConfigData:s?JSON.parse(s):null});let n=[];if(a&&s){console.log("🔗 Database에서 PEG 목록 조회 중...");const l=await xe.get("/api/master/pegs");console.log("📥 Database PEG 응답:",l.data),l.data&&Array.isArray(l.data)&&(n=l.data.map(i=>({value:i.peg_name||i.value||i.id,label:i.display_name||i.label||`${i.peg_name} (${i.unit||"N/A"})`})))}if(n.length===0&&(console.log("📝 기본 PEG 목록 사용"),n=[{value:"availability",label:"Availability (%)"},{value:"rrc",label:"RRC Success Rate (%)"},{value:"erab",label:"ERAB Success Rate (%)"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra (%)"},{value:"cqi",label:"CQI"},{value:"se",label:"Spectral Efficiency"},{value:"dl_thp",label:"DL Throughput"},{value:"ul_int",label:"UL Interference"}]),console.log("✅ PEG 목록 로드 완료:",n),E(n),b.length===0&&n.length>0){const l=n.slice(0,3).map(i=>i.value);z(l),console.log("🎯 기본 PEG 선택:",l)}}catch(s){console.error("❌ PEG 목록 로드 실패:",s),m(s.message||"PEG 목록을 불러오는데 실패했습니다"),E([{value:"availability",label:"Availability (%)"},{value:"rrc",label:"RRC Success Rate (%)"},{value:"erab",label:"ERAB Success Rate (%)"}])}finally{t(!1)}},[b.length]);d.useEffect(()=>{const s=new Date,a=new Date(s),n=new Date(s.getTime()-10080*60*1e3),l=new Date(n),i=new Date(n.getTime()-10080*60*1e3);D({startDate:n.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0],preset:"last7days"}),R({startDate:i.toISOString().split("T")[0],endDate:l.toISOString().split("T")[0],preset:"custom"}),p()},[p]),d.useEffect(()=>{x.defaultPegs&&z(x.defaultPegs),x.decimalPlaces!==void 0&&k(x.decimalPlaces),x.includeOutliers!==void 0&&w(x.includeOutliers)},[x]);const K=d.useCallback(({startDate:s,endDate:a})=>{D(n=>({...n,startDate:s,endDate:a,preset:"custom"}))},[]),H=d.useCallback(({startDate:s,endDate:a})=>{R(n=>({...n,startDate:s,endDate:a,preset:"custom"}))},[]),J=s=>{z(a=>{const l=a.includes(s)?a.filter(i=>i!==s):[...a,s];return G&&G({defaultPegs:l}),l})},I=async()=>{var s,a,n;if(!g.startDate||!g.endDate||!h.startDate||!h.endDate){_.error("두 기간의 날짜를 모두 설정해주세요");return}if(b.length===0){_.error("분석할 PEG를 최소 1개 이상 선택해주세요");return}O(!0),M(null);try{console.log("🔍 Statistics 비교 분석 시작:",{period1:g,period2:h,selectedPegs:b,includeOutliers:f,decimalPlaces:y});const l={period1:{start_date:`${g.startDate}T00:00:00`,end_date:`${g.endDate}T23:59:59`},period2:{start_date:`${h.startDate}T00:00:00`,end_date:`${h.endDate}T23:59:59`},peg_names:b,include_outliers:f,decimal_places:y,ne_filter:x.defaultNe?[x.defaultNe]:null,cell_id_filter:x.defaultCellId?[x.defaultCellId]:null};console.log("📤 API 요청 페이로드:",l);const i=await xe.post("/api/statistics/compare",l);console.log("📥 API 응답:",i.data),L(i.data),Z(new Date),_.success(`비교 분석 완료! ${((s=i.data.analysis_results)==null?void 0:s.length)||0}개 PEG 분석됨`)}catch(l){console.error("❌ 비교 분석 실패:",l);let i="비교 분석 중 오류가 발생했습니다";(n=(a=l.response)==null?void 0:a.data)!=null&&n.error_message?i=l.response.data.error_message:l.message&&(i=l.message),M(i),_.error(i)}finally{O(!1)}},Q=s=>{const a=new Set(u);a.has(s)?a.delete(s):a.add(s),j(a)},ee=()=>{var s,a;if(u.size===((s=r==null?void 0:r.analysis_results)==null?void 0:s.length))j(new Set);else{const n=((a=r==null?void 0:r.analysis_results)==null?void 0:a.map(l=>l.peg_name))||[];j(new Set(n))}},se=async()=>{if(u.size===0){_.error("저장할 PEG를 선택해주세요");return}try{console.log("💾 Dashboard에 저장할 PEG:",Array.from(u));const s=(P==null?void 0:P.dashboard)||{},a=s.selectedPegs||[],n=Array.from(u).filter(i=>!a.includes(i)),l=[...a,...n];console.log("📊 현재 Dashboard PEG:",a),console.log("🆕 추가할 새 PEG:",n),console.log("📈 업데이트된 PEG 목록:",l),await $("dashboard",{...s,selectedPegs:l}),_.success(`${u.size}개 PEG가 Dashboard에 추가되었습니다`,{description:`총 ${l.length}개 PEG가 Dashboard에 설정되어 있습니다. Dashboard로 이동해서 확인해보세요!`,duration:5e3}),j(new Set)}catch(s){console.error("❌ Dashboard 저장 실패:",s),_.error("Dashboard 저장 중 오류가 발생했습니다",{description:s.message||"네트워크 오류일 수 있습니다"})}},le=g.startDate&&g.endDate&&h.startDate&&h.endDate&&b.length>0,De=s=>{switch(s){case"improved":return e.jsx(Oe,{className:"h-4 w-4 text-green-500"});case"degraded":return e.jsx(Le,{className:"h-4 w-4 text-red-500"});case"stable":return e.jsx(ze,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(X,{className:"h-4 w-4 text-yellow-500"})}},we=(s,a)=>{const n={improved:"bg-green-100 text-green-800 border-green-200",degraded:"bg-red-100 text-red-800 border-red-200",stable:"bg-blue-100 text-blue-800 border-blue-200"},l={significant:"상당한",moderate:"보통",minor:"미미한",none:"변화없음"};return e.jsxs(T,{className:`${n[s]||"bg-gray-100 text-gray-800"} text-xs`,children:[De(s),e.jsxs("span",{className:"ml-1",children:[s==="improved"?"개선":s==="degraded"?"악화":"안정",a&&` (${l[a]})`]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Basic 비교 분석"}),e.jsx("p",{className:"text-muted-foreground",children:"두 기간의 KPI 데이터를 비교하여 성능 변화를 분석합니다"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[B&&e.jsxs(T,{variant:"outline",className:"text-xs",children:["마지막 분석: ",B.toLocaleTimeString("ko-KR")]}),e.jsx(W,{onClick:I,disabled:!le||V,className:"bg-blue-600 hover:bg-blue-700",children:V?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 mr-2 animate-spin"}),"분석 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"비교 분석 실행"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(be,{title:"기간 1 (기준)",description:"비교의 기준이 되는 첫 번째 기간",startDate:g.startDate,endDate:g.endDate,preset:g.preset,onDateChange:K,onPresetChange:s=>D(a=>({...a,preset:s}))}),e.jsx(be,{title:"기간 2 (비교 대상)",description:"기준과 비교할 두 번째 기간",startDate:h.startDate,endDate:h.endDate,preset:h.preset,onDateChange:H,onPresetChange:s=>R(a=>({...a,preset:s}))}),e.jsxs(N,{children:[e.jsx(ae,{className:"pb-3",children:e.jsxs(te,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ge,{className:"h-4 w-4"}),"분석 옵션"]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{className:"text-sm font-medium flex items-center justify-between",children:[e.jsx("span",{children:"분석할 PEG"}),c&&e.jsx(Y,{className:"h-3 w-3 animate-spin text-blue-500"})]}),o&&e.jsxs("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700",children:[e.jsx(X,{className:"h-3 w-3 inline mr-1"}),o]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:c?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Y,{className:"h-4 w-4 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"PEG 목록 로드 중..."})]}):S.length>0?S.map(s=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded border cursor-pointer transition-colors ${b.includes(s.value)?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>J(s.value),children:[e.jsx("span",{className:"text-sm",children:s.label}),b.includes(s.value)&&e.jsx(ye,{className:"h-4 w-4 text-blue-500"})]},s.value)):e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(X,{className:"h-4 w-4 mx-auto mb-1"}),e.jsx("p",{className:"text-xs",children:"사용 가능한 PEG가 없습니다"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{variant:"outline",className:"text-xs",children:[b.length,"개 선택됨"]}),!c&&e.jsxs(W,{variant:"ghost",size:"sm",onClick:p,className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"새로고침"]})]})]}),e.jsx(he,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{className:"text-sm",children:"이상치 포함"}),e.jsx(W,{variant:f?"default":"outline",size:"sm",onClick:()=>w(!f),children:f?"포함":"제외"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:"text-sm",children:"소수점 자릿수"}),e.jsxs(fe,{value:y.toString(),onValueChange:s=>k(parseInt(s)),children:[e.jsx(pe,{children:e.jsx(Ne,{})}),e.jsxs(ve,{children:[e.jsx(U,{value:"2",children:"2자리"}),e.jsx(U,{value:"3",children:"3자리"}),e.jsx(U,{value:"4",children:"4자리"}),e.jsx(U,{value:"5",children:"5자리"})]})]})]})]})]})]})]}),F&&e.jsx(N,{className:"border-red-200 bg-red-50",children:e.jsxs(v,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:"분석 오류"})]}),e.jsx("p",{className:"text-red-600 mt-2",children:F})]})}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(he,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"비교 분석 결과"}),e.jsx("div",{className:"mb-6",children:e.jsx(q,{comparisonResults:r,title:"PEG 비교 분석 차트",showControls:!0,defaultChartType:"bar",height:400})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(N,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((re=r.summary)==null?void 0:re.total_pegs_analyzed)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"분석된 PEG"})]})})}),e.jsx(N,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((ne=r.summary)==null?void 0:ne.improved_count)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"개선"})]})})}),e.jsx(N,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:((ce=r.summary)==null?void 0:ce.degraded_count)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"악화"})]})})}),e.jsx(N,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((ie=r.summary)==null?void 0:ie.stable_count)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"안정"})]})})})]}),e.jsxs(N,{children:[e.jsx(ae,{children:e.jsx(te,{children:"상세 비교 결과"})}),e.jsx(v,{children:e.jsxs(Ce,{defaultValue:"table",className:"w-full",children:[e.jsxs(Ee,{className:"grid w-full grid-cols-2",children:[e.jsxs(ue,{value:"table",className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"}),"테이블 뷰"]}),e.jsxs(ue,{value:"chart",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"차트 뷰"]})]}),e.jsxs(ge,{value:"table",className:"space-y-4",children:[((de=r==null?void 0:r.analysis_results)==null?void 0:de.length)>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.size===r.analysis_results.length&&u.size>0,onChange:ee,className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("span",{className:"text-sm font-medium",children:["전체 선택 (",u.size,"/",r.analysis_results.length,")"]})]}),u.size>0&&e.jsxs(T,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[u.size,"개 선택됨"]})]}),u.size>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"outline",size:"sm",onClick:()=>j(new Set),children:"선택 해제"}),e.jsx(W,{size:"sm",onClick:se,disabled:C,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400",children:C?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-3 w-3 mr-1 animate-spin"}),"저장 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"Dashboard에 저장"]})})]})]}),e.jsx(_e,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:(oe=r.analysis_results)==null?void 0:oe.map((s,a)=>{var n,l;return e.jsx(N,{className:`border-l-4 border-l-blue-500 ${u.has(s.peg_name)?"ring-2 ring-blue-500 bg-blue-50":""}`,children:e.jsxs(v,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:u.has(s.peg_name),onChange:()=>Q(s.peg_name),className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("h4",{className:"font-semibold",children:s.peg_name})]}),we(s.improvement_status,s.improvement_magnitude)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"기간 1 평균"}),e.jsx("div",{className:"font-medium",children:(n=s.period1_stats)==null?void 0:n.mean})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"기간 2 평균"}),e.jsx("div",{className:"font-medium",children:(l=s.period2_stats)==null?void 0:l.mean})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Delta"}),e.jsxs("div",{className:`font-medium ${s.delta>0?"text-green-600":s.delta<0?"text-red-600":"text-blue-600"}`,children:[s.delta>0?"+":"",s.delta]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Delta %"}),e.jsxs("div",{className:`font-medium ${s.delta_percentage>0?"text-green-600":s.delta_percentage<0?"text-red-600":"text-blue-600"}`,children:[s.delta_percentage>0?"+":"",s.delta_percentage,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 pt-3 border-t text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"기간 1 RSD"}),e.jsxs("div",{className:"font-medium",children:[s.rsd_period1,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"기간 2 RSD"}),e.jsxs("div",{className:"font-medium",children:[s.rsd_period2,"%"]})]})]})]})},a)})})})]}),e.jsx(ge,{value:"chart",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(q,{comparisonResults:r,title:"막대 차트",showControls:!1,defaultChartType:"bar",height:300}),e.jsx(q,{comparisonResults:r,title:"라인 차트",showControls:!1,defaultChartType:"line",height:300}),e.jsx(q,{comparisonResults:r,title:"개선 상태 분포",showControls:!1,defaultChartType:"pie",height:300}),e.jsx(q,{comparisonResults:r,title:"레이더 차트",showControls:!1,defaultChartType:"radar",height:300})]})})})]})})]})]})]}),!r&&!F&&e.jsx(N,{className:"text-center py-12",children:e.jsxs(v,{children:[e.jsx(je,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"비교 분석 준비"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"두 기간과 분석할 PEG를 선택한 후 '비교 분석 실행' 버튼을 클릭하세요"}),e.jsx(T,{variant:"outline",children:le?"분석 준비 완료":"설정 필요"})]})})]})};export{Ve as default};
