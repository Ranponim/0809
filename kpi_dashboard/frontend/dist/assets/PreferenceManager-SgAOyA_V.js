import{M as e,r as c,a3 as se}from"./vendor-CIPdjx1t.js";import{C as R,b as H,c as U,B as A,p as ve,d as M,A as Me,q as Ve,i as D,L as b,S as Ce,e as ke,f as De,g as Ee,h as K,I as he,P as Xe,r as Qe,a as ue,T as Ye,m as Ke,n as me,o as xe}from"./index-Q594mB1I.js";import{a as Fe}from"./usePreference-BdPvxwX6.js";import{S as pe}from"./switch-B92w76t-.js";import{C as qe}from"./checkbox-DNwZZDik.js";import{S as Oe}from"./separator-DidKRWFN.js";import{r as es,s as ss,t as as}from"./ui-vendor-C5A5DcrM.js";import{c as Ne,i as W,f as fe,g as He,e as Ue,m as Pe,n as ts,o as ls,U as rs,p as cs,q as ns,r as we,s as ie,t as is,j as ds,u as ze,v as os,d as ms,P as xs,X as hs,D as ge,w as us,x as ps,C as js,y as gs,S as _e,R as Ns,k as bs,L as fs}from"./icon-vendor-CWV3Q6sV.js";import{S as Re}from"./scroll-area-ZOOfn5zd.js";import"./utils-vendor-DrCDvq1f.js";import"./chart-vendor-CWmmjCk1.js";function Ze({...s}){return e.jsx(es,{"data-slot":"collapsible",...s})}function Je({...s}){return e.jsx(ss,{"data-slot":"collapsible-trigger",...s})}function We({...s}){return e.jsx(as,{"data-slot":"collapsible-content",...s})}const je={text:{placeholder:"í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",maxLength:100},number:{placeholder:"ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”",min:0,max:999999},select:{placeholder:"ì„ íƒí•˜ì„¸ìš”",options:[]},multiselect:{placeholder:"í•˜ë‚˜ ì´ìƒ ì„ íƒí•˜ì„¸ìš”",options:[]},checkbox:{label:"í™œì„±í™”"},switch:{label:"ì¼œê¸°/ë„ê¸°"}},vs=({field:s,value:o,onChange:d,error:v,disabled:P})=>{var N,l,u,x;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(he,{id:s.key,type:s.type==="number"?"number":"text",value:o||"",onChange:g=>{const C=s.type==="number"?g.target.value===""?"":Number(g.target.value):g.target.value;d(C)},placeholder:s.placeholder||((N=je[s.type])==null?void 0:N.placeholder),maxLength:s.maxLength||((l=je[s.type])==null?void 0:l.maxLength),min:s.min||((u=je[s.type])==null?void 0:u.min),max:s.max||((x=je[s.type])==null?void 0:x.max),disabled:P,className:v?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),v&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),v]})]})},ys=({field:s,value:o,onChange:d,error:v,disabled:P})=>{var N;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(Ce,{value:o||"",onValueChange:d,disabled:P,children:[e.jsx(ke,{className:v?"border-destructive":"",children:e.jsx(De,{placeholder:s.placeholder||je.select.placeholder})}),e.jsx(Ee,{children:(N=s.options)==null?void 0:N.map(l=>e.jsx(K,{value:l.value,children:l.label},l.value))})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),v&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),v]})]})},ws=({field:s,value:o,onChange:d,error:v,disabled:P})=>{var u,x;const N=Array.isArray(o)?o:[],l=g=>{const C=N.includes(g)?N.filter(I=>I!==g):[...N,g];d(C)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:`border rounded-md p-3 space-y-2 ${v?"border-destructive":"border-input"}`,children:[(u=s.options)==null?void 0:u.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:`${s.key}-${g.value}`,checked:N.includes(g.value),onCheckedChange:()=>l(g.value),disabled:P}),e.jsx(b,{htmlFor:`${s.key}-${g.value}`,className:"text-sm cursor-pointer",children:g.label})]},g.value)),((x=s.options)==null?void 0:x.length)===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"ì„ íƒ ê°€ëŠ¥í•œ ì˜µì…˜ì´ ì—†ìŠµë‹ˆë‹¤"})]}),N.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:N.map(g=>{var I;const C=(I=s.options)==null?void 0:I.find(E=>E.value===g);return C?e.jsx(A,{variant:"secondary",className:"text-xs",children:C.label},g):null})}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),v&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),v]})]})},Ss=({field:s,value:o,onChange:d,error:v,disabled:P})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(b,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),e.jsx(pe,{id:s.key,checked:!!o,onCheckedChange:d,disabled:P})]}),v&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),v]})]}),Se=({title:s,description:o,settingKey:d,fields:v=[],defaultOpen:P=!1,disabled:N=!1,className:l="",onFieldChange:u,showSaveButton:x=!1,showResetButton:g=!1})=>{const[C,I]=c.useState(P),[E,X]=c.useState(!1),{settings:y,updateSettings:w,updateSectionLocal:Z,saving:V,error:G,validationErrors:J,logInfo:S,saveImmediately:Q,defaultSettings:ee}=Fe(),L=y[d]||{},T=c.useMemo(()=>{const m={};return Object.entries(J).forEach(([k,B])=>{if(k.startsWith(`${d}.`)){const Y=k.replace(`${d}.`,"");m[Y]=B}}),m},[J,d]),_=Object.keys(T).length>0,a=c.useCallback((m,k)=>{S(`SettingBox í•„ë“œ ë³€ê²½: ${d}.${m}`,{oldValue:L[m],newValue:k});const B={...L,[m]:k};x?Z(d,B):w({[d]:B}),u==null||u(m,k,B),X(!0)},[d,L,w,u,S]),i=c.useCallback(async()=>{S(`SettingBox ì¦‰ì‹œ ì €ì¥: ${d}`),await Q()},[Q,S,d]),h=c.useCallback(()=>{S(`SettingBox ì´ˆê¸°í™”: ${d}`);const m=ee[d]||{};w({[d]:m}),X(!1)},[d,w,ee,S]),$=c.useCallback(m=>{const k=L[m.key],B=E?T[m.key]:null,q={field:m,value:k,onChange:ae=>a(m.key,ae),error:B,disabled:N||V};switch(m.type){case"text":case"number":return e.jsx(vs,{...q},m.key);case"select":return e.jsx(ys,{...q},m.key);case"multiselect":return e.jsx(ws,{...q},m.key);case"switch":case"checkbox":return e.jsx(Ss,{...q},m.key);default:return e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ì§€ì›í•˜ì§€ ì•ŠëŠ” í•„ë“œ íƒ€ì…: ",m.type]},m.key)}},[L,T,E,N,V,a]);return e.jsx(R,{className:`w-full ${l}`,children:e.jsxs(Ze,{open:C,onOpenChange:I,children:[e.jsx(Je,{asChild:!0,children:e.jsx(H,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(U,{className:"text-lg flex items-center gap-2",children:[s,V&&e.jsxs(A,{variant:"secondary",className:"text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"ì €ì¥ ì¤‘"]}),E&&_&&e.jsxs(A,{variant:"destructive",className:"text-xs",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"ì˜¤ë¥˜"]}),E&&!_&&!V&&e.jsxs(A,{variant:"default",className:"text-xs",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),"ìœ íš¨"]})]}),o&&e.jsx(ve,{children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(A,{variant:"outline",className:"text-xs",children:[v.length,"ê°œ ì„¤ì •"]}),C?e.jsx(He,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})]})]})})}),e.jsx(We,{children:e.jsxs(M,{className:"space-y-6",children:[G&&e.jsxs(Me,{variant:"destructive",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx(Ve,{children:G})]}),v.length>0?e.jsx("div",{className:"space-y-4",children:v.map($)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"ì„¤ì •í•  ìˆ˜ ìˆëŠ” í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤."}),(x||g||_)&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:g&&e.jsxs(D,{variant:"outline",size:"sm",onClick:h,disabled:N||V,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"ì´ˆê¸°í™”"]})}),e.jsx("div",{className:"flex items-center gap-2",children:x&&e.jsxs(D,{size:"sm",onClick:i,disabled:N||V||_,children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),"ì €ì¥"]})})]})]})]})})]})})},be=[{key:"dashboardSettings",label:"Dashboard ì„¤ì •",description:"ì„ íƒëœ PEG, ì°¨íŠ¸ ìŠ¤íƒ€ì¼, ìƒˆë¡œê³ ì¹¨ ê°„ê²© ë“±"},{key:"statisticsSettings",label:"Statistics ì„¤ì •",description:"ê¸°ë³¸ ë‚ ì§œ ë²”ìœ„, ë¹„êµ ì˜µì…˜, ì†Œìˆ˜ì  ìë¦¿ìˆ˜ ë“±"},{key:"derivedPegSettings",label:"Derived PEG ì„¤ì •",description:"ì‚¬ìš©ì ì •ì˜ ìˆ˜ì‹, í™œì„±í™” ìƒíƒœ, ê³„ì‚° ì •ë°€ë„ ë“±"},{key:"notificationSettings",label:"ì•Œë¦¼ ì„¤ì •",description:"í† ìŠ¤íŠ¸, ì‚¬ìš´ë“œ, ì•Œë¦¼ íƒ€ì… ì„¤ì •"},{key:"generalSettings",label:"ì¼ë°˜ ì„¤ì •",description:"ì–¸ì–´, ì‹œê°„ëŒ€, ë‚ ì§œ í˜•ì‹ ë“±"}],Cs=({title:s="ì„¤ì • ë°±ì—… & ë³µì›",description:o="ì„¤ì •ì„ JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê±°ë‚˜ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤",defaultOpen:d=!1,className:v=""})=>{const[P,N]=c.useState(d),[l,u]=c.useState(!1),[x,g]=c.useState(!1),[C,I]=c.useState(0),[E,X]=c.useState(!1),[y,w]=c.useState(null),[Z,V]=c.useState(null),[G,J]=c.useState(be.reduce((t,j)=>({...t,[j.key]:!0}),{})),[S,Q]=c.useState(""),ee=c.useRef(null),{settings:L,exportSettings:T,importSettings:_,hasUnsavedChanges:a,saving:i,logInfo:h,logError:$}=Fe(),m=c.useCallback(async(t="full")=>{g(!0),w(null);try{h("ì„¤ì • ë‚´ë³´ë‚´ê¸° ì‹œì‘",{exportType:t,customFileName:S});let j=L;if(t==="partial"){const oe=Object.entries(G).filter(([te,le])=>le).map(([te])=>te);if(oe.length===0){se.error("ë‚´ë³´ë‚¼ ì„¤ì • ì„¹ì…˜ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”");return}j=oe.reduce((te,le)=>(L[le]&&(te[le]=L[le]),te),{}),h("ë¶€ë¶„ ë‚´ë³´ë‚´ê¸° ì„ íƒëœ ì„¹ì…˜",oe)}const ce=new Date().toISOString().split("T")[0],ne=S.trim()||(t==="partial"?`preference-settings-partial-${ce}.json`:`preference-settings-${ce}.json`);await T(ne,j)&&(se.success(`ì„¤ì •ì´ "${ne}" íŒŒì¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤`),Q(""))}catch(j){$("ì„¤ì • ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨",j),se.error("ì„¤ì • ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨: "+j.message)}finally{g(!1)}},[L,G,S,T,h,$]),k=c.useCallback(async t=>{if(t){u(!0),I(0),w(null);try{if(h("ì„¤ì • ê°€ì ¸ì˜¤ê¸° ì‹œì‘",{fileName:t.name,fileSize:t.size}),!t.name.toLowerCase().endsWith(".json"))throw new Error("JSON íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤");if(t.size>5*1024*1024)throw new Error("íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤ (ìµœëŒ€ 5MB)");I(20);const j=await _(t);I(80),V({name:t.name,size:t.size,importedAt:new Date,sectionsCount:Object.keys(j).length}),I(100),h("ì„¤ì • ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ",{fileName:t.name,sectionsImported:Object.keys(j).length}),se.success(`"${t.name}"ì—ì„œ ì„¤ì •ì„ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤`)}catch(j){$("ì„¤ì • ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨",j),w(j.message),se.error("ì„¤ì • ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: "+j.message)}finally{u(!1),setTimeout(()=>{I(0)},3e3)}}},[_,h,$]),B=c.useCallback(t=>{const j=t.target.files[0];j&&(k(j),t.target.value="")},[k]),Y=c.useCallback(t=>{t.preventDefault(),X(!0)},[]),q=c.useCallback(t=>{t.preventDefault(),X(!1)},[]),ae=c.useCallback(t=>{t.preventDefault(),X(!1);const j=t.dataTransfer.files;j.length>0&&k(j[0])},[k]),de=c.useCallback(t=>{J(j=>({...j,[t]:!j[t]}))},[]),O=c.useCallback(()=>{const t=Object.values(G).every(Boolean),j=be.reduce((ce,ne)=>({...ce,[ne.key]:!t}),{});J(j)},[G]);return e.jsx(R,{className:`w-full ${v}`,children:e.jsxs(Ze,{open:P,onOpenChange:N,children:[e.jsx(Je,{asChild:!0,children:e.jsx(H,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(U,{className:"text-lg flex items-center gap-2",children:[e.jsx(ls,{className:"h-5 w-5"}),s,l&&e.jsxs(A,{variant:"secondary",className:"text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"ê°€ì ¸ì˜¤ëŠ” ì¤‘"]}),x&&e.jsxs(A,{variant:"secondary",className:"text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"ë‚´ë³´ë‚´ëŠ” ì¤‘"]}),a&&e.jsxs(A,{variant:"outline",className:"text-xs",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­"]})]}),o&&e.jsx(ve,{children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Z&&e.jsxs(A,{variant:"default",className:"text-xs",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),"ê°€ì ¸ì˜´"]}),P?e.jsx(He,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})]})]})})}),e.jsx(We,{children:e.jsxs(M,{className:"space-y-6",children:[y&&e.jsxs(Me,{variant:"destructive",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx(Ve,{children:y})]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"íŒŒì¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘..."}),e.jsxs("span",{children:[C,"%"]})]}),e.jsx(Xe,{value:C,className:"h-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"ì„¤ì • ê°€ì ¸ì˜¤ê¸°"]}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${E?"border-primary bg-primary/5":l?"border-muted bg-muted/20":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,onDragOver:Y,onDragLeave:q,onDrop:ae,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(cs,{className:`h-8 w-8 mx-auto ${E?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${E?"text-primary":""}`,children:E?"íŒŒì¼ì„ ì—¬ê¸°ì— ë†“ìœ¼ì„¸ìš”":"JSON íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ìµœëŒ€ 5MB, .json íŒŒì¼ë§Œ ì§€ì›"})]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{var t;return(t=ee.current)==null?void 0:t.click()},disabled:l,className:"mt-2",children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"íŒŒì¼ ì„ íƒ"]})]})}),e.jsx("input",{ref:ee,type:"file",accept:".json",onChange:B,style:{display:"none"}}),Z&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"ë§ˆì§€ë§‰ ê°€ì ¸ì˜¨ íŒŒì¼:"}),e.jsx("span",{children:Z.name}),e.jsxs(A,{variant:"secondary",className:"text-xs",children:[Z.sectionsCount,"ê°œ ì„¹ì…˜"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Z.importedAt.toLocaleString()})]})]}),e.jsx(Oe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),"ì„¤ì • ë‚´ë³´ë‚´ê¸°"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"fileName",className:"text-sm",children:"íŒŒì¼ëª… (ì„ íƒì‚¬í•­)"}),e.jsx(he,{id:"fileName",value:S,onChange:t=>Q(t.target.value),placeholder:"preference-settings-custom.json",disabled:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ë¹„ì›Œë‘ë©´ ìë™ìœ¼ë¡œ ë‚ ì§œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì´ ìƒì„±ë©ë‹ˆë‹¤"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:"ë‚´ë³´ë‚¼ ì„¤ì • ì„ íƒ"}),e.jsx(D,{variant:"outline",size:"sm",onClick:O,disabled:x,children:Object.values(G).every(Boolean)?"ì „ì²´ í•´ì œ":"ì „ì²´ ì„ íƒ"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:be.map(t=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(qe,{id:t.key,checked:G[t.key],onCheckedChange:()=>de(t.key),disabled:x}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(b,{htmlFor:t.key,className:"text-sm font-medium cursor-pointer",children:t.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]})]},t.key))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(D,{onClick:()=>m("full"),disabled:x||i,className:"flex-1",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"ì „ì²´ ì„¤ì • ë‚´ë³´ë‚´ê¸°"]}),e.jsxs(D,{variant:"outline",onClick:()=>m("partial"),disabled:x||i||Object.values(G).every(t=>!t),className:"flex-1",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"ì„ íƒëœ ì„¤ì •ë§Œ ë‚´ë³´ë‚´ê¸°"]})]}),Object.values(G).every(t=>!t)&&e.jsx("p",{className:"text-xs text-destructive",children:"ë‚´ë³´ë‚¼ ì„¤ì • ì„¹ì…˜ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"í˜„ì¬ ì„¤ì • ìƒíƒœ"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:be.map(t=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[t.label,":"]}),e.jsx("span",{className:"text-muted-foreground",children:L[t.key]?"ì„¤ì •ë¨":"ê¸°ë³¸ê°’"})]},t.key))}),a&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"}),"ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤"]})]})]})})]})})};function ks({className:s,...o}){return e.jsx("textarea",{"data-slot":"textarea",className:Qe("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...o})}const Ds=({derivedPegSettings:s,updateDerivedPegSettings:o,availablePegs:d=[],saving:v=!1})=>{var _;const[P,N]=c.useState(null),[l,u]=c.useState(null),[x,g]=c.useState(""),[C,I]=c.useState(null),[E,X]=c.useState(null),y=(s==null?void 0:s.formulas)||[],w=(s==null?void 0:s.settings)||{autoValidate:!0,showInDashboard:!0,showInStatistics:!0,evaluationPrecision:4},Z=[{id:"success_rate",name:"Success Rate (%)",formula:"(success_count / total_count) * 100",description:"ì„±ê³µë¥  ê³„ì‚° í…œí”Œë¦¿",category:"percentage"},{id:"efficiency",name:"Efficiency (%)",formula:"(good_values / all_values) * 100",description:"íš¨ìœ¨ì„± ê³„ì‚° í…œí”Œë¦¿",category:"percentage"},{id:"delta",name:"Delta Calculation",formula:"current_value - previous_value",description:"ë³€í™”ëŸ‰ ê³„ì‚° í…œí”Œë¦¿",category:"difference"},{id:"ratio",name:"Simple Ratio",formula:"numerator / denominator",description:"ë‹¨ìˆœ ë¹„ìœ¨ ê³„ì‚° í…œí”Œë¦¿",category:"ratio"}],V=[{symbol:"+",name:"ë”í•˜ê¸°",example:"a + b"},{symbol:"-",name:"ë¹¼ê¸°",example:"a - b"},{symbol:"*",name:"ê³±í•˜ê¸°",example:"a * b"},{symbol:"/",name:"ë‚˜ëˆ„ê¸°",example:"a / b"},{symbol:"%",name:"ë‚˜ë¨¸ì§€",example:"a % b"},{symbol:"^",name:"ê±°ë“­ì œê³±",example:"a ^ 2"},{symbol:"()",name:"ê´„í˜¸",example:"(a + b) * c"},{symbol:"sqrt()",name:"ì œê³±ê·¼",example:"sqrt(a)"},{symbol:"log()",name:"ë¡œê·¸",example:"log(a)"},{symbol:"abs()",name:"ì ˆëŒ“ê°’",example:"abs(a)"},{symbol:"min()",name:"ìµœì†Ÿê°’",example:"min(a, b)"},{symbol:"max()",name:"ìµœëŒ“ê°’",example:"max(a, b)"}],G=c.useMemo(()=>x?y.filter(a=>{var i;return a.name.toLowerCase().includes(x.toLowerCase())||a.formula.toLowerCase().includes(x.toLowerCase())||((i=a.description)==null?void 0:i.toLowerCase().includes(x.toLowerCase()))}):y,[y,x]),J=c.useCallback(a=>{try{const i=[],h=[],$=(a.match(/\(/g)||[]).length,m=(a.match(/\)/g)||[]).length;$!==m&&i.push("ê´„í˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");const k=a.replace(/\$\{[^}]+\}/g," ").match(/[a-zA-Z_][a-zA-Z0-9_]*/g)||[],B=[...d.map(O=>O.value),...y.filter(O=>O.active).map(O=>O.name.replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase())],Y=k.filter(O=>!B.includes(O)&&!["sqrt","log","abs","min","max","if"].includes(O));if(Y.length>0&&h.push(`ì•Œ ìˆ˜ ì—†ëŠ” PEG: ${Y.join(", ")}`),l){const O=l.name.replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase();k.includes(O)&&i.push("ìˆ˜ì‹ì´ ìê¸° ìì‹ ì„ ì°¸ì¡°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ìˆœí™˜ ì°¸ì¡°)")}const q=a.replace(/\$\{[^}]+\}/g,"").match(/[^a-zA-Z0-9_+\-*/()^%.,\s]/g);q&&i.push(`ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¬¸ì: ${q.join(", ")}`);const ae=k.filter(O=>d.some(t=>t.value===O)),de=k.filter(O=>y.some(t=>t.active&&t.name.replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase()===O));return{isValid:i.length===0,errors:i,warnings:h,dependencies:ae,derivedDependencies:de}}catch{return{isValid:!1,errors:["ìˆ˜ì‹ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"],warnings:[],dependencies:[],derivedDependencies:[]}}},[d,y,l]),S=c.useCallback(a=>{try{const i={};d.forEach(m=>{i[m.value]=Math.random()*100+50});let h=a;Object.keys(i).forEach(m=>{const k=new RegExp(`\\b${m}\\b`,"g");h=h.replace(k,i[m].toString())}),h=h.replace(/sqrt\(([^)]+)\)/g,"Math.sqrt($1)"),h=h.replace(/log\(([^)]+)\)/g,"Math.log($1)"),h=h.replace(/abs\(([^)]+)\)/g,"Math.abs($1)"),h=h.replace(/\^/g,"**");const $=Function(`"use strict"; return (${h})`)();return{success:!0,result:Number($).toFixed(w.evaluationPrecision||4),mockData:i}}catch(i){return{success:!1,error:i.message}}},[d,w.evaluationPrecision]),Q=()=>{const a={id:`formula_${Date.now()}`,name:"ìƒˆ ìˆ˜ì‹",formula:"",description:"",active:!0,category:"custom",unit:"",dependencies:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};u(a),N(a.id)},ee=()=>{if(!l)return;const a=J(l.formula);if(!a.isValid){se.error(`ìˆ˜ì‹ ì €ì¥ ì‹¤íŒ¨: ${a.errors.join(", ")}`);return}const i={...l,dependencies:a.dependencies,derivedDependencies:a.derivedDependencies||[],updatedAt:new Date().toISOString()},h=y.findIndex(m=>m.id===l.id);let $;h>=0?($=[...y],$[h]=i):$=[...y,i],o({...s,formulas:$}),u(null),se.success("ìˆ˜ì‹ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")},L=a=>{const i=y.filter(h=>h.id!==a);o({...s,formulas:i}),P===a&&N(null),(l==null?void 0:l.id)===a&&u(null),se.success("ìˆ˜ì‹ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")},T=a=>{l&&(u({...l,formula:a.formula,description:a.description,category:a.category}),se.success(`í…œí”Œë¦¿ "${a.name}"ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤`))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-5 w-5"}),"Derived PEG ê´€ë¦¬"]})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:"auto-validate",checked:w.autoValidate,onCheckedChange:a=>o({...s,settings:{...w,autoValidate:a}})}),e.jsx(b,{htmlFor:"auto-validate",children:"ì‹¤ì‹œê°„ ê²€ì¦"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:"show-dashboard",checked:w.showInDashboard,onCheckedChange:a=>o({...s,settings:{...w,showInDashboard:a}})}),e.jsx(b,{htmlFor:"show-dashboard",children:"Dashboardì— í‘œì‹œ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:"show-statistics",checked:w.showInStatistics,onCheckedChange:a=>o({...s,settings:{...w,showInStatistics:a}})}),e.jsx(b,{htmlFor:"show-statistics",children:"Statisticsì— í‘œì‹œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"ê³„ì‚° ì •ë°€ë„"}),e.jsxs(Ce,{value:(_=w.evaluationPrecision)==null?void 0:_.toString(),onValueChange:a=>o({...s,settings:{...w,evaluationPrecision:parseInt(a)}}),children:[e.jsx(ke,{children:e.jsx(De,{})}),e.jsxs(Ee,{children:[e.jsx(K,{value:"2",children:"ì†Œìˆ˜ì  2ìë¦¬"}),e.jsx(K,{value:"4",children:"ì†Œìˆ˜ì  4ìë¦¬"}),e.jsx(K,{value:"6",children:"ì†Œìˆ˜ì  6ìë¦¬"})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{children:"ìˆ˜ì‹ ëª©ë¡"}),e.jsxs(D,{onClick:Q,size:"sm",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"ìƒˆ ìˆ˜ì‹"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(he,{placeholder:"ìˆ˜ì‹ ê²€ìƒ‰...",className:"pl-8",value:x,onChange:a=>g(a.target.value)})]})]}),e.jsx(M,{children:e.jsx(Re,{className:"h-96",children:e.jsx("div",{className:"space-y-2",children:G.map(a=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${P===a.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>N(a.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:a.name}),e.jsx(A,{variant:a.active?"default":"secondary",className:"text-xs",children:a.active?"í™œì„±":"ë¹„í™œì„±"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:a.formula}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(A,{variant:"outline",className:"text-xs",children:a.category}),a.unit&&e.jsx(A,{variant:"outline",className:"text-xs",children:a.unit})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx(D,{variant:"ghost",size:"sm",onClick:i=>{i.stopPropagation(),u({...a})},children:e.jsx(ze,{className:"h-3 w-3"})}),e.jsx(D,{variant:"ghost",size:"sm",onClick:i=>{i.stopPropagation(),L(a.id)},children:e.jsx(os,{className:"h-3 w-3"})})]})]})},a.id))})})})]}),e.jsxs(R,{children:[e.jsx(H,{children:e.jsx(U,{children:l?"ìˆ˜ì‹ í¸ì§‘":"ìˆ˜ì‹ ìƒì„¸"})}),e.jsx(M,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"formula-name",children:"ìˆ˜ì‹ ì´ë¦„"}),e.jsx(he,{id:"formula-name",value:l.name,onChange:a=>u({...l,name:a.target.value}),placeholder:"ì˜ˆ: RACH Success Rate (%)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"formula-input",children:"ìˆ˜ì‹"}),e.jsx(ks,{id:"formula-input",value:l.formula,onChange:a=>{u({...l,formula:a.target.value}),w.autoValidate&&I(J(a.target.value))},placeholder:"ì˜ˆ: (randomaccesspremable / randomaccessresponse) * 100",className:"font-mono text-sm",rows:4}),C&&e.jsxs("div",{className:"space-y-2",children:[C.isValid?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(ms,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"ìˆ˜ì‹ì´ ìœ íš¨í•©ë‹ˆë‹¤"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:C.errors.join(", ")})]}),C.warnings.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:C.warnings.join(", ")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"formula-description",children:"ì„¤ëª…"}),e.jsx(he,{id:"formula-description",value:l.description,onChange:a=>u({...l,description:a.target.value}),placeholder:"ìˆ˜ì‹ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"formula-category",children:"ì¹´í…Œê³ ë¦¬"}),e.jsxs(Ce,{value:l.category,onValueChange:a=>u({...l,category:a}),children:[e.jsx(ke,{children:e.jsx(De,{})}),e.jsxs(Ee,{children:[e.jsx(K,{value:"percentage",children:"ë¹„ìœ¨ (%)"}),e.jsx(K,{value:"success_rate",children:"ì„±ê³µë¥ "}),e.jsx(K,{value:"efficiency",children:"íš¨ìœ¨ì„±"}),e.jsx(K,{value:"quality",children:"í’ˆì§ˆ"}),e.jsx(K,{value:"performance",children:"ì„±ëŠ¥"}),e.jsx(K,{value:"custom",children:"ì‚¬ìš©ì ì •ì˜"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"formula-unit",children:"ë‹¨ìœ„"}),e.jsx(he,{id:"formula-unit",value:l.unit,onChange:a=>u({...l,unit:a.target.value}),placeholder:"ì˜ˆ: %, ms, Mbps"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:"formula-active",checked:l.active,onCheckedChange:a=>u({...l,active:a})}),e.jsx(b,{htmlFor:"formula-active",children:"ìˆ˜ì‹ í™œì„±í™”"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{onClick:()=>{const a=J(l.formula);I(a);const i=S(l.formula);X(i)},children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"í…ŒìŠ¤íŠ¸"]}),e.jsxs(D,{onClick:ee,disabled:v,children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"ì €ì¥"]}),e.jsxs(D,{variant:"outline",onClick:()=>u(null),children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"ì·¨ì†Œ"]})]}),E&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Oe,{}),e.jsx("h4",{className:"font-medium",children:"í…ŒìŠ¤íŠ¸ ê²°ê³¼"}),E.success?e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-700",children:e.jsxs("strong",{children:["ê²°ê³¼: ",E.result]})}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"ëª¨ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œ ê³„ì‚° ê²°ê³¼ì…ë‹ˆë‹¤"})]}):e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700",children:["ì˜¤ë¥˜: ",E.error]})})]})]}):P?e.jsx("div",{className:"space-y-4",children:(()=>{const a=y.find(i=>i.id===P);return a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"ìˆ˜ì‹"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg font-mono text-sm",children:a.formula})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("p",{className:"text-sm",children:a.category})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:"ë‹¨ìœ„"}),e.jsx("p",{className:"text-sm",children:a.unit||"ì—†ìŒ"})]})]}),(a.dependencies&&a.dependencies.length>0||a.derivedDependencies&&a.derivedDependencies.length>0)&&e.jsxs("div",{className:"space-y-2",children:[a.dependencies&&a.dependencies.length>0&&e.jsxs("div",{children:[e.jsxs(b,{className:"text-xs flex items-center gap-1",children:[e.jsx(ge,{className:"h-3 w-3"}),"ê¸°ë³¸ PEG ì˜ì¡´ì„±"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.dependencies.map(i=>e.jsx(A,{variant:"outline",className:"text-xs",children:i},i))})]}),a.derivedDependencies&&a.derivedDependencies.length>0&&e.jsxs("div",{children:[e.jsxs(b,{className:"text-xs flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"}),"Derived PEG ì˜ì¡´ì„±"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.derivedDependencies.map(i=>e.jsx(A,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:i},i))})]})]}),e.jsxs(D,{onClick:()=>u({...a}),className:"w-full",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"í¸ì§‘"]})]}):e.jsx("p",{children:"ìˆ˜ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})})()}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"ìˆ˜ì‹ì„ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš”"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5"}),"í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬"]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-2",children:Z.map(a=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>T(a),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:a.name}),e.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:a.formula}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.description})]}),e.jsx(D,{variant:"ghost",size:"sm",children:e.jsx(ps,{className:"h-3 w-3"})})]})},a.id))})})]}),e.jsxs(R,{children:[e.jsx(H,{children:e.jsx(U,{children:"ì§€ì› ì—°ì‚°ì"})}),e.jsx(M,{children:e.jsx(Re,{className:"h-64",children:e.jsx("div",{className:"space-y-2",children:V.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("code",{className:"font-mono font-medium",children:a.symbol}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:a.name})]}),e.jsx("code",{className:"text-xs text-muted-foreground",children:a.example})]},i))})})})]})]}),e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"ì‚¬ìš© ê°€ëŠ¥í•œ PEG"}),e.jsx(ve,{children:"ìˆ˜ì‹ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ PEGì™€ ìƒì„±ëœ Derived PEG ëª©ë¡ì…ë‹ˆë‹¤"})]}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[d.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"ê¸°ë³¸ PEG (",d.length,"ê°œ)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(a=>e.jsx(D,{variant:"outline",size:"sm",onClick:()=>{l&&u({...l,formula:l.formula+a.value})},className:"text-xs",children:a.label||a.value},a.value))})]}),y.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Derived PEG (",y.filter(a=>a.active).length,"ê°œ)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.filter(a=>a.active).map(a=>e.jsxs(D,{variant:"outline",size:"sm",onClick:()=>{if(l){const i=`${a.name.replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase()}`;u({...l,formula:l.formula+i})}},className:"text-xs bg-blue-50 border-blue-200 hover:bg-blue-100",title:a.description,children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),a.name,a.unit&&e.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",a.unit,")"]})]},a.id))}),y.filter(a=>a.active).length===0&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(ie,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"ì•„ì§ ìƒì„±ëœ Derived PEGê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-xs",children:"ìƒˆ ìˆ˜ì‹ì„ ì¶”ê°€í•˜ê³  í™œì„±í™”í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-sm text-blue-700 mb-1",children:"ğŸ’¡ ì‚¬ìš©ë²•"}),e.jsxs("ul",{className:"text-xs text-blue-600 space-y-1",children:[e.jsx("li",{children:"â€¢ ê¸°ë³¸ PEG: í´ë¦­í•˜ë©´ ìˆ˜ì‹ì— ë°”ë¡œ ì‚½ì…ë©ë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ Derived PEG: ë‹¤ë¥¸ ìˆ˜ì‹ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê³„ì‚°ëœ ê°’ì…ë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ ë¹„í™œì„±í™”ëœ Derived PEGëŠ” ëª©ë¡ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ Derived PEGë¼ë¦¬ ìˆœí™˜ ì°¸ì¡°í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”"})]})]})]})})]})]})};function Es(s=[]){return s.map(o=>({value:o.value,label:o.label,type:o.type,color:o.type==="derived"?"#3b82f6":"#6b7280",isDerived:o.type==="derived",description:o.description,formula:o.formula}))}const _s=()=>{var B,Y,q,ae,de,O,t,j,ce,ne,ye,oe,te,le,Ae,Ie,$e,Le,Ge,Te,Be;const{settings:s,isLoading:o,isSaving:d,error:v,lastSaved:P,updateSettings:N,saveSettings:l,resetSettings:u}=Fe(),[x,g]=c.useState([]),[C,I]=c.useState(!1),[E,X]=c.useState(null),y=c.useCallback(async()=>{var r,f;try{I(!0),console.info("[PreferenceManager] Fetching DB PEGs");const n=(s==null?void 0:s.databaseSettings)||{};if(!n.host){console.warn("[PreferenceManager] No DB config found");return}const F=await ue.post("/api/master/pegs",{host:String(n.host).trim(),port:Number(n.port)||5432,user:String(n.user||"").trim(),password:String(n.password||"").trim(),dbname:String(n.dbname||"").trim(),table:String(n.table||"summary").trim(),limit:500}),p=((r=F==null?void 0:F.data)==null?void 0:r.pegs)||(Array.isArray((f=F==null?void 0:F.data)==null?void 0:f.items)?F.data.items.map(z=>({id:z,name:z})):Array.isArray(F==null?void 0:F.data)?F.data.map(z=>({id:z,name:z})):[]);console.info("[PreferenceManager] DB PEGs loaded:",p.length);const re=p.map(z=>({value:z.id||z.name||z.peg_name,label:String(z.name||z.id||z.peg_name)}));g(re),X(new Date)}catch(n){console.error("[PreferenceManager] Error fetching DB PEGs:",n)}finally{I(!1)}},[s==null?void 0:s.databaseSettings]),w=c.useCallback(()=>{const r=Es(x);return console.log("âœ… ìµœì¢… PEG ì˜µì…˜:",r),r},[x]),Z=JSON.stringify({host:(B=s==null?void 0:s.databaseSettings)==null?void 0:B.host,port:(Y=s==null?void 0:s.databaseSettings)==null?void 0:Y.port,user:(q=s==null?void 0:s.databaseSettings)==null?void 0:q.user,dbname:(ae=s==null?void 0:s.databaseSettings)==null?void 0:ae.dbname,table:(de=s==null?void 0:s.databaseSettings)==null?void 0:de.table});c.useEffect(()=>{y()},[y,Z]);const V=[{key:"selectedPegs",label:"Dashboardì— í‘œì‹œí•  PEG ëª©ë¡",type:"multiselect",required:!1,options:w(),placeholder:"Database PEGì—ì„œ ì„ íƒí•˜ì„¸ìš”"},{key:"chartLayout",label:"ê·¸ë˜í”„ ì •ë ¬ ë°©ì‹",type:"select",options:[{value:"byPeg",label:"PEGë³„ (PEGë§ˆë‹¤ Cell/NE ì‹œë¦¬ì¦ˆ)"},{value:"byEntity",label:"Cell/NEë³„ (ì—”í„°í‹°ë§ˆë‹¤ PEG ì‹œë¦¬ì¦ˆ)"}]}],[G,J]=c.useState([]),[S,Q]=c.useState([]),[ee,L]=c.useState([]),[T,_]=c.useState([]),[a,i]=c.useState([]),[h,$]=c.useState([]);c.useEffect(()=>{const r=(s==null?void 0:s.statisticsSettings)||{};Q(Array.isArray(r.selectedHosts)?r.selectedHosts:[]),_(Array.isArray(r.selectedNEs)?r.selectedNEs:[]),$(Array.isArray(r.selectedCellIds)?r.selectedCellIds:[])},[s==null?void 0:s.statisticsSettings]),c.useEffect(()=>{(async()=>{var f;try{const n=(s==null?void 0:s.databaseSettings)||{};if(!n.host)return;const F={host:String(n.host||"").trim(),port:Number(n.port)||5432,user:String(n.user||"").trim(),password:String(n.password||"").trim(),dbname:String(n.dbname||"").trim(),table:String(n.table||"summary").trim()},p=await ue.post("/api/master/hosts",F);J(Array.isArray((f=p==null?void 0:p.data)==null?void 0:f.hosts)?p.data.hosts:[])}catch(n){console.error("[PreferenceManager] HOST ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨",n)}})()},[(O=s==null?void 0:s.databaseSettings)==null?void 0:O.host,(t=s==null?void 0:s.databaseSettings)==null?void 0:t.port,(j=s==null?void 0:s.databaseSettings)==null?void 0:j.user,(ce=s==null?void 0:s.databaseSettings)==null?void 0:ce.password,(ne=s==null?void 0:s.databaseSettings)==null?void 0:ne.dbname,(ye=s==null?void 0:s.databaseSettings)==null?void 0:ye.table]),c.useEffect(()=>{(async()=>{var f;try{const n=(s==null?void 0:s.databaseSettings)||{};if(!n.host||S.length===0){L([]);return}const F={host:String(n.host||"").trim(),port:Number(n.port)||5432,user:String(n.user||"").trim(),password:String(n.password||"").trim(),dbname:String(n.dbname||"").trim(),table:String(n.table||"summary").trim(),hosts:S},p=await ue.post("/api/master/nes-by-host",F);L(Array.isArray((f=p==null?void 0:p.data)==null?void 0:f.nes)?p.data.nes:[])}catch(n){console.error("[PreferenceManager] NE ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨",n)}})()},[S,s==null?void 0:s.databaseSettings]),c.useEffect(()=>{(async()=>{var f;try{const n=(s==null?void 0:s.databaseSettings)||{};if(!n.host||S.length===0||T.length===0){i([]);return}const F={host:String(n.host||"").trim(),port:Number(n.port)||5432,user:String(n.user||"").trim(),password:String(n.password||"").trim(),dbname:String(n.dbname||"").trim(),table:String(n.table||"summary").trim(),hosts:S,nes:T},p=await ue.post("/api/master/cells-by-host-ne",F);i(Array.isArray((f=p==null?void 0:p.data)==null?void 0:f.cellids)?p.data.cellids:[])}catch(n){console.error("[PreferenceManager] CellID ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨",n)}})()},[T,S,s==null?void 0:s.databaseSettings]);const m=[{key:"host",label:"Host",type:"text",placeholder:"ì˜ˆ: 127.0.0.1"},{key:"port",label:"Port",type:"number",min:1,max:65535,placeholder:"5432"},{key:"user",label:"User",type:"text",placeholder:"postgres"},{key:"password",label:"Password",type:"text",placeholder:"ë¹„ë°€ë²ˆí˜¸"},{key:"dbname",label:"DB Name",type:"text",placeholder:"postgres"},{key:"table",label:"ê¸°ë³¸ í…Œì´ë¸”ëª…",type:"text",placeholder:"summary"}],k=[{key:"enableNotifications",label:"ì•Œë¦¼ í™œì„±í™”",type:"switch"},{key:"emailNotifications",label:"ì´ë©”ì¼ ì•Œë¦¼",type:"switch"},{key:"soundEnabled",label:"ì†Œë¦¬ ì•Œë¦¼",type:"switch"},{key:"notificationFrequency",label:"ì•Œë¦¼ ë¹ˆë„",type:"select",options:[{value:"immediate",label:"ì¦‰ì‹œ"},{value:"hourly",label:"ë§¤ì‹œê°„"},{value:"daily",label:"ë§¤ì¼"},{value:"weekly",label:"ë§¤ì£¼"}]}];return o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"í™˜ê²½ì„¤ì •"}),e.jsxs(A,{variant:"secondary",className:"text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"ë¡œë”© ì¤‘..."]})]}),e.jsx(R,{children:e.jsx(M,{className:"pt-6",children:e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤..."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"í™˜ê²½ì„¤ì •"}),e.jsx("p",{className:"text-muted-foreground",children:"Dashboardì™€ Statisticsì˜ ë™ì‘ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsxs(A,{variant:"secondary",className:"text-xs",children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),"ì €ì¥ ì¤‘..."]}),v&&e.jsx(A,{variant:"destructive",className:"text-xs",children:"ì˜¤ë¥˜ ë°œìƒ"}),P&&e.jsxs(A,{variant:"outline",className:"text-xs",children:["ë§ˆì§€ë§‰ ì €ì¥: ",new Date(P).toLocaleTimeString()]})]})]}),e.jsxs(Ye,{defaultValue:"dashboard",className:"w-full",children:[e.jsxs(Ke,{className:"grid w-full grid-cols-6",children:[e.jsxs(me,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(me,{value:"statistics",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Statistics"]}),e.jsxs(me,{value:"database",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Database"]}),e.jsxs(me,{value:"derived-peg",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Derived PEG"]}),e.jsxs(me,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"ì•Œë¦¼"]}),e.jsxs(me,{value:"backup",className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"ë°±ì—…/ë³µì›"]})]}),e.jsxs(xe,{value:"dashboard",className:"space-y-6",children:[e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"PEG ë°ì´í„° ì†ŒìŠ¤"]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"PEG ë°ì´í„° ì†ŒìŠ¤"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Database Settingsì—ì„œ ì—°ê²°ëœ ì‹¤ì œ PEG ëª©ë¡ì„ ì‚¬ìš©í•©ë‹ˆë‹¤"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(D,{variant:"outline",size:"sm",onClick:y,disabled:C,children:[e.jsx(Ns,{className:`h-3 w-3 ${C?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"ì‚¬ìš© ê°€ëŠ¥í•œ PEG"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length,"ê°œ"]})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E?E.toLocaleTimeString():"ì—†ìŒ"})]})]}),x.length===0&&!C&&e.jsx("div",{className:"p-3 border rounded-lg bg-amber-50 border-amber-200",children:e.jsx("p",{className:"text-sm text-amber-700",children:"âš ï¸ DB PEGë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Database Settingsì—ì„œ DB ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”."})}),x.length>0&&e.jsx("div",{className:"p-3 border rounded-lg bg-green-50 border-green-200",children:e.jsxs("p",{className:"text-sm text-green-700",children:["âœ… ",x.length,"ê°œì˜ ì‹¤ì œ DB PEGë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"]})})]})})]}),e.jsx(Se,{title:"Dashboard ì„¤ì •",description:"DBì—ì„œ ì—°ë™ëœ PEGë§Œ ì„ íƒí•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤",settingKey:"dashboardSettings",fields:V,defaultOpen:!0,showResetButton:!0,showSaveButton:!1},`dashboard-settings-${x.length}-${E?E.getTime():0}`),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx(D,{size:"sm",onClick:async()=>{try{await l(),alert("Dashboard ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(r){alert("ì €ì¥ ì‹¤íŒ¨: "+((r==null?void 0:r.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}},disabled:d,children:d?"ì €ì¥ ì¤‘...":"ì €ì¥"})})]}),e.jsx(xe,{value:"statistics",className:"space-y-6",children:e.jsxs(R,{children:[e.jsx(H,{children:e.jsx(U,{children:"ë°ì´í„° ì„ íƒ (HOST â†’ NE â†’ CellID)"})}),e.jsxs(M,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{className:"block mb-2",children:"HOST (ë‹¤ì¤‘ ì„ íƒ)"}),e.jsx("select",{multiple:!0,className:"w-full border rounded p-2 h-48",value:S,onChange:r=>{const f=Array.from(r.target.selectedOptions).map(n=>n.value);Q(f)},children:G.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx(b,{className:"block mb-2",children:"NE (ë‹¤ì¤‘ ì„ íƒ)"}),e.jsx("select",{multiple:!0,className:"w-full border rounded p-2 h-48",value:T,onChange:r=>{const f=Array.from(r.target.selectedOptions).map(n=>n.value);_(f)},children:ee.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx(b,{className:"block mb-2",children:"CellID (ë‹¤ì¤‘ ì„ íƒ)"}),e.jsx("select",{multiple:!0,className:"w-full border rounded p-2 h-48",value:h,onChange:r=>{const f=Array.from(r.target.selectedOptions).map(n=>n.value);$(f)},children:a.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{className:"mb-1",children:["HOST: ",S.length,"ê°œ"]}),e.jsxs("div",{className:"mb-1",children:["NE: ",T.length,"ê°œ"]}),e.jsxs("div",{children:["CellID: ",h.length,"ê°œ"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(D,{size:"sm",onClick:async()=>{try{N({statisticsSettings:{...(s==null?void 0:s.statisticsSettings)||{},selectedHosts:S,selectedNEs:T,selectedCellIds:h}}),await l(),alert("Statistics ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(r){alert("ì €ì¥ ì‹¤íŒ¨: "+((r==null?void 0:r.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}},disabled:d,children:d?"ì €ì¥ ì¤‘...":"ì €ì¥"})})]})]})]})}),e.jsxs(xe,{value:"database",className:"space-y-6",children:[e.jsx(Se,{title:"Database ì„¤ì •",description:"LLM ë¶„ì„ê³¼ Statisticsì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•  PostgreSQL DB ì„¤ì •ì…ë‹ˆë‹¤ (í…Œì´ë¸”ëª… í¬í•¨).",settingKey:"databaseSettings",fields:m,defaultOpen:!0,showResetButton:!0,showSaveButton:!1}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(D,{size:"sm",onClick:async()=>{try{await l(),alert("Database ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(r){alert("ì €ì¥ ì‹¤íŒ¨: "+((r==null?void 0:r.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}},disabled:d,children:d?"ì €ì¥ ì¤‘...":"ì €ì¥"}),e.jsx(D,{size:"sm",onClick:async()=>{var r,f,n,F;try{const p=(s==null?void 0:s.databaseSettings)||{},re=await ue.post("/api/master/test-connection",{host:(p.host||"").trim(),port:Number(p.port)||5432,user:(p.user||"").trim(),password:(p.password||"").trim(),dbname:(p.dbname||"").trim(),table:(p.table||"summary").trim()}),z=(r=re==null?void 0:re.data)==null?void 0:r.success;alert(z?"DB ì—°ê²° ì„±ê³µ. table_exists="+((f=re==null?void 0:re.data)==null?void 0:f.table_exists):"DB ì—°ê²° ì‹¤íŒ¨: ì‘ë‹µ í˜•ì‹ í™•ì¸ í•„ìš”")}catch(p){alert("DB ì—°ê²° ì‹¤íŒ¨: "+(((F=(n=p==null?void 0:p.response)==null?void 0:n.data)==null?void 0:F.detail)||(p==null?void 0:p.message)))}},children:"Test Connection"})]})]}),e.jsx(xe,{value:"derived-peg",className:"space-y-6",children:e.jsx(Ds,{derivedPegSettings:(s==null?void 0:s.derivedPegSettings)||{formulas:[],settings:{}},updateDerivedPegSettings:r=>{N({derivedPegSettings:r})},availablePegs:w(),saving:d})}),e.jsx(xe,{value:"notifications",className:"space-y-6",children:e.jsx(Se,{title:"ì•Œë¦¼ ì„¤ì •",description:"ì´ë©”ì¼, ì†Œë¦¬ ì•Œë¦¼ ë“± ì•Œë¦¼ ê´€ë ¨ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤",settingKey:"notificationSettings",fields:k,defaultOpen:!0,showResetButton:!0,showSaveButton:!1})}),e.jsxs(xe,{value:"backup",className:"space-y-6",children:[e.jsx(Cs,{title:"ì„¤ì • ë°±ì—… ë° ë³µì›",description:"ëª¨ë“  í™˜ê²½ì„¤ì •ì„ JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê±°ë‚˜ ë°±ì—… íŒŒì¼ì—ì„œ ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤",defaultOpen:!0}),e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-orange-500"}),"ì„¤ì • ì´ˆê¸°í™”"]}),e.jsx(ve,{children:"Dashboard, Statistics, Database ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bs,{className:"h-5 w-5 text-orange-500 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"ì£¼ì˜ì‚¬í•­"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Dashboardì˜ ì„ íƒëœ PEG ëª©ë¡ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ Statisticsì˜ ê¸°ë³¸ ì„¤ì •ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ Database ì—°ê²° ì„¤ì •ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤"}),e.jsx("li",{children:"â€¢ ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"ì´ˆê¸°í™”í•  ì„¤ì •"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dashboard, Statistics, Database ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”"})]}),e.jsx(D,{variant:"destructive",size:"sm",onClick:async()=>{if(window.confirm(`ì •ë§ë¡œ Dashboard, Statistics, Database ì„¤ì •ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))try{const f=await u(["dashboardSettings","statisticsSettings","databaseSettings"]);f.success?alert("âœ… ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!"):alert("âŒ ì„¤ì • ì´ˆê¸°í™” ì‹¤íŒ¨: "+(f.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"))}catch(f){alert("âŒ ì„¤ì • ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ ë°œìƒ: "+f.message)}},disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"h-4 w-4 mr-2 animate-spin"}),"ì´ˆê¸°í™” ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"ì„¤ì • ì´ˆê¸°í™”"]})})]})]})]})]})]}),e.jsxs(R,{children:[e.jsx(H,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5"}),"í˜„ì¬ ì„¤ì • ìš”ì•½"]})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Dashboard"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì„ íƒëœ PEG: ",((te=(oe=s==null?void 0:s.dashboardSettings)==null?void 0:oe.selectedPegs)==null?void 0:te.length)||0,"ê°œ"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["PEG ì†ŒìŠ¤: ",`DB (${x.length}ê°œ)`]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì°¨íŠ¸ ìŠ¤íƒ€ì¼: ",((le=s==null?void 0:s.dashboardSettings)==null?void 0:le.chartStyle)||"line"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ìë™ ìƒˆë¡œê³ ì¹¨: ",((Ae=s==null?void 0:s.dashboardSettings)==null?void 0:Ae.autoRefreshInterval)||0,"ì´ˆ"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Statistics"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ê¸°ë³¸ ê¸°ê°„: ",((Ie=s==null?void 0:s.statisticsSettings)==null?void 0:Ie.defaultDateRange)||7,"ì¼"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì†Œìˆ˜ì : ",(($e=s==null?void 0:s.statisticsSettings)==null?void 0:$e.decimalPlaces)||2,"ìë¦¬"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ë¹„êµ ì˜µì…˜: ",(Le=s==null?void 0:s.statisticsSettings)!=null&&Le.showComparisonOptions?"í™œì„±":"ë¹„í™œì„±"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"ì•Œë¦¼"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì•Œë¦¼: ",(Ge=s==null?void 0:s.notificationSettings)!=null&&Ge.enableNotifications?"í™œì„±":"ë¹„í™œì„±"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì´ë©”ì¼: ",(Te=s==null?void 0:s.notificationSettings)!=null&&Te.emailNotifications?"í™œì„±":"ë¹„í™œì„±"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ì†Œë¦¬: ",(Be=s==null?void 0:s.notificationSettings)!=null&&Be.soundEnabled?"í™œì„±":"ë¹„í™œì„±"]})]})]})]})})]})]})};export{_s as default};
