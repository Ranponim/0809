const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard.optimized-29zEN6Vr.js","assets/vendor-CIPdjx1t.js","assets/utils-vendor-DrCDvq1f.js","assets/switch-B92w76t-.js","assets/ui-vendor-C5A5DcrM.js","assets/usePreference-BdPvxwX6.js","assets/chart-vendor-CWmmjCk1.js","assets/icon-vendor-CWV3Q6sV.js","assets/Statistics-DTFkThvY.js","assets/BasicComparison-C5W25tiz.js","assets/separator-DidKRWFN.js","assets/scroll-area-ZOOfn5zd.js","assets/ComparisonChart-Dm_WdRJP.js","assets/checkbox-DNwZZDik.js","assets/PreferenceManager-SgAOyA_V.js","assets/ResultsList-D1nVsgTu.js","assets/ResultDetail-D-fUeF-8.js","assets/LLMAnalysisManager-BEDNlIbb.js","assets/AdvancedChart-C6hkd077.js","assets/webVitals-Djrzh1kO.js"])))=>i.map(i=>d[i]);
var xs=Object.defineProperty;var us=(s,t,a)=>t in s?xs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var Re=(s,t,a)=>us(s,typeof t!="symbol"?t+"":t,a);import{a1 as hs,M as e,r as o,R as fe,a2 as gs,a3 as ps,a4 as fs,a5 as js,a6 as Qe}from"./vendor-CIPdjx1t.js";import{S as es,R as ys,a as vs,I as Ns,b as bs,T as ws,c as Ss,V as _s,P as Ds,C as Es,d as Ts,e as Rs,f as Cs,g as ks,h as Ps,i as As,j as Is,k as Ls,l as Ms,m as Os,n as Vs,O as zs,o as $s,L as Us,p as Fs,q as Gs}from"./ui-vendor-C5A5DcrM.js";import{f as Bs,D as Oe}from"./utils-vendor-DrCDvq1f.js";import{C as ye,G as Ws,A as ss,P as we,T as Ve,D as Hs,a as ze,B as Ks,S as Ys,L as te,b as q,c as oe,d as ae,e as xe,f as qs,g as je,h as ts,i as as,Z as Js,R as $e,X as Xs,F as Zs,j as Qs,k as ue,E as Fe,l as et,I as Ge}from"./icon-vendor-CWV3Q6sV.js";import{R as st,L as tt,C as at,X as rt,Y as Be,T as nt,a as lt,b as Ce,c as ke}from"./chart-vendor-CWmmjCk1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function m(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();const it="modulepreload",ot=function(s){return"/"+s},We={},$=function(t,a,m){let l=Promise.resolve();if(a&&a.length>0){let c=function(S){return Promise.all(S.map(i=>Promise.resolve(i).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),M=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=c(a.map(S=>{if(S=ot(S),S in We)return;We[S]=!0;const i=S.endsWith(".css"),g=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${g}`))return;const x=document.createElement("link");if(x.rel=i?"stylesheet":it,i||(x.as="script"),x.crossOrigin="",x.href=S,M&&x.setAttribute("nonce",M),document.head.appendChild(x),i)return new Promise((O,I)=>{x.addEventListener("load",O),x.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${S}`)))})}))}function u(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return l.then(c=>{for(const f of c||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})};function w(...s){return hs(Bs(s))}const ct=Oe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function F({className:s,variant:t,size:a,asChild:m=!1,...l}){const u=m?es:"button";return e.jsx(u,{"data-slot":"button",className:w(ct({variant:t,size:a,className:s})),...l})}const dt=o.lazy(()=>$(()=>import("./Dashboard.optimized-29zEN6Vr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),mt=o.lazy(()=>$(()=>import("./Statistics-DTFkThvY.js"),__vite__mapDeps([8,1,2,9,10,4,11,12,7,6,5,13]))),xt=o.lazy(()=>$(()=>import("./PreferenceManager-SgAOyA_V.js"),__vite__mapDeps([14,1,2,5,3,4,13,7,10,11,6]))),ut=o.lazy(()=>$(()=>import("./ResultsList-D1nVsgTu.js"),__vite__mapDeps([15,1,2,4,7,16,11,6]))),ht=o.lazy(()=>$(()=>import("./LLMAnalysisManager-BEDNlIbb.js"),__vite__mapDeps([17,1,2,5,7,4,6])));o.lazy(()=>$(()=>import("./AdvancedChart-C6hkd077.js"),__vite__mapDeps([18,1,2,13,4,7,6])));o.lazy(()=>$(()=>import("./ComparisonChart-Dm_WdRJP.js"),__vite__mapDeps([12,1,2,7,6,4])));o.lazy(()=>$(()=>import("./BasicComparison-C5W25tiz.js"),__vite__mapDeps([9,1,2,10,4,11,12,7,6,5,13])));o.lazy(()=>$(()=>import("./ResultDetail-D-fUeF-8.js"),__vite__mapDeps([16,1,2,11,4,7,6])));const Le=()=>$(()=>import("./Dashboard.optimized-29zEN6Vr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),rs=()=>$(()=>import("./Statistics-DTFkThvY.js"),__vite__mapDeps([8,1,2,9,10,4,11,12,7,6,5,13])),ns=()=>$(()=>import("./PreferenceManager-SgAOyA_V.js"),__vite__mapDeps([14,1,2,5,3,4,13,7,10,11,6])),ls=()=>$(()=>import("./ResultsList-D1nVsgTu.js"),__vite__mapDeps([15,1,2,4,7,16,11,6])),gt=()=>$(()=>import("./LLMAnalysisManager-BEDNlIbb.js"),__vite__mapDeps([17,1,2,5,7,4,6])),pt=()=>$(()=>import("./AdvancedChart-C6hkd077.js"),__vite__mapDeps([18,1,2,13,4,7,6])),ft=()=>$(()=>import("./ComparisonChart-Dm_WdRJP.js"),__vite__mapDeps([12,1,2,7,6,4])),jt=()=>{if("connection"in navigator){const t=navigator.connection.effectiveType;console.log(`🌐 네트워크 속도: ${t}`),t==="4g"||t==="3g"?(console.log("🚀 빠른 네트워크 감지 - 컴포넌트 프리로딩 시작"),setTimeout(()=>{Le().catch(console.warn),rs().catch(console.warn)},1e3),setTimeout(()=>{ns().catch(console.warn),ls().catch(console.warn)},2e3),setTimeout(()=>{pt().catch(console.warn),ft().catch(console.warn)},3e3)):console.log("📶 느린 네트워크 - 필요시에만 로드")}else console.log("📶 네트워크 정보 불가 - 기본 프리로딩"),setTimeout(()=>{Le().catch(console.warn)},2e3)},ve=({name:s="컴포넌트"})=>e.jsxs("div",{className:"flex items-center justify-center min-h-[200px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[s," 로딩 중..."]})]}),yt=({...s})=>e.jsx(o.Suspense,{fallback:e.jsx(ve,{name:"Dashboard"}),children:e.jsx(dt,{...s})}),vt=({...s})=>e.jsx(o.Suspense,{fallback:e.jsx(ve,{name:"Statistics"}),children:e.jsx(mt,{...s})}),Nt=({...s})=>e.jsx(o.Suspense,{fallback:e.jsx(ve,{name:"Preference"}),children:e.jsx(xt,{...s})}),bt=({...s})=>e.jsx(o.Suspense,{fallback:e.jsx(ve,{name:"분석 결과"}),children:e.jsx(ut,{...s})}),wt=({...s})=>e.jsx(o.Suspense,{fallback:e.jsx(ve,{name:"LLM 분석"}),children:e.jsx(ht,{...s})}),St=({children:s,activeMenu:t,setActiveMenu:a})=>{const m=[{id:"dashboard",label:"Dashboard",icon:ye,preload:Le},{id:"compare-result",label:"Compare Result",icon:Ws,preload:null},{id:"detailed-analysis",label:"Detailed Analysis",icon:ss,preload:null},{id:"analysis-workflow",label:"Analysis Workflow",icon:we,preload:null},{id:"analysis-setup",label:"분석 설정",icon:Ve,preload:null},{id:"results",label:"분석 결과",icon:Hs,preload:ls},{id:"statistics",label:"Statistics",icon:ze,preload:rs},{id:"llm-analysis",label:"LLM 분석",icon:Ks,preload:gt},{id:"preference",label:"Preference",icon:Ys,preload:ns}];o.useEffect(()=>{jt()},[]);const l=u=>{u.preload&&t!==u.id&&(console.log(`🎯 메뉴 호버 감지 - ${u.label} 프리로딩 시작`),u.preload().catch(c=>{console.warn(`⚠️ ${u.label} 프리로딩 실패:`,c)}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"PVT  KPI Dashboard"})})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-64 bg-white shadow-sm min-h-screen flex flex-col",children:[e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:m.map(u=>{const c=u.icon;return e.jsxs(F,{variant:t===u.id?"default":"ghost",className:"w-full justify-start",onClick:()=>a(u.id),onMouseEnter:()=>l(u),children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),u.label]},u.id)})})}),e.jsx("div",{className:"mt-auto p-4 text-xs text-gray-400",children:"Powered by PVT AI Crew"})]}),e.jsx("main",{className:"flex-1 p-6",children:s})]})]})};function se({className:s,type:t,...a}){return e.jsx("input",{type:t,"data-slot":"input",className:w("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...a})}function v({className:s,...t}){return e.jsx(ys,{"data-slot":"label",className:w("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function C({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:w("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function G({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:w("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function B({className:s,...t}){return e.jsx("div",{"data-slot":"card-title",className:w("leading-none font-semibold",s),...t})}function _t({className:s,...t}){return e.jsx("div",{"data-slot":"card-description",className:w("text-muted-foreground text-sm",s),...t})}function k({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:w("px-6",s),...t})}function is({className:s,value:t,...a}){return e.jsx(vs,{"data-slot":"progress",className:w("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...a,children:e.jsx(Ns,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const Dt=Oe("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ce({className:s,variant:t,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:w(Dt({variant:t}),s),...a})}function de({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:w("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}const Et=Oe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function W({className:s,variant:t,asChild:a=!1,...m}){const l=a?es:"span";return e.jsx(l,{"data-slot":"badge",className:w(Et({variant:t}),s),...m})}const Pe="http://localhost:8000",Tt=()=>{const[s,t]=o.useState({start_date:"",end_date:"",analysis_type:"kpi_comparison",parameters:{}}),[a,m]=o.useState(null),[l,u]=o.useState(null),[c,f]=o.useState(!1),[M,S]=o.useState(null),[i,g]=o.useState(null),x=async()=>{try{f(!0),S(null);const h=await fetch(`${Pe}/api/analyze/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!h.ok)throw new Error(`분석 요청 실패: ${h.status}`);const N=await h.json();m(N.task_id),u({status:N.status,progress:0,current_step:"대기 중"}),O(N.task_id)}catch(h){S(h.message)}finally{f(!1)}},O=h=>{i&&clearInterval(i),I(h);const N=setInterval(()=>{I(h)},2e3);g(N)},I=async h=>{try{const N=await fetch(`${Pe}/api/analyze/${h}/status`);if(!N.ok)throw new Error(`상태 조회 실패: ${N.status}`);const y=await N.json();u(y),(y.status==="SUCCESS"||y.status==="FAILURE")&&i&&(clearInterval(i),g(null))}catch(N){console.error("상태 조회 오류:",N)}},T=async()=>{if(a)try{(await fetch(`${Pe}/api/analyze/${a}`,{method:"DELETE"})).ok&&(m(null),u(null),i&&(clearInterval(i),g(null)))}catch(h){S(h.message)}};o.useEffect(()=>()=>{i&&clearInterval(i)},[i]);const D=h=>{switch(h){case"PENDING":return e.jsx(oe,{className:"h-4 w-4 text-yellow-500"});case"RUNNING":return e.jsx(te,{className:"h-4 w-4 text-blue-500 animate-spin"});case"SUCCESS":return e.jsx(ae,{className:"h-4 w-4 text-green-500"});case"FAILURE":return e.jsx(q,{className:"h-4 w-4 text-red-500"});default:return e.jsx(oe,{className:"h-4 w-4 text-gray-500"})}},H=h=>{switch(h){case"PENDING":return"bg-yellow-100 text-yellow-800";case"RUNNING":return"bg-blue-100 text-blue-800";case"SUCCESS":return"bg-green-100 text-green-800";case"FAILURE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs(C,{children:[e.jsxs(G,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5"}),"KPI 분석 워크플로우"]}),e.jsx(_t,{children:"분석 요청을 시작하고 실시간으로 진행 상황을 확인할 수 있습니다."})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"분석 요청"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"start_date",children:"시작 날짜"}),e.jsx(se,{id:"start_date",type:"date",value:s.start_date,onChange:h=>t({...s,start_date:h.target.value}),disabled:c||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"end_date",children:"종료 날짜"}),e.jsx(se,{id:"end_date",type:"date",value:s.end_date,onChange:h=>t({...s,end_date:h.target.value}),disabled:c||a})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"analysis_type",children:"분석 유형"}),e.jsxs("select",{id:"analysis_type",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:s.analysis_type,onChange:h=>t({...s,analysis_type:h.target.value}),disabled:c||a,children:[e.jsx("option",{value:"kpi_comparison",children:"KPI 비교 분석"}),e.jsx("option",{value:"anomaly_detection",children:"이상 탐지"}),e.jsx("option",{value:"trend_analysis",children:"트렌드 분석"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{onClick:x,disabled:c||!s.start_date||!s.end_date||a,className:"flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 animate-spin"}),"분석 시작 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-4 w-4"}),"분석 시작"]})}),a&&e.jsxs(F,{variant:"outline",onClick:T,className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"취소"]})]})]}),M&&e.jsxs(ce,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(de,{children:M})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"작업 상태"}),e.jsx(C,{children:e.jsx(k,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"작업 ID:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:a})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"상태:"}),e.jsx(W,{className:H(l.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[D(l.status),l.status]})})]}),l.progress!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"진행률:"}),e.jsxs("span",{className:"text-sm font-medium",children:[l.progress,"%"]})]}),e.jsx(is,{value:l.progress,className:"w-full"})]}),l.current_step&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"현재 단계:"}),e.jsx("span",{className:"text-sm font-medium",children:l.current_step})]}),l.error&&e.jsxs(ce,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(de,{children:l.error})]}),l.result&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"분석 결과:"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:e.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(l.result,null,2)})})]})]})})})]})]})]})})};function X({...s}){return e.jsx(bs,{"data-slot":"select",...s})}function Z({...s}){return e.jsx(_s,{"data-slot":"select-value",...s})}function Q({className:s,size:t="default",children:a,...m}){return e.jsxs(ws,{"data-slot":"select-trigger","data-size":t,className:w("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...m,children:[a,e.jsx(Ss,{asChild:!0,children:e.jsx(xe,{className:"size-4 opacity-50"})})]})}function ee({className:s,children:t,position:a="popper",...m}){return e.jsx(Ds,{children:e.jsxs(Es,{"data-slot":"select-content",className:w("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...m,children:[e.jsx(Rt,{}),e.jsx(Ts,{className:w("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Ct,{})]})})}function R({className:s,children:t,...a}){return e.jsxs(Rs,{"data-slot":"select-item",className:w("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Cs,{children:e.jsx(qs,{className:"size-4"})})}),e.jsx(ks,{children:t})]})}function Rt({className:s,...t}){return e.jsx(Ps,{"data-slot":"select-scroll-up-button",className:w("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(je,{className:"size-4"})})}function Ct({className:s,...t}){return e.jsx(As,{"data-slot":"select-scroll-down-button",className:w("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(xe,{className:"size-4"})})}const kt=({title:s="날짜 범위",description:t="분석할 기간을 선택하세요",startDate:a,endDate:m,onDateChange:l,preset:u="",onPresetChange:c,disabled:f=!1,error:M=null,className:S="",showPresets:i=!0,minDate:g=null,maxDate:x=null})=>{const[O,I]=o.useState(a||""),[T,D]=o.useState(m||""),[H,h]=o.useState(null),N=[{value:"last7days",label:"최근 7일",days:7},{value:"last14days",label:"최근 14일",days:14},{value:"last30days",label:"최근 30일",days:30},{value:"thisweek",label:"이번 주",custom:!0},{value:"lastweek",label:"지난 주",custom:!0},{value:"thismonth",label:"이번 달",custom:!0},{value:"lastmonth",label:"지난 달",custom:!0},{value:"custom",label:"직접 선택",custom:!0}];o.useEffect(()=>{I(a||""),D(m||"")},[a,m]);const y=(b,r)=>{if(!b||!r)return"시작 날짜와 종료 날짜를 모두 입력해주세요";const d=new Date(b),p=new Date(r);return isNaN(d)||isNaN(p)?"올바른 날짜 형식을 입력해주세요":d>=p?"종료 날짜는 시작 날짜보다 이후여야 합니다":(p-d)/(1e3*60*60*24)>365?"날짜 범위는 최대 365일까지 선택할 수 있습니다":g&&d<new Date(g)?`시작 날짜는 ${g} 이후여야 합니다`:x&&p>new Date(x)?`종료 날짜는 ${x} 이전이어야 합니다`:null},re=(b,r)=>{let d=O,p=T;b==="start"?(d=r,I(r)):b==="end"&&(p=r,D(r));const A=y(d,p);h(A),!A&&l&&l({startDate:d,endDate:p})},L=b=>{const r=new Date;let d,p;switch(b){case"last7days":p=new Date(r),d=new Date(r.getTime()-10080*60*1e3);break;case"last14days":p=new Date(r),d=new Date(r.getTime()-336*60*60*1e3);break;case"last30days":p=new Date(r),d=new Date(r.getTime()-720*60*60*1e3);break;case"thisweek":const he=new Date(r);he.setDate(r.getDate()-r.getDay()),d=he,p=new Date(r);break;case"lastweek":const me=new Date(r);me.setDate(r.getDate()-r.getDay()-1);const Ne=new Date(me);Ne.setDate(me.getDate()-6),d=Ne,p=me;break;case"thismonth":d=new Date(r.getFullYear(),r.getMonth(),1),p=new Date(r);break;case"lastmonth":const De=new Date(r.getFullYear(),r.getMonth()-1,1),Ee=new Date(r.getFullYear(),r.getMonth(),0);d=De,p=Ee;break;case"custom":c&&c(b);return;default:return}const A=d.toISOString().split("T")[0],P=p.toISOString().split("T")[0];I(A),D(P);const K=y(A,P);h(K),!K&&l&&l({startDate:A,endDate:P}),c&&c(b)},_=(()=>{if(!O||!T)return null;try{const b=new Date(O),r=new Date(T);return{days:Math.ceil((r-b)/(1e3*60*60*24)),startFormatted:b.toLocaleDateString("ko-KR"),endFormatted:r.toLocaleDateString("ko-KR")}}catch{return null}})(),V=M||H,z=!V&&O&&T;return e.jsxs(C,{className:`${S} ${f?"opacity-50":""}`,children:[e.jsxs(G,{className:"pb-3",children:[e.jsxs(B,{className:"flex items-center gap-2 text-base",children:[e.jsx(ts,{className:"h-4 w-4"}),s]}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),e.jsxs(k,{className:"space-y-4",children:[i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"빠른 선택"}),e.jsxs(X,{value:u,onValueChange:L,disabled:f,children:[e.jsx(Q,{children:e.jsx(Z,{placeholder:"기간을 선택하세요"})}),e.jsx(ee,{children:N.map(b=>e.jsx(R,{value:b.value,children:b.label},b.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:`start-${s}`,className:"text-sm",children:"시작 날짜"}),e.jsx(se,{id:`start-${s}`,type:"date",value:O,onChange:b=>re("start",b.target.value),disabled:f,min:g,max:x,className:V?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:`end-${s}`,className:"text-sm",children:"종료 날짜"}),e.jsx(se,{id:`end-${s}`,type:"date",value:T,onChange:b=>re("end",b.target.value),disabled:f,min:g,max:x,className:V?"border-red-500":""})]})]}),V&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(as,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-700",children:V})]}),_&&z&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(ae,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("span",{className:"font-medium",children:[_.days,"일 기간"]}),e.jsxs("span",{className:"text-green-600 ml-2",children:["(",_.startFormatted," ~ ",_.endFormatted,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:z?"default":"secondary",className:"text-xs",children:[e.jsx(oe,{className:"h-3 w-3 mr-1"}),z?"유효한 범위":"범위 설정 필요"]}),_&&z&&e.jsxs(W,{variant:"outline",className:"text-xs",children:[_.days,"일 데이터"]})]})]})]})},be="http://localhost:8000",Pt=()=>{const[s,t]=o.useState({startDate:"",endDate:""}),[a,m]=o.useState({baselinePeriod:"",comparisonPeriod:""}),[l,u]=o.useState({useRecommendedTests:!0,includeComprehensiveAnalysis:!0,confidenceLevel:.95}),[c,f]=o.useState(!1),[M,S]=o.useState(!1),[i,g]=o.useState(null),[x,O]=o.useState(null),[I,T]=o.useState(null),[D,H]=o.useState(null),[h,N]=o.useState(null),[y,re]=o.useState([]),[L,J]=o.useState(!1),[_,V]=o.useState({baseline:{startDate:"",endDate:""},comparison:{startDate:"",endDate:""}}),z=n=>{console.log("📅 날짜 범위 변경:",n),t(n),T(null),m({baselinePeriod:"",comparisonPeriod:""}),re([])},b=(n,j)=>{console.log(`📊 ${n} 기간 변경:`,j),m(E=>({...E,[n]:j})),T(null)},r=(n,j)=>{console.log(`⚙️ 분석 설정 변경 - ${n}:`,j),u(E=>({...E,[n]:j}))},d=(n,j,E)=>{console.log(`📅 수동 기간 변경 - ${n}.${j}:`,E),V(U=>({...U,[n]:{...U[n],[j]:E}})),T(null)},p=n=>{console.log(`🔄 수동 오버라이드 ${n?"활성화":"비활성화"}`),J(n),n||y.length>=2&&m({baselinePeriod:y[0].value,comparisonPeriod:y[1].value})},A=async()=>{if(!s.startDate||!s.endDate){T("날짜 범위를 먼저 선택해주세요.");return}try{console.log("🔍 기간 식별 시작..."),S(!0),T(null);const n=await fetch(`${be}/api/analysis/identify-periods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:s.startDate,end_date:s.endDate,min_segment_length:24,max_segments:10})});if(!n.ok){const U=await n.json().catch(()=>({}));throw new Error(`기간 식별 실패: ${n.status} - ${U.detail||n.statusText}`)}const j=await n.json();console.log("✅ 기간 식별 성공:",j);const E=j.periods.map((U,Y)=>({value:`period_${Y+1}`,label:`기간 ${Y+1} (${U.start_date} ~ ${U.end_date})`,startDate:U.start_date,endDate:U.end_date,stability_score:U.stability_score,data_points:U.data_points}));re(E),E.length>=2&&m({baselinePeriod:E[0].value,comparisonPeriod:E[1].value})}catch(n){console.error("❌ 기간 식별 오류:",n),T(n.message)}finally{S(!1)}},P=async()=>{try{if(console.log("🚀 분석 시작..."),f(!0),T(null),N(null),!s.startDate||!s.endDate)throw new Error("날짜 범위를 선택해주세요.");let n,j;if(L){if(!_.baseline.startDate||!_.baseline.endDate)throw new Error("기준 기간의 시작 날짜와 종료 날짜를 모두 입력해주세요.");if(!_.comparison.startDate||!_.comparison.endDate)throw new Error("비교 기간의 시작 날짜와 종료 날짜를 모두 입력해주세요.");n={startDate:_.baseline.startDate,endDate:_.baseline.endDate},j={startDate:_.comparison.startDate,endDate:_.comparison.endDate}}else{if(!a.baselinePeriod||!a.comparisonPeriod)throw new Error("기준 기간과 비교 기간을 모두 선택해주세요.");if(a.baselinePeriod===a.comparisonPeriod)throw new Error("기준 기간과 비교 기간은 서로 달라야 합니다.");if(n=y.find(ge=>ge.value===a.baselinePeriod),j=y.find(ge=>ge.value===a.comparisonPeriod),!n||!j)throw new Error("선택된 기간 데이터를 찾을 수 없습니다.")}const E=Ne(),U={period_n_data:{start_date:j.startDate,end_date:j.endDate,metrics:E.comparison},period_n1_data:{start_date:n.startDate,end_date:n.endDate,metrics:E.baseline},metrics:["response_time","error_rate","throughput"],config:{use_recommended_tests:l.useRecommendedTests,include_comprehensive_analysis:l.includeComprehensiveAnalysis,confidence_level:l.confidenceLevel},test_types:l.useRecommendedTests?null:["t_test","mann_whitney","wilcoxon"],use_recommended_tests:l.useRecommendedTests,include_comprehensive_analysis:l.includeComprehensiveAnalysis,confidence_level:l.confidenceLevel};console.log("📤 분석 요청 데이터:",U);const Y=await fetch(`${be}/api/analysis/integrated-analysis`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!Y.ok){const ge=await Y.json().catch(()=>({}));throw new Error(`분석 요청 실패: ${Y.status} - ${ge.detail||Y.statusText}`)}const Te=await Y.json();console.log("✅ 분석 요청 성공:",Te),g(Te.task_id),O({status:"PENDING",progress:0,current_step:"분석 요청됨"}),K(Te.task_id)}catch(n){console.error("❌ 분석 시작 오류:",n),T(n.message)}finally{f(!1)}},K=n=>{console.log("🔄 폴링 시작:",n),D&&clearInterval(D),he(n);const j=setInterval(()=>{he(n)},2e3);H(j)},he=async n=>{try{const j=await fetch(`${be}/api/analysis/task-status/${n}`);if(!j.ok)throw new Error(`상태 조회 실패: ${j.status}`);const E=await j.json();console.log("📊 작업 상태 업데이트:",E),O(E),(E.status==="SUCCESS"||E.status==="FAILURE")&&(D&&(clearInterval(D),H(null)),E.status==="SUCCESS"&&E.result&&N(E.result))}catch(j){console.error("❌ 상태 조회 오류:",j)}},me=async()=>{if(i)try{console.log("🛑 분석 취소:",i),(await fetch(`${be}/api/analysis/task-status/${i}`,{method:"DELETE"})).ok&&(g(null),O(null),D&&(clearInterval(D),H(null)))}catch(n){console.error("❌ 분석 취소 오류:",n),T(n.message)}},Ne=()=>{const n=(j,E)=>{const U=[];for(let Y=0;Y<30;Y++)U.push({timestamp:new Date(Date.now()-(29-Y)*24*60*60*1e3).toISOString(),response_time:j+(Math.random()-.5)*E,error_rate:Math.max(0,j*.01+(Math.random()-.5)*E*.01),throughput:Math.max(0,j*10+(Math.random()-.5)*E*10)});return U};return{baseline:n(100,20),comparison:n(120,25)}};o.useEffect(()=>()=>{D&&clearInterval(D)},[D]);const De=n=>{switch(n){case"PENDING":return e.jsx(oe,{className:"h-4 w-4 text-yellow-500"});case"RUNNING":return e.jsx(te,{className:"h-4 w-4 text-blue-500 animate-spin"});case"SUCCESS":return e.jsx(ae,{className:"h-4 w-4 text-green-500"});case"FAILURE":return e.jsx(q,{className:"h-4 w-4 text-red-500"});default:return e.jsx(oe,{className:"h-4 w-4 text-gray-500"})}},Ee=n=>{switch(n){case"PENDING":return"bg-yellow-100 text-yellow-800";case"RUNNING":return"bg-blue-100 text-blue-800";case"SUCCESS":return"bg-green-100 text-green-800";case"FAILURE":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ds=s.startDate&&s.endDate&&(L&&_.baseline.startDate&&_.baseline.endDate&&_.comparison.startDate&&_.comparison.endDate||!L&&a.baselinePeriod&&a.comparisonPeriod&&a.baselinePeriod!==a.comparisonPeriod)&&!c,ms=s.startDate&&s.endDate&&!M;return e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"📊 통계 분석 설정"}),e.jsx("p",{className:"text-gray-600",children:"기간을 선택하고 통계 분석을 수행하세요"})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"분석 설정"]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"분석 기간 선택"]}),e.jsx(kt,{title:"분석 기간",description:"전체 분석을 수행할 날짜 범위를 선택하세요",startDate:s.startDate,endDate:s.endDate,onDateChange:z,disabled:c||i,className:"mb-4"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Js,{className:"h-4 w-4"}),"자동 기간 식별"]}),e.jsx(F,{onClick:A,disabled:!ms,variant:"outline",size:"sm",className:"flex items-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 animate-spin"}),"식별 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"h-4 w-4"}),"기간 식별"]})})]}),y.length>0&&e.jsxs(ce,{children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs(de,{children:[y.length,"개의 안정적인 기간이 식별되었습니다."]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{className:"text-base font-medium flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"기준 기간 (n-1)"]}),L?e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-xs text-gray-600",children:"시작 날짜"}),e.jsx(se,{type:"date",value:_.baseline.startDate,onChange:n=>d("baseline","startDate",n.target.value),disabled:c||i})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xs text-gray-600",children:"종료 날짜"}),e.jsx(se,{type:"date",value:_.baseline.endDate,onChange:n=>d("baseline","endDate",n.target.value),disabled:c||i})]})]})}):e.jsxs(X,{value:a.baselinePeriod,onValueChange:n=>b("baselinePeriod",n),disabled:c||i||y.length===0,children:[e.jsx(Q,{children:e.jsx(Z,{placeholder:"기준 기간을 선택하세요"})}),e.jsx(ee,{children:y.map(n=>{var j;return e.jsx(R,{value:n.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:n.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["안정성: ",((j=n.stability_score)==null?void 0:j.toFixed(2))||"N/A"," | 데이터: ",n.data_points||"N/A","개"]})]})},n.value)})})]}),a.baselinePeriod&&!L&&e.jsx(W,{variant:"outline",className:"text-xs",children:"기준 비교 대상"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{className:"text-base font-medium flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"비교 기간 (n)"]}),L?e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-xs text-gray-600",children:"시작 날짜"}),e.jsx(se,{type:"date",value:_.comparison.startDate,onChange:n=>d("comparison","startDate",n.target.value),disabled:c||i})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-xs text-gray-600",children:"종료 날짜"}),e.jsx(se,{type:"date",value:_.comparison.endDate,onChange:n=>d("comparison","endDate",n.target.value),disabled:c||i})]})]})}):e.jsxs(X,{value:a.comparisonPeriod,onValueChange:n=>b("comparisonPeriod",n),disabled:c||i||y.length===0,children:[e.jsx(Q,{children:e.jsx(Z,{placeholder:"비교 기간을 선택하세요"})}),e.jsx(ee,{children:y.map(n=>{var j;return e.jsx(R,{value:n.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:n.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["안정성: ",((j=n.stability_score)==null?void 0:j.toFixed(2))||"N/A"," | 데이터: ",n.data_points||"N/A","개"]})]})},n.value)})})]}),a.comparisonPeriod&&!L&&e.jsx(W,{variant:"outline",className:"text-xs",children:"분석 대상"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"수동 기간 설정"}),e.jsx("p",{className:"text-xs text-gray-600",children:"자동 식별된 기간 대신 직접 기간을 설정합니다"})]}),e.jsxs(X,{value:L?"manual":"auto",onValueChange:n=>p(n==="manual"),disabled:c||i,children:[e.jsx(Q,{className:"w-32",children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"auto",children:"자동"}),e.jsx(R,{value:"manual",children:"수동"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"분석 옵션"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"검정 방법"}),e.jsxs(X,{value:l.useRecommendedTests?"recommended":"custom",onValueChange:n=>r("useRecommendedTests",n==="recommended"),disabled:c||i,children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"recommended",children:"추천 검정 사용"}),e.jsx(R,{value:"custom",children:"사용자 정의 검정"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"포괄적 분석"}),e.jsxs(X,{value:l.includeComprehensiveAnalysis?"yes":"no",onValueChange:n=>r("includeComprehensiveAnalysis",n==="yes"),disabled:c||i,children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"yes",children:"포함"}),e.jsx(R,{value:"no",children:"제외"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"신뢰 수준"}),e.jsxs(X,{value:l.confidenceLevel.toString(),onValueChange:n=>r("confidenceLevel",parseFloat(n)),disabled:c||i,children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"0.90",children:"90%"}),e.jsx(R,{value:"0.95",children:"95%"}),e.jsx(R,{value:"0.99",children:"99%"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(F,{onClick:P,disabled:!ds,className:"flex items-center gap-2 px-6",size:"lg",children:c?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 animate-spin"}),"분석 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-4 w-4"}),"분석 시작"]})}),i&&e.jsxs(F,{variant:"outline",onClick:me,className:"flex items-center gap-2",size:"lg",children:[e.jsx(q,{className:"h-4 w-4"}),"취소"]})]}),I&&e.jsxs(ce,{variant:"destructive",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx(de,{children:I})]})]})]}),x&&e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"분석 진행 상황"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"작업 ID:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:i})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"상태:"}),e.jsx(W,{className:Ee(x.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[De(x.status),x.status]})})]}),x.progress!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"진행률:"}),e.jsxs("span",{className:"text-sm font-medium",children:[x.progress,"%"]})]}),e.jsx(is,{value:x.progress,className:"w-full"})]}),x.current_step&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"현재 단계:"}),e.jsx("span",{className:"text-sm font-medium",children:x.current_step})]}),x.error&&e.jsxs(ce,{variant:"destructive",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(de,{children:x.error})]})]})]}),h&&e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-green-500"}),"분석 결과"]})}),e.jsx(k,{children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("pre",{className:"text-sm overflow-auto max-h-96",children:JSON.stringify(h,null,2)})})})]})]})})};function At({className:s,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:w("w-full caption-bottom text-sm",s),...t})})}function It({className:s,...t}){return e.jsx("thead",{"data-slot":"table-header",className:w("[&_tr]:border-b",s),...t})}function Lt({className:s,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:w("[&_tr:last-child]:border-0",s),...t})}function He({className:s,...t}){return e.jsx("tr",{"data-slot":"table-row",className:w("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function ne({className:s,...t}){return e.jsx("th",{"data-slot":"table-head",className:w("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function le({className:s,...t}){return e.jsx("td",{"data-slot":"table-cell",className:w("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function Mt({...s}){return e.jsx(Is,{"data-slot":"dialog",...s})}function Ot({...s}){return e.jsx(Vs,{"data-slot":"dialog-portal",...s})}function Vt({className:s,...t}){return e.jsx(zs,{"data-slot":"dialog-overlay",className:w("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function zt({className:s,children:t,...a}){return e.jsxs(Ot,{"data-slot":"dialog-portal",children:[e.jsx(Vt,{}),e.jsxs(Ls,{"data-slot":"dialog-content",className:w("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a,children:[t,e.jsxs(Ms,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Xs,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function $t({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:w("flex flex-col gap-2 text-center sm:text-left",s),...t})}function Ut({className:s,...t}){return e.jsx(Os,{"data-slot":"dialog-title",className:w("text-lg leading-none font-semibold",s),...t})}const Ft="http://localhost:8000",Gt=()=>{const[s,t]=o.useState([]),[a,m]=o.useState(!1),[l,u]=o.useState(null),[c,f]=o.useState(null),[M,S]=o.useState(!1),[i,g]=o.useState({search:"",status:"all",dateRange:"all",testType:"all"}),[x,O]=o.useState({key:"analysisDate",direction:"desc"}),[I,T]=o.useState(1),[D]=o.useState(10),H=o.useCallback(async()=>{var r;try{m(!0),u(null),console.log("📊 분석 결과 데이터 가져오기 시작...");const d=await fetch(`${Ft}/api/analysis/results`);if(!d.ok)throw new Error(`분석 결과 조회 실패: ${d.status}`);const p=await d.json();t(p.results||[]),console.log("✅ 분석 결과 데이터 로드 완료:",((r=p.results)==null?void 0:r.length)||0)}catch(d){console.error("❌ 분석 결과 조회 오류:",d),u(d.message);const p=h();t(p)}finally{m(!1)}},[]),h=()=>{const r=[],d=["t_test","mann_whitney","wilcoxon","anova"],p=["pass","fail","warning"],A=["response_time","error_rate","throughput"];for(let P=1;P<=20;P++){const K={id:`analysis_${P}`,analysisDate:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),baselinePeriod:{startDate:"2024-01-01",endDate:"2024-01-07",dataPoints:Math.floor(Math.random()*1e3)+500},comparisonPeriod:{startDate:"2024-01-08",endDate:"2024-01-14",dataPoints:Math.floor(Math.random()*1e3)+500},metrics:A.slice(0,Math.floor(Math.random()*3)+1),testType:d[Math.floor(Math.random()*d.length)],status:p[Math.floor(Math.random()*p.length)],pValue:Math.random(),effectSize:Math.random()*2,confidenceLevel:.95,summary:`분석 ${P}의 요약 결과입니다. ${p[Math.floor(Math.random()*p.length)]} 상태입니다.`,details:{statisticalTests:{t_test:{pValue:Math.random(),significant:Math.random()>.05},mann_whitney:{pValue:Math.random(),significant:Math.random()>.05}},effectSizes:{cohens_d:Math.random()*2,cliffs_delta:Math.random()*2},anomalyScores:{z_score:Math.random()*3,anomaly_detection:Math.random()}}};r.push(K)}return r},N=fe.useMemo(()=>{let r=[...s];if(i.search){const d=i.search.toLowerCase();r=r.filter(p=>p.id.toLowerCase().includes(d)||p.summary.toLowerCase().includes(d)||p.metrics.some(A=>A.toLowerCase().includes(d)))}if(i.status!=="all"&&(r=r.filter(d=>d.status===i.status)),i.testType!=="all"&&(r=r.filter(d=>d.testType===i.testType)),i.dateRange!=="all"){const d=new Date,p=new Date;switch(i.dateRange){case"today":r=r.filter(K=>(p.setTime(new Date(K.analysisDate).getTime()),p.toDateString()===d.toDateString()));break;case"week":const A=new Date(d.getTime()-10080*60*1e3);r=r.filter(K=>new Date(K.analysisDate)>=A);break;case"month":const P=new Date(d.getTime()-720*60*60*1e3);r=r.filter(K=>new Date(K.analysisDate)>=P);break}}return r},[s,i]),y=fe.useMemo(()=>[...N].sort((d,p)=>{let A=d[x.key],P=p[x.key];return x.key==="analysisDate"&&(A=new Date(A).getTime(),P=new Date(P).getTime()),A<P?x.direction==="asc"?-1:1:A>P?x.direction==="asc"?1:-1:0}),[N,x]),re=fe.useMemo(()=>{const r=(I-1)*D,d=r+D;return y.slice(r,d)},[y,I,D]),L=r=>{O(d=>({key:r,direction:d.key===r&&d.direction==="asc"?"desc":"asc"}))},J=(r,d)=>{g(p=>({...p,[r]:d})),T(1)},_=r=>{f(r),S(!0)},V=r=>{switch(r){case"pass":return e.jsx(ae,{className:"h-4 w-4 text-green-500"});case"fail":return e.jsx(q,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(ue,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(oe,{className:"h-4 w-4 text-gray-500"})}},z=r=>{switch(r){case"pass":return"bg-green-100 text-green-800";case"fail":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};o.useEffect(()=>{H()},[H]);const b=fe.useMemo(()=>{const r=s.length,d=s.filter(P=>P.status==="pass").length,p=s.filter(P=>P.status==="fail").length,A=s.filter(P=>P.status==="warning").length;return{total:r,pass:d,fail:p,warning:A,passRate:r>0?(d/r*100).toFixed(1):0}},[s]);return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"📊 분석 결과 비교"}),e.jsx("p",{className:"text-gray-600",children:"통계 분석 결과를 확인하고 비교하세요"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"총 분석"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.total})]}),e.jsx(ye,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"통과"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.pass})]}),e.jsx(ae,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"실패"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.fail})]}),e.jsx(q,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"통과율"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[b.passRate,"%"]})]}),e.jsx(ze,{className:"h-8 w-8 text-blue-500"})]})})})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"h-5 w-5"}),"필터 및 검색"]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"검색"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(se,{placeholder:"분석 ID, 요약, 메트릭 검색...",value:i.search,onChange:r=>J("search",r.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"상태"}),e.jsxs(X,{value:i.status,onValueChange:r=>J("status",r),children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"all",children:"모든 상태"}),e.jsx(R,{value:"pass",children:"통과"}),e.jsx(R,{value:"fail",children:"실패"}),e.jsx(R,{value:"warning",children:"경고"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"날짜 범위"}),e.jsxs(X,{value:i.dateRange,onValueChange:r=>J("dateRange",r),children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"all",children:"전체 기간"}),e.jsx(R,{value:"today",children:"오늘"}),e.jsx(R,{value:"week",children:"최근 7일"}),e.jsx(R,{value:"month",children:"최근 30일"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{children:"테스트 타입"}),e.jsxs(X,{value:i.testType,onValueChange:r=>J("testType",r),children:[e.jsx(Q,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(R,{value:"all",children:"모든 타입"}),e.jsx(R,{value:"t_test",children:"T-Test"}),e.jsx(R,{value:"mann_whitney",children:"Mann-Whitney U"}),e.jsx(R,{value:"wilcoxon",children:"Wilcoxon"}),e.jsx(R,{value:"anova",children:"ANOVA"})]})]})]})]})})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"분석 결과 목록"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(F,{variant:"outline",size:"sm",onClick:H,disabled:a,children:[a?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsx($e,{className:"h-4 w-4"}),"새로고침"]})})]})}),e.jsx(k,{children:a?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(te,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"데이터 로딩 중..."})]}):l?e.jsxs(ce,{variant:"destructive",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx(de,{children:l})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(At,{children:[e.jsx(It,{children:e.jsxs(He,{children:[e.jsx(ne,{children:e.jsxs(F,{variant:"ghost",onClick:()=>L("id"),className:"flex items-center gap-1",children:["분석 ID",x.key==="id"&&(x.direction==="asc"?e.jsx(je,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"}))]})}),e.jsx(ne,{children:e.jsxs(F,{variant:"ghost",onClick:()=>L("analysisDate"),className:"flex items-center gap-1",children:["분석 날짜",x.key==="analysisDate"&&(x.direction==="asc"?e.jsx(je,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"}))]})}),e.jsx(ne,{children:"기간"}),e.jsx(ne,{children:"메트릭"}),e.jsx(ne,{children:"테스트 타입"}),e.jsx(ne,{children:e.jsxs(F,{variant:"ghost",onClick:()=>L("status"),className:"flex items-center gap-1",children:["상태",x.key==="status"&&(x.direction==="asc"?e.jsx(je,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"}))]})}),e.jsx(ne,{children:e.jsxs(F,{variant:"ghost",onClick:()=>L("pValue"),className:"flex items-center gap-1",children:["P-값",x.key==="pValue"&&(x.direction==="asc"?e.jsx(je,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"}))]})}),e.jsx(ne,{children:"작업"})]})}),e.jsx(Lt,{children:re.map(r=>e.jsxs(He,{children:[e.jsx(le,{className:"font-medium",children:r.id}),e.jsx(le,{children:new Date(r.analysisDate).toLocaleDateString()}),e.jsx(le,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["기준: ",r.baselinePeriod.startDate," ~ ",r.baselinePeriod.endDate]}),e.jsxs("div",{children:["비교: ",r.comparisonPeriod.startDate," ~ ",r.comparisonPeriod.endDate]})]})}),e.jsx(le,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:r.metrics.map(d=>e.jsx(W,{variant:"outline",className:"text-xs",children:d},d))})}),e.jsx(le,{children:e.jsx(W,{variant:"outline",children:r.testType})}),e.jsx(le,{children:e.jsx(W,{className:z(r.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[V(r.status),r.status]})})}),e.jsx(le,{children:e.jsx("span",{className:"text-sm",children:r.pValue.toFixed(4)})}),e.jsx(le,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(F,{variant:"outline",size:"sm",onClick:()=>_(r),children:[e.jsx(Fe,{className:"h-4 w-4"}),"상세보기"]})})})]},r.id))})]}),y.length>D&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[(I-1)*D+1," - ",Math.min(I*D,y.length)," / ",y.length,"개 결과"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>T(r=>Math.max(1,r-1)),disabled:I===1,children:"이전"}),e.jsxs("span",{className:"text-sm",children:[I," / ",Math.ceil(y.length/D)]}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>T(r=>Math.min(Math.ceil(y.length/D),r+1)),disabled:I===Math.ceil(y.length/D),children:"다음"})]})]})]})})]})]}),e.jsx(Mt,{open:M,onOpenChange:S,children:e.jsxs(zt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx($t,{children:e.jsxs(Ut,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"분석 결과 상세 보기"]})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{children:"기본 정보"})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"분석 ID"}),e.jsx("p",{className:"text-sm",children:c.id})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"분석 날짜"}),e.jsx("p",{className:"text-sm",children:new Date(c.analysisDate).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"상태"}),e.jsx(W,{className:z(c.status),children:e.jsxs("div",{className:"flex items-center gap-1",children:[V(c.status),c.status]})})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"신뢰 수준"}),e.jsxs("p",{className:"text-sm",children:[(c.confidenceLevel*100).toFixed(0),"%"]})]})]})})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{children:"분석 기간"})}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"기준 기간 (n-1)"}),e.jsxs("p",{className:"text-sm",children:[c.baselinePeriod.startDate," ~ ",c.baselinePeriod.endDate]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.baselinePeriod.dataPoints,"개 데이터 포인트"]})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"비교 기간 (n)"}),e.jsxs("p",{className:"text-sm",children:[c.comparisonPeriod.startDate," ~ ",c.comparisonPeriod.endDate]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.comparisonPeriod.dataPoints,"개 데이터 포인트"]})]})]})})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{children:"통계 분석 결과"})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"P-값"}),e.jsx("p",{className:"text-lg font-bold",children:c.pValue.toFixed(4)})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"효과 크기"}),e.jsx("p",{className:"text-lg font-bold",children:c.effectSize.toFixed(3)})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"테스트 타입"}),e.jsx(W,{variant:"outline",children:c.testType})]})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"요약"}),e.jsx("p",{className:"text-sm mt-1",children:c.summary})]})]})})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{children:"상세 통계"})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"통계 검정 결과"}),e.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(c.details.statisticalTests).map(([r,d])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:["P-값: ",d.pValue.toFixed(4)]}),e.jsx(W,{variant:d.significant?"default":"secondary",children:d.significant?"유의함":"유의하지 않음"})]})]},r))})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"효과 크기"}),e.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(c.details.effectSizes).map(([r,d])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:r}),e.jsx("span",{className:"text-sm",children:d.toFixed(3)})]},r))})]}),e.jsxs("div",{children:[e.jsx(v,{className:"text-sm font-medium",children:"이상치 점수"}),e.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(c.details.anomalyScores).map(([r,d])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:r}),e.jsx("span",{className:"text-sm",children:d.toFixed(3)})]},r))})]})]})})]})]})]})})]})};function Bt({className:s,...t}){return e.jsx($s,{"data-slot":"tabs",className:w("flex flex-col gap-2",s),...t})}function Wt({className:s,...t}){return e.jsx(Us,{"data-slot":"tabs-list",className:w("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function Ae({className:s,...t}){return e.jsx(Fs,{"data-slot":"tabs-trigger",className:w("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function Ie({className:s,...t}){return e.jsx(Gs,{"data-slot":"tabs-content",className:w("flex-1 outline-none",s),...t})}const Ht="http://localhost:8000",Kt=({analysisId:s,pegId:t,onBack:a})=>{const[m,l]=o.useState(null),[u,c]=o.useState([]),[f,M]=o.useState([]),[S,i]=o.useState(!1),[g,x]=o.useState(null),[O,I]=o.useState("chart"),T=o.useCallback(async()=>{try{i(!0),x(null),console.log("📊 상세 분석 데이터 가져오기 시작...",{analysisId:s,pegId:t});const h=await fetch(`${Ht}/api/analysis/${s}/detail/${t}`);if(!h.ok)throw new Error(`상세 분석 데이터 조회 실패: ${h.status}`);const N=await h.json();l(N.analysis),c(N.timeSeries||[]),M(N.anomalies||[]),console.log("✅ 상세 분석 데이터 로드 완료")}catch(h){console.error("❌ 상세 분석 데이터 조회 오류:",h),x(h.message);const N=D();l(N.analysis),c(N.timeSeries),M(N.anomalies)}finally{i(!1)}},[s,t]),D=()=>{const h=new Date,N=[],y=[];for(let L=29;L>=0;L--){const J=new Date(h.getTime()-L*24*60*60*1e3),_=J.toISOString(),V=100+Math.random()*50+(Math.random()>.9?200:0),z=Math.random()*5+(Math.random()>.95?15:0),b=1e3+Math.random()*200+(Math.random()>.9?-300:0),r={timestamp:_,date:J.toISOString().split("T")[0],response_time:Math.round(V*100)/100,error_rate:Math.round(z*100)/100,throughput:Math.round(b)};N.push(r),(V>200||z>10||b<800)&&y.push({timestamp:_,type:V>200?"performance":z>10?"quality":"capacity",severity:V>250||z>15?"high":"medium",metric:V>200?"response_time":z>10?"error_rate":"throughput",value:V>200?V:z>10?z:b,description:V>200?"응답 시간 급증":z>10?"에러율 증가":"처리량 저하"})}return{analysis:{id:s,pegId:t,analysisDate:h.toISOString(),summary:{totalAnomalies:y.length,highSeverityAnomalies:y.filter(L=>L.severity==="high").length,overallStatus:y.length>5?"warning":"pass"}},timeSeries:N,anomalies:y}},H=h=>{switch(h){case"pass":return e.jsx(ae,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(ue,{className:"h-4 w-4 text-yellow-500"});case"fail":return e.jsx(q,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ge,{className:"h-4 w-4 text-gray-500"})}};return o.useEffect(()=>{s&&t&&T()},[s,t,T]),S?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(te,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"상세 분석 데이터 로딩 중..."})]}):g?e.jsxs(ce,{variant:"destructive",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx(de,{children:g})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(F,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(et,{className:"h-4 w-4 mr-2"}),"뒤로"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"상세 분석 뷰"}),e.jsxs("p",{className:"text-gray-600",children:["분석 ID: ",s," | PEG ID: ",t]})]})]}),e.jsxs(F,{variant:"outline",size:"sm",onClick:T,disabled:S,children:[S?e.jsx(te,{className:"h-4 w-4 animate-spin"}):e.jsx($e,{className:"h-4 w-4"}),"새로고침"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"총 이상치"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.summary.totalAnomalies})]}),e.jsx(ue,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"고심각도"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m.summary.highSeverityAnomalies})]}),e.jsx(q,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(C,{children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"전체 상태"}),e.jsx(W,{className:m.summary.overallStatus==="pass"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:e.jsxs("div",{className:"flex items-center gap-1",children:[H(m.summary.overallStatus),m.summary.overallStatus]})})]}),e.jsx(Ve,{className:"h-8 w-8 text-gray-500"})]})})})]}),e.jsxs(Bt,{value:O,onValueChange:I,children:[e.jsxs(Wt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ae,{value:"chart",children:"시계열 차트"}),e.jsx(Ae,{value:"anomalies",children:"이상치 분석"}),e.jsx(Ae,{value:"statistics",children:"통계 정보"})]}),e.jsx(Ie,{value:"chart",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5"}),"시계열 분석 차트"]})}),e.jsx(k,{children:u.length===0?e.jsxs("div",{className:"flex items-center justify-center h-64 text-gray-500",children:[e.jsx(Ge,{className:"h-8 w-8 mr-2"}),"시계열 데이터가 없습니다."]}):e.jsx(st,{width:"100%",height:400,children:e.jsxs(tt,{data:u,children:[e.jsx(at,{strokeDasharray:"3 3"}),e.jsx(rt,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),e.jsx(Be,{yAxisId:"left"}),e.jsx(Be,{yAxisId:"right",orientation:"right"}),e.jsx(nt,{}),e.jsx(lt,{}),e.jsx(Ce,{yAxisId:"left",type:"monotone",dataKey:"response_time",stroke:"#8884d8",strokeWidth:2,dot:{r:3},name:"응답 시간 (ms)"}),e.jsx(Ce,{yAxisId:"right",type:"monotone",dataKey:"error_rate",stroke:"#ff7300",strokeWidth:2,dot:{r:3},name:"에러율 (%)"}),e.jsx(Ce,{yAxisId:"left",type:"monotone",dataKey:"throughput",stroke:"#82ca9d",strokeWidth:2,dot:{r:3},name:"처리량"}),e.jsx(ke,{y:200,stroke:"#ff7300",strokeDasharray:"3 3"}),e.jsx(ke,{y:10,stroke:"#ff0000",strokeDasharray:"3 3"}),e.jsx(ke,{y:800,stroke:"#ff0000",strokeDasharray:"3 3"})]})})})]})}),e.jsx(Ie,{value:"anomalies",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"이상치 분석"]})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ae,{className:"h-8 w-8 mx-auto mb-2"}),"이상치가 없습니다."]}):f.map((h,N)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W,{className:h.severity==="high"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:h.severity}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(h.timestamp).toLocaleString()," | ",h.metric,": ",h.value]})]})]}),e.jsx(W,{variant:"outline",children:h.type})]},N))})})]})}),e.jsx(Ie,{value:"statistics",className:"space-y-4",children:e.jsxs(C,{children:[e.jsx(G,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5"}),"통계 정보"]})}),e.jsx(k,{children:m&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{className:"text-lg",children:"분석 정보"})}),e.jsxs(k,{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"분석 ID:"})," ",m.id]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"PEG ID:"})," ",m.pegId]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"분석 날짜:"})," ",new Date(m.analysisDate).toLocaleString()]})]})]}),e.jsxs(C,{children:[e.jsx(G,{children:e.jsx(B,{className:"text-lg",children:"요약 통계"})}),e.jsxs(k,{children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"총 이상치:"})," ",m.summary.totalAnomalies,"개"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"고심각도:"})," ",m.summary.highSeverityAnomalies,"개"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"전체 상태:"}),e.jsx(W,{className:m.summary.overallStatus==="pass"?"bg-green-100 text-green-800 ml-2":"bg-yellow-100 text-yellow-800 ml-2",children:m.summary.overallStatus})]})]})]})]})})})]})})]})]})},Ke=typeof window<"u"?window.__RUNTIME_CONFIG__||{}:{},Ye=Ke.BACKEND_BASE_URL||Ke.VITE_API_BASE_URL,Yt=Ye&&String(Ye).trim()||"http://localhost:8000",Ue=gs.create({baseURL:Yt,timeout:15e3});Ue.interceptors.response.use(s=>s,s=>{var a,m;const t=((m=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:m.detail)||(s==null?void 0:s.message)||"알 수 없는 오류가 발생했습니다.";return ps.error(`요청 실패: ${t}`),Promise.reject(s)});const ca=async(s,t,a="default")=>{console.log("🤖 LLM 분석 요청 시작:",{dbConfig:{...s,password:"[HIDDEN]"},analysisParams:t});const m=await Ue.post("/api/analysis/trigger-llm-analysis",{user_id:a,db_config:s,...t});return console.log("✅ LLM 분석 트리거 성공:",m.data),m.data},da=async s=>{console.log("📊 LLM 분석 결과 조회:",s);const t=await Ue.get(`/api/analysis/llm-analysis/${s}`);return console.log("✅ LLM 분석 결과 조회 성공"),t.data},Se="kpi-dashboard-preferences",_e=()=>{try{const s="__localStorage_test__";return localStorage.setItem(s,s),localStorage.removeItem(s),!0}catch(s){return console.warn("⚠️ localStorage 사용 불가:",s.message),!1}},qt=s=>{if(!_e())throw new Error("localStorage를 사용할 수 없습니다");try{const t={settings:s,lastSaved:new Date().toISOString(),version:1};return localStorage.setItem(Se,JSON.stringify(t)),console.log("💾 localStorage에 설정 저장 완료:",t.lastSaved),!0}catch(t){throw console.error("❌ localStorage 저장 실패:",t),new Error(`설정 저장 실패: ${t.message}`)}},qe=()=>{if(!_e())return console.warn("⚠️ localStorage 사용 불가 - 기본값 사용"),null;try{const s=localStorage.getItem(Se);if(!s)return console.log("📂 localStorage에 저장된 설정 없음"),null;const t=JSON.parse(s);return console.log("📂 localStorage에서 설정 로드 완료:",t.lastSaved),t.settings}catch(s){console.error("❌ localStorage 로드 실패:",s);try{localStorage.removeItem(Se)}catch(t){console.error("❌ 손상된 데이터 제거 실패:",t)}throw new Error(`설정 로드 실패: ${s.message}`)}},Je=(s,t)=>{if(!s)return t;try{const a={...t};return Object.keys(t).forEach(m=>{s[m]&&typeof s[m]=="object"&&(a[m]={...t[m],...s[m]})}),console.log("🔄 설정 병합 완료"),a}catch(a){return console.error("❌ 설정 병합 실패:",a),t}},Jt=()=>{try{if(typeof window<"u"&&window.__RUNTIME_CONFIG__)return window.__RUNTIME_CONFIG__}catch(s){console.warn("⚠️ 런타임 설정 접근 실패:",s)}return{}},pe=Jt(),ie={dashboardSettings:{selectedPegs:[],defaultNe:"",defaultCellId:"",autoRefreshInterval:30,chartStyle:"line",showLegend:!0,showGrid:!0,theme:"light",defaultTimeRange:30,timeUnit:"minutes",time1Start:null,time1End:null,time2Start:null,time2End:null,enableTimeComparison:!1},statisticsSettings:{defaultDateRange:7,comparisonEnabled:!0,showDelta:!0,showRsd:!0,defaultPegs:["availability","rrc"],chartType:"bar",decimalPlaces:2,autoAnalysis:!1},databaseSettings:{host:pe.DB_HOST||"postgres",port:parseInt(pe.DB_PORT,10)||5432,user:pe.DB_USER||"postgres",password:pe.DB_PASSWORD||"postgres",dbname:pe.DB_NAME||"netperf",table:"summary"},notificationSettings:{enableToasts:!0,enableSounds:!1,saveNotification:!0,errorNotification:!0},generalSettings:{language:"ko",timezone:"Asia/Seoul",dateFormat:"YYYY-MM-DD",numberFormat:"comma"},pegConfigurations:[],statisticsConfigurations:[]},Me={settings:ie,loading:!1,saving:!1,error:null,lastSaved:null,hasUnsavedChanges:!1,userId:"default",initialized:!1,lastModified:null,version:1,localStorageAvailable:!0,syncStatus:"idle",conflictAnalysis:null,conflictResolution:null,hasActiveConflict:!1,lastConflictCheck:null,backgroundSync:{enabled:!1,strategy:"hybrid",state:"idle",lastSyncTime:null,retryCount:0,isOnline:!0,networkInfo:null}},Xt=(s,t)=>{try{if(!s||typeof s!="object")return console.error("❌ preferenceReducer: 잘못된 state:",s),Me;switch(t.type){case"SET_LOADING":return{...s,loading:t.payload};case"SET_SAVING":return{...s,saving:t.payload};case"SET_ERROR":return{...s,error:t.payload};case"SET_SETTINGS":return{...s,settings:t.payload,hasUnsavedChanges:!0,lastModified:new Date};case"UPDATE_SETTING":const{section:a,key:m,value:l}=t.payload;return{...s,settings:{...s.settings,[a]:{...s.settings[a],[m]:l}},hasUnsavedChanges:!0,lastModified:new Date};case"SET_INITIALIZED":return{...s,initialized:t.payload};case"SET_LAST_SAVED":return{...s,lastSaved:t.payload};case"SET_HAS_UNSAVED_CHANGES":return{...s,hasUnsavedChanges:t.payload};case"SET_LOCAL_STORAGE_AVAILABLE":return{...s,localStorageAvailable:t.payload};default:return console.warn("⚠️ preferenceReducer: 알 수 없는 액션:",t.type),s}}catch(a){return console.error("❌ preferenceReducer 오류:",a),Me}},os=o.createContext(null),Zt=({children:s})=>{const[t,a]=o.useReducer(Xt,Me),m=o.useRef(null),l=o.useRef(!1);o.useEffect(()=>(console.log("🔄 PreferenceProvider 초기화 시작"),l.current=!0,(async()=>{try{const g=_e();if(a({type:"SET_LOCAL_STORAGE_AVAILABLE",payload:g}),await new Promise(x=>setTimeout(x,100)),!l.current)return;if(g)try{console.log("📂 초기화 시 설정 로드 시작...");const x=qe();if(x){const O=Je(x,ie);a({type:"SET_SETTINGS",payload:O}),console.log("✅ 초기화 시 설정 로드 완료")}else console.log("📂 저장된 설정 없음 - 기본값 사용")}catch(x){console.warn("⚠️ 초기화 시 설정 로드 실패, 기본값 사용:",x.message)}else console.log("⚠️ localStorage 사용 불가 - 기본값 사용");console.log("✅ PreferenceProvider 초기화 완료"),a({type:"SET_INITIALIZED",payload:!0})}catch(g){console.error("❌ PreferenceProvider 초기화 오류:",g),a({type:"SET_ERROR",payload:g.message})}})(),()=>{l.current=!1,m.current&&clearTimeout(m.current)}),[]);const u=o.useCallback(async()=>{try{return console.log("💾 설정 저장 시작..."),a({type:"SET_SAVING",payload:!0}),a({type:"SET_ERROR",payload:null}),qt(t.settings),a({type:"SET_LAST_SAVED",payload:new Date}),a({type:"SET_HAS_UNSAVED_CHANGES",payload:!1}),console.log("✅ 설정 저장 완료"),{success:!0}}catch(i){return console.error("❌ 설정 저장 실패:",i),a({type:"SET_ERROR",payload:i.message}),{success:!1,error:i.message}}finally{a({type:"SET_SAVING",payload:!1})}},[t.settings]),c=o.useCallback(async()=>{try{console.log("📂 설정 로드 시작..."),a({type:"SET_LOADING",payload:!0}),a({type:"SET_ERROR",payload:null});const i=await qe(),g=Je(i,ie);return a({type:"SET_SETTINGS",payload:g}),a({type:"SET_HAS_UNSAVED_CHANGES",payload:!1}),console.log("✅ 설정 로드 완료"),{success:!0,settings:g}}catch(i){return console.error("❌ 설정 로드 실패:",i),a({type:"SET_ERROR",payload:i.message}),a({type:"SET_SETTINGS",payload:ie}),{success:!1,error:i.message,settings:ie}}finally{a({type:"SET_LOADING",payload:!1})}},[]),f=o.useCallback((i,g,x)=>{a({type:"UPDATE_SETTING",payload:{section:i,key:g,value:x}})},[]),M=o.useCallback(async(i=["dashboardSettings","statisticsSettings","databaseSettings"])=>{try{console.log("🔄 설정 초기화 시작...",i),a({type:"SET_LOADING",payload:!0}),a({type:"SET_ERROR",payload:null});const g={...t.settings};if(i.forEach(x=>{ie[x]&&(g[x]={...ie[x]})}),a({type:"SET_SETTINGS",payload:g}),a({type:"SET_HAS_UNSAVED_CHANGES",payload:!0}),_e())try{localStorage.removeItem(Se),console.log("🗑️ localStorage에서 설정 제거 완료")}catch(x){console.warn("⚠️ localStorage 제거 실패:",x.message)}return console.log("✅ 설정 초기화 완료"),{success:!0,resetSections:i}}catch(g){return console.error("❌ 설정 초기화 실패:",g),a({type:"SET_ERROR",payload:g.message}),{success:!1,error:g.message}}finally{a({type:"SET_LOADING",payload:!1})}},[t.settings]),S={state:t,dispatch:a,saveSettings:u,loadSettings:c,updateSetting:f,resetSettings:M};return e.jsx(os.Provider,{value:S,children:s})},ma=()=>{const s=o.useContext(os);return s||(console.warn("⚠️ usePreference: PreferenceProvider 외부에서 사용됨 - 기본값 반환"),{state:{loading:!1,saving:!1,error:null,settings:{dashboardSettings:{},statisticsSettings:{},databaseSettings:{},notificationSettings:{},generalSettings:{},pegConfigurations:[],statisticsConfigurations:[]},initialized:!1,hasUnsavedChanges:!1,userId:"default",version:1},settings:{dashboardSettings:{},statisticsSettings:{},databaseSettings:{},notificationSettings:{},generalSettings:{},pegConfigurations:[],statisticsConfigurations:[]},dispatch:()=>{},saveSettings:()=>Promise.resolve(),loadSettings:()=>Promise.resolve(),resetSettings:()=>{},updateSettings:()=>{},getSetting:()=>null,setSetting:()=>{},hasUnsavedChanges:!1,isLoading:!1,isSaving:!1,error:null,saving:!1,lastSaved:null,saveImmediately:()=>Promise.resolve()})};class Qt extends fe.Component{constructor(a){super(a);Re(this,"handleRetry",()=>{console.log("🔄 앱 재시도 중..."),this.setState(a=>({hasError:!1,error:null,errorInfo:null,retryCount:a.retryCount+1}))});Re(this,"handleReload",()=>{console.log("🔄 페이지 새로고침 중..."),window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,m){var c,f,M,S;console.error("🚨 ErrorBoundary에서 에러 발생:",a),console.error("🚨 에러 메시지:",a.message),console.error("🚨 에러 스택:",a.stack),console.error("🚨 에러 정보:",m),console.error("🚨 컴포넌트 스택:",m.componentStack),console.error("🚨🚨🚨 === ERROR SUMMARY === 🚨🚨🚨"),console.error(`📝 Error Type: ${a.name}`),console.error(`📝 Error Message: ${a.message}`),console.error(`📝 First Stack Line: ${((f=(c=a.stack)==null?void 0:c.split(`
`))==null?void 0:f[1])||"N/A"}`),console.error("🚨🚨🚨 =================== 🚨🚨🚨"),console.error("🚨 에러 객체 전체:",{name:a.name,message:a.message,stack:a.stack,cause:a.cause,fileName:a.fileName,lineNumber:a.lineNumber,columnNumber:a.columnNumber}),console.error("🚨 에러 객체 모든 속성:");for(const i in a)try{console.error(`  ${i}:`,a[i])}catch{console.error(`  ${i}: [접근 불가]`)}console.error("🚨 에러 객체 프로토타입 체인:");let l=a,u=0;for(;l&&u<5;)console.error(`  Level ${u}:`,((S=(M=Object.getPrototypeOf(l))==null?void 0:M.constructor)==null?void 0:S.name)||"Unknown"),l=Object.getPrototypeOf(l),u++;a.name==="ReferenceError"&&(console.error("🔍 ReferenceError 상세 분석:"),console.error("  - 변수/함수가 정의되지 않았거나 접근할 수 없음"),console.error("  - 모듈 import 순서 문제 가능성"),console.error("  - 호이스팅 문제 가능성")),a.name==="TypeError"&&(console.error("🔍 TypeError 상세 분석:"),console.error("  - 객체가 null/undefined인데 속성에 접근 시도"),console.error("  - 함수가 아닌 것을 함수로 호출"),console.error("  - 잘못된 타입의 값 사용")),a.message.includes("Cannot access")&&(console.error("🔍 순환참조 또는 초기화 순서 문제로 추정됩니다."),console.error("🔍 해결 방안: 모듈 import 순서 확인, 지연 초기화 적용")),a.message.includes("before initialization")&&(console.error("🔍 변수/함수 초기화 순서 문제로 추정됩니다."),console.error("🔍 해결 방안: 함수 선언을 상단으로 이동, 호이스팅 확인")),a.message.includes("is not a function")&&(console.error("🔍 함수 호출 문제로 추정됩니다."),console.error("🔍 해결 방안: 함수 존재 여부 확인, import 확인")),console.error("🔍 현재 URL:",window.location.href),console.error("🔍 User Agent:",navigator.userAgent),console.error("🔍 현재 시간:",new Date().toISOString()),typeof window<"u"&&console.error("🔍 window 객체 상태:",{hasReact:!!window.React,hasReactDOM:!!window.ReactDOM,hasPreferenceContext:!!window.__PREFERENCE_CONTEXT_DEBUG__,runtimeConfig:window.__RUNTIME_CONFIG__}),this.setState({error:a,errorInfo:m})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"앱 초기화 중 문제가 발생했습니다"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"순환참조나 초기화 오류로 인해 앱을 로드할 수 없습니다. 아래 버튼을 클릭하여 다시 시도해주세요."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["다시 시도 (",this.state.retryCount+1,"번째)"]}),e.jsx("button",{onClick:this.handleReload,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"페이지 새로고침"})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[e.jsx("p",{children:"문제가 지속되면 브라우저 캐시를 정리해보세요."}),e.jsx("p",{children:"Chrome: Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)"})]})]})})}):this.props.children}}function ea(){const[s,t]=o.useState("dashboard"),[a,m]=o.useState(!1);if(o.useEffect(()=>{const u=setTimeout(()=>{var c,f;console.log("🔄 App 초기화 완료"),typeof window<"u"&&console.log("🔍 React 상태 확인:",{hasReact:!!window.React,hasReactDOM:!!window.ReactDOM,hasStrictMode:!!((c=window.React)!=null&&c.StrictMode),hasCreateRoot:!!((f=window.ReactDOM)!=null&&f.createRoot),hasPreferenceContext:!!window.hasPreferenceContext}),m(!0)},500);return()=>clearTimeout(u)},[]),!a)return e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"앱 초기화 중..."})]});const l=()=>s==="dashboard"?e.jsx(yt,{}):s==="statistics"?e.jsx(vt,{}):s==="preference"?e.jsx(Nt,{}):s==="results"?e.jsx(bt,{}):s==="llm-analysis"?e.jsx(wt,{}):s==="analysis-workflow"?e.jsx(Tt,{}):s==="analysis-setup"?e.jsx(Pt,{}):s==="compare-result"?e.jsx(Gt,{}):s==="detailed-analysis"?e.jsx(Kt,{analysisId:"sample-001",pegId:"peg-001",onBack:()=>t("compare-result")}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"🎉 KPI Dashboard - 11단계 진행 중!"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"✅ Layout + PreferenceProvider + Dashboard + Statistics + PreferenceManager + ResultsList + LLMAnalysisManager + AnalysisWorkflow 조합 테스트"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["현재 선택된 메뉴: ",e.jsx("strong",{children:s})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("p",{className:"text-green-800",children:[e.jsx("strong",{children:"안정성 테스트 완료!"})," 기본 구조가 정상적으로 작동하고 있습니다."]})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:e.jsx("p",{className:"text-blue-800 text-sm",children:"모든 주요 컴포넌트가 활성화되었습니다! 🚀"})})]})]})});return e.jsx(Qt,{children:e.jsx(Zt,{children:e.jsx(St,{activeMenu:s,setActiveMenu:t,children:l()})})})}const sa=({...s})=>{const{theme:t="system"}=fs();return e.jsx(js,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...s})};if(typeof window<"u")try{window.React={StrictMode:o.StrictMode},window.ReactDOM={createRoot:Qe.createRoot},window.hasReact=!0,window.hasReactDOM=!0,console.log("🔧 React 전역 등록 완료")}catch(s){console.error("❌ React 전역 등록 실패:",s)}const ta=async()=>{try{console.log("🔍 Web Vitals 측정 시작..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",async()=>{await Xe()}):await Xe(),setTimeout(async()=>{try{const{generatePerformanceReport:s}=await $(async()=>{const{generatePerformanceReport:t}=await import("./webVitals-Djrzh1kO.js");return{generatePerformanceReport:t}},__vite__mapDeps([19,1,2,4,7,6]));s()}catch(s){console.warn("⚠️ 성능 리포트 생성 실패:",s)}},5e3)}catch(s){console.warn("⚠️ Web Vitals 초기화 실패:",s)}},Xe=async()=>{try{const{measureWebVitals:s}=await $(async()=>{const{measureWebVitals:t}=await import("./webVitals-Djrzh1kO.js");return{measureWebVitals:t}},__vite__mapDeps([19,1,2,4,7,6]));await s()}catch(s){console.warn("⚠️ Web Vitals 측정 실패:",s)}};typeof window<"u"&&setTimeout(ta,100);const Ze=()=>{try{console.log("🔄 React 앱 렌더링 시작");const s=document.getElementById("root");if(!s){console.error("❌ root 엘리먼트를 찾을 수 없습니다");return}console.log("✅ root 엘리먼트 발견:",s);const t=Qe.createRoot(s);console.log("✅ React Root 생성 완료"),t.render(e.jsxs(e.Fragment,{children:[e.jsx(ea,{}),e.jsx(sa,{position:"top-right",richColors:!0})]})),console.log("✅ React 앱 렌더링 완료")}catch(s){console.error("❌ React 앱 렌더링 실패:",s);const t=document.getElementById("root");t&&(t.innerHTML=`
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
          <div style="text-align: center; padding: 20px;">
            <h2>앱 초기화 중 문제가 발생했습니다</h2>
            <p>페이지를 새로고침해주세요.</p>
            <button onclick="window.location.reload()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
              새로고침
            </button>
          </div>
        </div>
      `)}},cs=()=>{try{console.log("✅ 앱 초기화 시작"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(Ze,100)}):setTimeout(Ze,100)}catch(s){console.error("❌ startApp 실행 중 오류:",s),setTimeout(cs,500)}};cs();export{ce as A,W as B,C,Mt as D,da as E,kt as F,ma as G,se as I,v as L,is as P,X as S,Bt as T,$ as _,Ue as a,G as b,B as c,k as d,Q as e,Z as f,ee as g,R as h,F as i,zt as j,$t as k,Ut as l,Wt as m,Ae as n,Ie as o,_t as p,de as q,w as r,ct as s,At as t,It as u,He as v,ne as w,Lt as x,le as y,ca as z};
