const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard.optimized-BpbU57A4.js","assets/vendor-CPBPwzYD.js","assets/ui-vendor-nq4IHmv4.js","assets/utils-vendor-DrCDvq1f.js","assets/icon-vendor-DwJrfwQP.js","assets/chart-vendor-BCXW5yoB.js","assets/Statistics-DtONlEr1.js","assets/scroll-area-DQuTYI96.js","assets/AdvancedChart-BZzIsTNp.js","assets/BasicComparison-udRy6JK-.js","assets/ComparisonChart-_b3qqr6-.js","assets/PreferenceManager-Bvj0Wioa.js","assets/ResultsList-DduVdPq4.js","assets/ResultDetail-BxIZv_v-.js","assets/LLMAnalysisManager-CA0e_Itt.js"])))=>i.map(i=>d[i]);
import{a1 as He,r as n,M as e,a2 as Ye,a3 as R,a4 as X,a5 as Xe,a6 as Qe,a7 as Ze}from"./vendor-CPBPwzYD.js";import{S as Pe,b as Ke,R as et,C as tt,d as st,T as at,a as rt,O as nt,e as it,f as ot,g as lt,h as ct,i as dt,j as ut,I as mt,V as gt,k as pt,l as xt,m as ht,n as ft,o as vt,p as bt,q as jt,r as yt,s as Nt,t as St,v as wt,w as _t,x as Ct,y as kt,A as Et,z as Pt,B as It,D as Rt,E as Tt,F as Dt}from"./ui-vendor-nq4IHmv4.js";import{f as Lt,D as be}from"./utils-vendor-DrCDvq1f.js";import{C as Ot,D as At,T as $t,B as zt,S as Ie,X as Ft,U as Re,P as Vt,a as ge,b as Mt,c as Te,d as pe,e as Y,f as je,g as Bt,h as ne,i as M,R as De,F as Ut,j as Gt,k as qt}from"./icon-vendor-DwJrfwQP.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(c){if(c.ep)return;c.ep=!0;const i=a(c);fetch(c.href,i)}})();const Jt="modulepreload",Wt=function(t){return"/"+t},Se={},L=function(s,a,r){let c=Promise.resolve();if(a&&a.length>0){let u=function(f){return Promise.all(f.map(v=>Promise.resolve(v).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),b=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));c=u(a.map(f=>{if(f=Wt(f),f in Se)return;Se[f]=!0;const v=f.endsWith(".css"),h=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${h}`))return;const d=document.createElement("link");if(d.rel=v?"stylesheet":Jt,v||(d.as="script"),d.crossOrigin="",d.href=f,b&&d.setAttribute("nonce",b),document.head.appendChild(d),v)return new Promise((j,S)=>{d.addEventListener("load",j),d.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(u){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=u,window.dispatchEvent(x),!x.defaultPrevented)throw u}return c.then(u=>{for(const x of u||[])x.status==="rejected"&&i(x.reason);return s().catch(i)})};function N(...t){return He(Lt(t))}const Ht=be("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),I=n.forwardRef(function({className:s,variant:a,size:r,asChild:c=!1,...i},u){const x=c?Pe:"button";return e.jsx(x,{ref:u,"data-slot":"button",className:N(Ht({variant:a,size:r,className:s})),...i})});function F({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:N("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function J({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:N("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function W({className:t,...s}){return e.jsx("div",{"data-slot":"card-title",className:N("leading-none font-semibold",t),...s})}function ae({className:t,...s}){return e.jsx("div",{"data-slot":"card-description",className:N("text-muted-foreground text-sm",t),...s})}function V({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:N("px-6",t),...s})}const Yt=n.lazy(()=>L(()=>import("./Dashboard.optimized-BpbU57A4.js"),__vite__mapDeps([0,1,2,3,4,5]))),Xt=n.lazy(()=>L(()=>import("./Statistics-DtONlEr1.js"),__vite__mapDeps([6,1,2,3,7,8,4,5,9,10]))),Qt=n.lazy(()=>L(()=>import("./PreferenceManager-Bvj0Wioa.js"),__vite__mapDeps([11,1,2,3,7,4]))),Zt=n.lazy(()=>L(()=>import("./ResultsList-DduVdPq4.js"),__vite__mapDeps([12,1,2,3,4,13,7,5]))),Kt=n.lazy(()=>L(()=>import("./LLMAnalysisManager-CA0e_Itt.js"),__vite__mapDeps([14,1,2,3,4])));n.lazy(()=>L(()=>import("./AdvancedChart-BZzIsTNp.js"),__vite__mapDeps([8,1,2,3,4,5])));n.lazy(()=>L(()=>import("./ComparisonChart-_b3qqr6-.js"),__vite__mapDeps([10,1,2,3,4,5])));n.lazy(()=>L(()=>import("./BasicComparison-udRy6JK-.js"),__vite__mapDeps([9,1,2,3,7,4,10,5])));n.lazy(()=>L(()=>import("./ResultDetail-BxIZv_v-.js"),__vite__mapDeps([13,1,2,3,7,4,5])));const ve=()=>L(()=>import("./Dashboard.optimized-BpbU57A4.js"),__vite__mapDeps([0,1,2,3,4,5])),Le=()=>L(()=>import("./Statistics-DtONlEr1.js"),__vite__mapDeps([6,1,2,3,7,8,4,5,9,10])),Oe=()=>L(()=>import("./PreferenceManager-Bvj0Wioa.js"),__vite__mapDeps([11,1,2,3,7,4])),Ae=()=>L(()=>import("./ResultsList-DduVdPq4.js"),__vite__mapDeps([12,1,2,3,4,13,7,5])),es=()=>L(()=>import("./LLMAnalysisManager-CA0e_Itt.js"),__vite__mapDeps([14,1,2,3,4])),ts=()=>L(()=>import("./AdvancedChart-BZzIsTNp.js"),__vite__mapDeps([8,1,2,3,4,5])),ss=()=>L(()=>import("./ComparisonChart-_b3qqr6-.js"),__vite__mapDeps([10,1,2,3,4,5])),as=()=>{if("connection"in navigator){const s=navigator.connection.effectiveType;console.log(`🌐 네트워크 속도: ${s}`),s==="4g"||s==="3g"?(console.log("🚀 빠른 네트워크 감지 - 컴포넌트 프리로딩 시작"),setTimeout(()=>{ve().catch(console.warn),Le().catch(console.warn)},1e3),setTimeout(()=>{Oe().catch(console.warn),Ae().catch(console.warn)},2e3),setTimeout(()=>{ts().catch(console.warn),ss().catch(console.warn)},3e3)):console.log("📶 느린 네트워크 - 필요시에만 로드")}else console.log("📶 네트워크 정보 불가 - 기본 프리로딩"),setTimeout(()=>{ve().catch(console.warn)},2e3)},ie=({name:t="컴포넌트"})=>e.jsxs("div",{className:"flex items-center justify-center min-h-[200px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[t," 로딩 중..."]})]}),we=({...t})=>e.jsx(n.Suspense,{fallback:e.jsx(ie,{name:"Dashboard"}),children:e.jsx(Yt,{...t})}),rs=({...t})=>e.jsx(n.Suspense,{fallback:e.jsx(ie,{name:"Statistics"}),children:e.jsx(Xt,{...t})}),ns=({...t})=>e.jsx(n.Suspense,{fallback:e.jsx(ie,{name:"Preference"}),children:e.jsx(Qt,{...t})}),is=({...t})=>e.jsx(n.Suspense,{fallback:e.jsx(ie,{name:"분석 결과"}),children:e.jsx(Zt,{...t})}),os=({...t})=>e.jsx(n.Suspense,{fallback:e.jsx(ie,{name:"LLM 분석"}),children:e.jsx(Kt,{...t})}),ls=({children:t,activeMenu:s,setActiveMenu:a})=>{const r=[{id:"dashboard",label:"Dashboard",icon:Ot,preload:ve},{id:"results",label:"분석 결과",icon:At,preload:Ae},{id:"statistics",label:"Statistics",icon:$t,preload:Le},{id:"llm-analysis",label:"LLM 분석",icon:zt,preload:es},{id:"preference",label:"Preference",icon:Ie,preload:Oe}];n.useEffect(()=>{as()},[]);const c=i=>{i.preload&&s!==i.id&&(console.log(`🎯 메뉴 호버 감지 - ${i.label} 프리로딩 시작`),i.preload().catch(u=>{console.warn(`⚠️ ${i.label} 프리로딩 실패:`,u)}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"PVT  KPI Dashboard"})})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-64 bg-white shadow-sm min-h-screen flex flex-col",children:[e.jsx("nav",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:r.map(i=>{const u=i.icon;return e.jsxs(I,{variant:s===i.id?"default":"ghost",className:"w-full justify-start",onClick:()=>a(i.id),onMouseEnter:()=>c(i),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),i.label]},i.id)})})}),e.jsx("div",{className:"mt-auto p-4 text-xs text-gray-400",children:"Powered by PVT AI Crew"})]}),e.jsx("main",{className:"flex-1 p-6",children:t})]})]})},ye=n.forwardRef(function({className:s,type:a,...r},c){return e.jsx("input",{ref:c,type:a,"data-slot":"input",className:N("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}),G=n.forwardRef(function({className:s,...a},r){return e.jsx(Ke,{ref:r,"data-slot":"label",className:N("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})});function fe({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:N("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function cs({...t}){return e.jsx(et,{"data-slot":"dialog",...t})}function ds({...t}){return e.jsx(it,{"data-slot":"dialog-trigger",...t})}function us({...t}){return e.jsx(rt,{"data-slot":"dialog-portal",...t})}function ms({className:t,...s}){return e.jsx(nt,{"data-slot":"dialog-overlay",className:N("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function gs({className:t,children:s,...a}){return e.jsxs(us,{"data-slot":"dialog-portal",children:[e.jsx(ms,{}),e.jsxs(tt,{"data-slot":"dialog-content",className:N("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a,children:[s,e.jsxs(st,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ft,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ps({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:N("flex flex-col gap-2 text-center sm:text-left",t),...s})}function xs({className:t,...s}){return e.jsx(at,{"data-slot":"dialog-title",className:N("text-lg leading-none font-semibold",t),...s})}const _e=typeof window<"u"?window.__RUNTIME_CONFIG__||{}:{},Ce=_e.BACKEND_BASE_URL||_e.VITE_API_BASE_URL,hs=Ce&&String(Ce).trim()||"http://localhost:8000",z=Ye.create({baseURL:hs,timeout:15e3});z.interceptors.response.use(t=>t,t=>{var a,r;const s=((r=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:r.detail)||(t==null?void 0:t.message)||"알 수 없는 오류가 발생했습니다.";return R.error(`요청 실패: ${s}`),Promise.reject(t)});const ia=async(t,s,a="default")=>{console.log("🤖 LLM 분석 요청 시작:",{dbConfig:{...t,password:"[HIDDEN]"},analysisParams:s});const r=await z.post("/api/analysis/trigger-llm-analysis",{user_id:a,db_config:t,...s});return console.log("✅ LLM 분석 트리거 성공:",r.data),r.data},oa=async t=>{console.log("📊 LLM 분석 결과 조회:",t);const s=await z.get(`/api/analysis/llm-analysis/${t}`);return console.log("✅ LLM 분석 결과 조회 성공"),s.data},fs=()=>{const[t,s]=n.useState([]),[a,r]=n.useState(null),[c,i]=n.useState(!1),[u,x]=n.useState({name:"",description:"",config:{}}),[b,f]=n.useState(!0),[v,h]=n.useState(`{
  "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
}`),[d,j]=n.useState(`{
  "availability": { "peg_like": ["Accessibility_%"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`);n.useEffect(()=>{S()},[]);const S=async()=>{var o;try{f(!0);const p=await z.get("/api/preference/settings",{params:{user_id:"default"}});if((o=p.data)!=null&&o.data){const y=p.data.data,E=[{id:y.id||"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:y.dashboard_settings,statisticsSettings:y.statistics_settings,notificationSettings:y.notification_settings,theme:y.theme,language:y.language}}];s(E),E.length>0&&r(E[0])}}catch(p){console.error("Error fetching preferences:",p);const y=[{id:"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:{selected_pegs:[],selected_nes:[],selected_cell_ids:[],auto_refresh:!0,refresh_interval:30},statisticsSettings:{date_range_1:{},date_range_2:{},comparison_options:{show_delta:!0,show_rsd:!0,show_percentage:!0,decimal_places:2,chart_type:"bar"}},theme:"light",language:"ko"}}];s(y),r(y[0])}finally{f(!1)}},_=async()=>{try{const o={dashboardLayout:"grid",defaultKPIs:["availability","rrc","erab"],defaultDateRange:7,defaultNEs:["nvgnb#10000","nvgnb#20000"],defaultCellIDs:["2010","2011"],chartSettings:{showGrid:!0,showLegend:!0,lineWidth:2}};await z.post("/api/preferences",{...u,config:o}),x({name:"",description:"",config:{}}),i(!1),S()}catch(o){console.error("Error creating preference:",o)}},l=async o=>{try{await z.delete(`/api/preferences/${o}`),S(),(a==null?void 0:a.id)===o&&r(null)}catch(p){console.error("Error deleting preference:",p)}},w=o=>{const p=JSON.stringify(o,null,2),y="data:application/json;charset=utf-8,"+encodeURIComponent(p),E=`${o.name.replace(/\s+/g,"_")}_preference.json`,C=document.createElement("a");C.setAttribute("href",y),C.setAttribute("download",E),C.click()},g=o=>{const p=o.target.files[0];if(p){const y=new FileReader;y.onload=async E=>{try{const C=JSON.parse(E.target.result);await z.post("/api/preferences",{name:`${C.name} (Imported)`,description:C.description,config:C.config}),S()}catch(C){console.error("Error importing preference:",C)}},y.readAsText(p)}};return b?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsx(F,{children:e.jsx(V,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Loading preferences..."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:".json",onChange:g,style:{display:"none"},id:"import-file"}),e.jsxs(I,{variant:"outline",onClick:()=>document.getElementById("import-file").click(),className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Import"]}),e.jsxs(cs,{open:c,onOpenChange:i,children:[e.jsx(ds,{asChild:!0,children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"New Preference"]})}),e.jsxs(gs,{children:[e.jsx(ps,{children:e.jsx(xs,{children:"Create New Preference"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"name",children:"Name"}),e.jsx(ye,{id:"name",value:u.name,onChange:o=>x(p=>({...p,name:o.target.value})),placeholder:"Enter preference name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"description",children:"Description"}),e.jsx(fe,{id:"description",value:u.description,onChange:o=>x(p=>({...p,description:o.target.value})),placeholder:"Enter preference description"})]}),e.jsx(I,{onClick:_,className:"w-full",children:"Create Preference"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(F,{children:[e.jsx(J,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Saved Preferences"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:t.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No preferences saved yet"}):t.map(o=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${(a==null?void 0:a.id)===o.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>r(o),children:[e.jsx("div",{className:"font-medium",children:o.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o.description})]},o.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsxs(F,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(W,{children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>w(a),className:"flex items-center gap-1",children:[e.jsx(ge,{className:"h-3 w-3"}),"Export"]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>l(a.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(Mt,{className:"h-3 w-3"}),"Delete"]})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Configuration"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:JSON.stringify(a.config,null,2)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Options Reference"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:`{
  "dashboardLayout": "grid", // options: "grid", "masonry", "single"
  "defaultKPIs": ["availability", "rrc", "erab"],
  "defaultDateRange": 7,       // days. options: 1, 7, 14, 30, 90
  "defaultNEs": ["nvgnb#10000", "nvgnb#20000"],   // array of strings
  "defaultCellIDs": ["2010", "2011"],            // array of strings
  "availableKPIs": [                                 // KPI picker list
    { "value": "availability", "label": "Availability (%)", "threshold": 99.0 },
    { "value": "rrc", "label": "RRC Success Rate (%)", "threshold": 98.5 }
  ],
  "chartSettings": {
    "showGrid": true,     // boolean
    "showLegend": true,   // boolean
    "lineWidth": 2        // integer (1..4)
    // optional: "palette": "default"  // options: "default", "pastel", "vivid"
  },
  "derived_pegs": {        // optional: custom formulas, name: expression
    "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
  }
}`})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Derived PEGs (JSON)"}),e.jsx(fe,{value:v,onChange:o=>h(o.target.value),rows:8,placeholder:`{
  "peg_name": "A/B*100"
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(I,{variant:"outline",onClick:async()=>{try{const o=JSON.parse(v),p=await z.put(`/api/preferences/${a.id}/derived-pegs`,{derived_pegs:o});r(y=>({...y,config:{...(y==null?void 0:y.config)||{},derived_pegs:p.data.derived_pegs}}))}catch(o){console.error("Invalid JSON or update failed",o)}},children:"Save Derived PEGs"}),e.jsx(I,{variant:"outline",onClick:async()=>{try{const o=await z.get(`/api/preferences/${a.id}/derived-pegs`);h(JSON.stringify(o.data.derived_pegs||{},null,2))}catch(o){console.error("Fetch derived pegs failed",o)}},children:"Load from Server"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"KPI Mappings (JSON)"}),e.jsx(fe,{value:d,onChange:o=>j(o.target.value),rows:8,placeholder:`{
  "availability": { "peg_names": ["Accessibility_Attempts","Accessibility_Success"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(I,{variant:"outline",onClick:async()=>{try{const o=JSON.parse(d),p={...(a==null?void 0:a.config)||{},kpiMappings:o};await z.put(`/api/preferences/${a.id}`,{name:a.name,description:a.description,config:p}),r(y=>({...y||{},config:p})),R.success("KPI mappings saved")}catch(o){console.error("Invalid JSON or save failed",o),R.error("Save failed")}},children:"Save KPI Mappings"}),e.jsx(I,{variant:"outline",onClick:()=>{var o;try{const p=((o=a==null?void 0:a.config)==null?void 0:o.kpiMappings)||{};j(JSON.stringify(p,null,2))}catch{j("{}")}},children:"Load from Preference"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{className:"flex items-center gap-2",onClick:async()=>{var o,p,y,E,C;try{if(!a)return;const D={dashboard_settings:((o=a.config)==null?void 0:o.dashboardSettings)||{},statistics_settings:((p=a.config)==null?void 0:p.statisticsSettings)||{},notification_settings:((y=a.config)==null?void 0:y.notificationSettings)||{},theme:((E=a.config)==null?void 0:E.theme)||"light",language:((C=a.config)==null?void 0:C.language)||"ko"};await z.put("/api/preference/settings",D,{params:{user_id:"default"}}),R.success("Preference saved"),await S()}catch(D){console.error("Failed to save preference",D),R.error("Save failed")}},children:[e.jsx(Te,{className:"h-4 w-4"}),"Save Preference"]}),e.jsx(I,{variant:"default",onClick:()=>{try{if(!a)return;localStorage.setItem("activePreference",JSON.stringify(a)),R.success("Applied to Dashboard")}catch(o){console.error("Failed to apply to dashboard",o),R.error("Apply failed")}},children:"Apply to Dashboard"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"변경사항을 저장하려면 Save Preference, 대시보드에 적용하려면 Apply to Dashboard를 누르세요."})]})})]}):e.jsx(F,{children:e.jsx(V,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Select a preference to view its details"})})})})]})]})},re={dashboardSettings:{selectedPegs:[],defaultNe:"",defaultCellId:"",autoRefreshInterval:30,chartStyle:"line",showLegend:!0,showGrid:!0,theme:"light"},statisticsSettings:{defaultDateRange:7,comparisonEnabled:!0,showDelta:!0,showRsd:!0,defaultPegs:["availability","rrc"],chartType:"bar",decimalPlaces:2,autoAnalysis:!1},databaseSettings:{host:"",port:5432,user:"postgres",password:"",dbname:"postgres",table:"summary"},notificationSettings:{enableToasts:!0,enableSounds:!1,saveNotification:!0,errorNotification:!0},generalSettings:{language:"ko",timezone:"Asia/Seoul",dateFormat:"YYYY-MM-DD",numberFormat:"comma"}},vs={settings:re,loading:!1,saving:!1,error:null,lastSaved:null,hasUnsavedChanges:!1,userId:"default",initialized:!1},bs=(t,s)=>{switch(s.type){case"SET_LOADING":return{...t,loading:s.payload,error:s.payload?null:t.error};case"SET_SAVING":return{...t,saving:s.payload};case"SET_ERROR":return{...t,error:s.payload,loading:!1,saving:!1};case"SET_SETTINGS":return{...t,settings:s.payload,error:null,initialized:!0,hasUnsavedChanges:!1};case"UPDATE_SETTINGS":return{...t,settings:{...t.settings,...s.payload},hasUnsavedChanges:!0};case"SAVE_SUCCESS":return{...t,saving:!1,error:null,lastSaved:new Date,hasUnsavedChanges:!1};case"RESET_SETTINGS":return{...t,settings:re,hasUnsavedChanges:!0};default:return t}},$e=n.createContext(null),js=({children:t})=>{var l,w;const[s,a]=n.useReducer(bs,vs),r=n.useRef(null),c=n.useRef(!0),i=n.useCallback((g,o=null)=>{console.log(`[PreferenceContext] ${g}`,o||"")},[]),u=n.useCallback((g,o=null)=>{console.error(`[PreferenceContext] ${g}`,o)},[]),x=n.useCallback(async()=>{var g,o;if(c.current)try{a({type:"SET_LOADING",payload:!0}),i("사용자 설정 로드 시작"),i("Mock 데이터 사용 (API 문제로 인한 임시 조치)");const p={...re};if(await new Promise(y=>setTimeout(y,500)),!c.current)return;a({type:"SET_SETTINGS",payload:p}),i("사용자 설정 로드 완료",p),(g=s.settings.notificationSettings)!=null&&g.enableToasts&&R.success("설정을 불러왔습니다")}catch(p){u("설정 로드 실패",p),a({type:"SET_ERROR",payload:"설정을 불러오는데 실패했습니다."}),(o=s.settings.notificationSettings)!=null&&o.enableToasts&&R.error("설정 로드 실패: "+(p.message||"알 수 없는 오류"))}finally{a({type:"SET_LOADING",payload:!1})}},[s.userId,(l=s.settings.notificationSettings)==null?void 0:l.enableToasts,i,u]),b=n.useCallback(async(g=null)=>{var p,y;if(!c.current)return;const o=g||s.settings;try{if(a({type:"SET_SAVING",payload:!0}),i("사용자 설정 저장 시작",o),await new Promise(E=>setTimeout(E,300)),!c.current)return;a({type:"SAVE_SUCCESS"}),i("사용자 설정 저장 완료"),(p=o.notificationSettings)!=null&&p.saveNotification&&R.success("설정이 저장되었습니다")}catch(E){u("설정 저장 실패",E),a({type:"SET_ERROR",payload:"설정 저장에 실패했습니다."}),(y=o.notificationSettings)!=null&&y.errorNotification&&R.error("설정 저장 실패: "+(E.message||"알 수 없는 오류"))}},[s.settings,s.userId,i,u]),f=n.useCallback(g=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{i("디바운싱된 자동 저장 실행"),b(g)},500)},[b,i]),v=n.useCallback((g,o)=>{i(`로컬 섹션 업데이트(자동 저장 없음): ${g}`,o),a({type:"UPDATE_SETTINGS",payload:{[g]:o}})},[i]),h=n.useCallback(g=>{i("설정 업데이트",g),a({type:"UPDATE_SETTINGS",payload:g});const o={...s.settings,...g};f(o)},[s.settings,f,i]),d=n.useCallback(()=>(r.current&&(clearTimeout(r.current),r.current=null),i("즉시 저장 실행"),b()),[b,i]),j=n.useCallback(()=>{var g;i("설정 초기화"),a({type:"RESET_SETTINGS"}),f(re),(g=s.settings.notificationSettings)!=null&&g.enableToasts&&R.info("설정이 초기화되었습니다")},[f,(w=s.settings.notificationSettings)==null?void 0:w.enableToasts,i]),S=n.useCallback(()=>{a({type:"SET_ERROR",payload:null})},[]);n.useEffect(()=>(i("PreferenceProvider 초기화 시작"),x(),()=>{c.current=!1,r.current&&clearTimeout(r.current),i("PreferenceProvider 정리 완료")}),[x,i]);const _={...s,updateSettings:h,updateSectionLocal:v,saveImmediately:d,resetSettings:j,clearError:S,loadSettings:x,defaultSettings:re,logInfo:i,logError:u};return e.jsx($e.Provider,{value:_,children:t})},ys=()=>{const t=n.useContext($e);if(!t)throw new Error("usePreference는 PreferenceProvider 내부에서만 사용할 수 있습니다.");return t},ke={dashboardSettings:{selectedPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 PEG를 선택해야 합니다."},autoRefreshInterval:{required:!0,type:"number",min:5,max:300,message:"자동 새로고침 간격은 5초~300초 사이여야 합니다."},defaultNe:{type:"string",maxLength:50,message:"NE ID는 50자를 초과할 수 없습니다."},defaultCellId:{type:"string",maxLength:50,message:"Cell ID는 50자를 초과할 수 없습니다."}},statisticsSettings:{defaultDateRange:{required:!0,type:"number",min:1,max:365,message:"기본 날짜 범위는 1일~365일 사이여야 합니다."},decimalPlaces:{required:!0,type:"number",min:0,max:6,message:"소수점 자릿수는 0~6자리 사이여야 합니다."},defaultPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 기본 PEG를 선택해야 합니다."}}},oe=()=>{const t=ys(),s=n.useRef({}),a=n.useCallback((f,v=null)=>{const h={},d=v?{[v]:ke[v]}:ke;return Object.entries(d).forEach(([j,S])=>{f[j]&&Object.entries(S).forEach(([_,l])=>{const w=f[j][_],g=`${j}.${_}`;if(l.required&&(w==null||w==="")){h[g]=l.message||`${_}는 필수 항목입니다.`;return}if(!(w==null||w==="")){if(l.type==="array"&&!Array.isArray(w)){h[g]=l.message||`${_}는 배열이어야 합니다.`;return}if(l.type==="number"&&typeof w!="number"){h[g]=l.message||`${_}는 숫자여야 합니다.`;return}if(l.type==="string"&&typeof w!="string"){h[g]=l.message||`${_}는 문자열이어야 합니다.`;return}if(l.type==="number"){if(l.min!==void 0&&w<l.min){h[g]=l.message||`${_}는 ${l.min} 이상이어야 합니다.`;return}if(l.max!==void 0&&w>l.max){h[g]=l.message||`${_}는 ${l.max} 이하여야 합니다.`;return}}if(l.type==="array"){if(l.minLength!==void 0&&w.length<l.minLength){h[g]=l.message||`${_}는 최소 ${l.minLength}개 항목이 필요합니다.`;return}if(l.maxLength!==void 0&&w.length>l.maxLength){h[g]=l.message||`${_}는 최대 ${l.maxLength}개 항목만 허용됩니다.`;return}}if(l.type==="string"){if(l.minLength!==void 0&&w.length<l.minLength){h[g]=l.message||`${_}는 최소 ${l.minLength}자 이상이어야 합니다.`;return}if(l.maxLength!==void 0&&w.length>l.maxLength){h[g]=l.message||`${_}는 최대 ${l.maxLength}자까지 허용됩니다.`;return}}}})}),h},[]),r=n.useCallback((f,v=null)=>{var j;t.logInfo("설정 업데이트 및 검증 시작",{newSettings:f,section:v});const h=v?{...t.settings,[v]:{...t.settings[v],...f[v]}}:{...t.settings,...f},d=a(h,v);if(s.current=d,Object.keys(d).length>0){t.logError("설정 유효성 검증 실패",d);const S=Object.values(d)[0];return(j=t.settings.notificationSettings)!=null&&j.errorNotification&&R.error(`설정 오류: ${S}`),!1}return t.updateSettings(f),t.logInfo("설정 업데이트 완료"),!0},[t,a]),c=n.useCallback((f=null,v=null)=>{var h,d;try{const j={settings:v&&Object.keys(v).length>0?{...t.settings,...v}:t.settings,metadata:{exportedAt:new Date().toISOString(),version:"1.0.0",userId:t.userId}},S=JSON.stringify(j,null,2),_=new Blob([S],{type:"application/json"}),l=document.createElement("a");return l.href=URL.createObjectURL(_),l.download=f||`preference-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(l.href),t.logInfo("설정 내보내기 완료",{filename:l.download}),(h=t.settings.notificationSettings)!=null&&h.enableToasts&&R.success("설정이 파일로 내보내졌습니다"),!0}catch(j){return t.logError("설정 내보내기 실패",j),(d=t.settings.notificationSettings)!=null&&d.errorNotification&&R.error("설정 내보내기 실패: "+j.message),!1}},[t]),i=n.useCallback(f=>new Promise((v,h)=>{const d=new FileReader;d.onload=j=>{var S,_;try{const l=JSON.parse(j.target.result);if(!l.settings)throw new Error("유효하지 않은 설정 파일 형식입니다.");const w={...t.settings,...l.settings,derivedPegSettings:l.settings.derivedPegSettings||t.settings.derivedPegSettings||{formulas:[],settings:{}}},g=a(w);if(Object.keys(g).length>0){const o=Object.values(g).join(", ");throw new Error(`설정 유효성 검증 실패: ${o}`)}t.updateSettings(w),t.logInfo("설정 가져오기 완료",l.settings),(S=t.settings.notificationSettings)!=null&&S.enableToasts&&R.success("설정이 성공적으로 가져와졌습니다"),v(l.settings)}catch(l){t.logError("설정 가져오기 실패",l),(_=t.settings.notificationSettings)!=null&&_.errorNotification&&R.error("설정 가져오기 실패: "+l.message),h(l)}},d.onerror=()=>{var S;const j=new Error("파일 읽기 실패");t.logError("파일 읽기 실패",j),(S=t.settings.notificationSettings)!=null&&S.errorNotification&&R.error("파일을 읽을 수 없습니다"),h(j)},d.readAsText(f)}),[t,a]),u=n.useMemo(()=>s.current,[s.current]),x=n.useMemo(()=>Object.keys(u).length>0,[u]),b=n.useMemo(()=>!x,[x]);return{...t,validationErrors:u,hasValidationErrors:x,isValid:b,validateSettings:a,updateSettings:r,exportSettings:c,importSettings:i,dashboardSettings:t.settings.dashboardSettings,statisticsSettings:t.settings.statisticsSettings,notificationSettings:t.settings.notificationSettings,generalSettings:t.settings.generalSettings}},Ns=()=>{const{dashboardSettings:t,updateSettings:s,saving:a,error:r,validationErrors:c,logInfo:i}=oe(),u=n.useCallback(b=>(i("Dashboard 설정 업데이트",b),s({dashboardSettings:b},"dashboardSettings")),[s,i]),x=n.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([b])=>b.startsWith("dashboardSettings."))),[c]);return{settings:t,updateSettings:u,saving:a,error:r,validationErrors:x,hasErrors:Object.keys(x).length>0}},Ss=()=>{const{statisticsSettings:t,updateSettings:s,saving:a,error:r,validationErrors:c,logInfo:i}=oe(),u=n.useCallback(b=>(i("Statistics 설정 업데이트",b),s({statisticsSettings:b},"statisticsSettings")),[s,i]),x=n.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([b])=>b.startsWith("statisticsSettings."))),[c]);return{settings:t,updateSettings:u,saving:a,error:r,validationErrors:x,hasErrors:Object.keys(x).length>0}},ws=be("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function O({className:t,variant:s,asChild:a=!1,...r}){const c=a?Pe:"span";return e.jsx(c,{"data-slot":"badge",className:N(ws({variant:s}),t),...r})}function K({className:t,orientation:s="horizontal",decorative:a=!0,...r}){return e.jsx(ot,{"data-slot":"separator-root",decorative:a,orientation:s,className:N("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}const _s=n.forwardRef(function({className:s,...a},r){return e.jsx(lt,{ref:r,"data-slot":"switch",className:N("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(ct,{"data-slot":"switch-thumb",className:N("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})});function Cs({...t}){return e.jsx(dt,{"data-slot":"select",...t})}function ks({...t}){return e.jsx(gt,{"data-slot":"select-value",...t})}const Es=n.forwardRef(function({className:s,size:a="default",children:r,...c},i){return e.jsxs(ut,{ref:i,"data-slot":"select-trigger","data-size":a,className:N("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...c,children:[r,e.jsx(mt,{asChild:!0,children:e.jsx(pe,{className:"size-4 opacity-50"})})]})});function Ps({className:t,children:s,position:a="popper",...r}){return e.jsx(pt,{children:e.jsxs(xt,{"data-slot":"select-content",className:N("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(Rs,{}),e.jsx(ht,{className:N("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Ts,{})]})})}function Is({className:t,children:s,...a}){return e.jsxs(ft,{"data-slot":"select-item",className:N("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(vt,{children:e.jsx(Y,{className:"size-4"})})}),e.jsx(bt,{children:s})]})}function Rs({className:t,...s}){return e.jsx(jt,{"data-slot":"select-scroll-up-button",className:N("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(je,{className:"size-4"})})}function Ts({className:t,...s}){return e.jsx(yt,{"data-slot":"select-scroll-down-button",className:N("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(pe,{className:"size-4"})})}const Ds=n.forwardRef(function({className:s,...a},r){return e.jsx(Nt,{ref:r,"data-slot":"checkbox",className:N("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(St,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Y,{className:"size-3.5"})})})}),Ls=n.forwardRef(function(s,a){return e.jsx(wt,{ref:a,"data-slot":"popover",...s})}),Os=n.forwardRef(function(s,a){return e.jsx(_t,{ref:a,"data-slot":"popover-trigger",...s})}),As=n.forwardRef(function({className:s,align:a="center",sideOffset:r=4,...c},i){return e.jsx(Ct,{children:e.jsx(kt,{ref:i,"data-slot":"popover-content",align:a,sideOffset:r,className:N("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...c})})});n.forwardRef(function(s,a){return e.jsx(Et,{ref:a,"data-slot":"popover-anchor",...s})});const $s=n.forwardRef(function({className:s,...a},r){return e.jsx(X,{ref:r,"data-slot":"command",className:N("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",s),...a})}),zs=n.forwardRef(function({className:s,...a},r){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(Bt,{className:"size-4 shrink-0 opacity-50"}),e.jsx(X.Input,{ref:r,"data-slot":"command-input",className:N("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})}),Fs=n.forwardRef(function({className:s,...a},r){return e.jsx(X.List,{ref:r,"data-slot":"command-list",className:N("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",s),...a})}),Vs=n.forwardRef(function(s,a){return e.jsx(X.Empty,{ref:a,"data-slot":"command-empty",className:"py-6 text-center text-sm",...s})});n.forwardRef(function({className:s,...a},r){return e.jsx(X.Group,{ref:r,"data-slot":"command-group",className:N("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",s),...a})});n.forwardRef(function({className:s,...a},r){return e.jsx(X.Separator,{ref:r,"data-slot":"command-separator",className:N("bg-border -mx-1 h-px",s),...a})});const Ms=n.forwardRef(function({className:s,...a},r){return e.jsx(X.Item,{ref:r,"data-slot":"command-item",className:N("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})});n.forwardRef(function({className:s,...a},r){return e.jsx("span",{ref:r,"data-slot":"command-shortcut",className:N("text-muted-foreground ml-auto text-xs tracking-widest",s),...a})});function ze({...t}){return e.jsx(Pt,{"data-slot":"collapsible",...t})}function Fe({...t}){return e.jsx(It,{"data-slot":"collapsible-trigger",...t})}function Ve({...t}){return e.jsx(Rt,{"data-slot":"collapsible-content",...t})}const Bs=be("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Me({className:t,variant:s,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:N(Bs({variant:s}),t),...a})}function Be({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:N("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}const ee={text:{placeholder:"텍스트를 입력하세요",maxLength:100},number:{placeholder:"숫자를 입력하세요",min:0,max:999999},select:{placeholder:"선택하세요",options:[]},multiselect:{placeholder:"하나 이상 선택하세요",options:[]},checkbox:{label:"활성화"},switch:{label:"켜기/끄기"}},Us=({field:t,value:s,onChange:a,error:r,disabled:c})=>{var i,u,x,b;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(G,{htmlFor:t.key,className:"text-sm font-medium",children:[t.label,t.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(ye,{id:t.key,type:t.type==="number"?"number":"text",value:s||"",onChange:f=>{const v=t.type==="number"?f.target.value===""?"":Number(f.target.value):f.target.value;a(v)},placeholder:t.placeholder||((i=ee[t.type])==null?void 0:i.placeholder),maxLength:t.maxLength||((u=ee[t.type])==null?void 0:u.maxLength),min:t.min||((x=ee[t.type])==null?void 0:x.min),max:t.max||((b=ee[t.type])==null?void 0:b.max),disabled:c,className:r?"border-destructive":""}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description}),r&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),r]})]})},Gs=({field:t,value:s,onChange:a,error:r,disabled:c})=>{var i;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(G,{htmlFor:t.key,className:"text-sm font-medium",children:[t.label,t.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(Cs,{value:s||"",onValueChange:a,disabled:c,children:[e.jsx(Es,{className:r?"border-destructive":"",children:e.jsx(ks,{placeholder:t.placeholder||ee.select.placeholder})}),e.jsx(Ps,{children:(i=t.options)==null?void 0:i.map(u=>e.jsx(Is,{value:u.value,children:u.label},u.value))})]}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description}),r&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),r]})]})},qs=({field:t,value:s,onChange:a,error:r,disabled:c})=>{var v,h;const i=Array.isArray(s)?s:[],[u,x]=n.useState(!1),b=d=>{const j=i.includes(d)?i.filter(S=>S!==d):[...i,d];a(j)},f=((v=t.options)==null?void 0:v.filter(d=>i.includes(d.value)).map(d=>d.label))||[];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(G,{className:"text-sm font-medium",children:[t.label,t.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(Ls,{open:u,onOpenChange:x,children:[e.jsx(Os,{asChild:!0,children:e.jsx(I,{variant:"outline",role:"combobox","aria-expanded":u,className:`w-full justify-between ${r?"border-destructive":""}`,disabled:c,children:i.length>0?`${i.length}개 선택됨`:t.placeholder||ee.multiselect.placeholder})}),e.jsx(As,{className:"p-0 w-[--radix-popover-trigger-width]",children:e.jsxs($s,{children:[e.jsx(zs,{placeholder:"검색..."}),e.jsxs(Fs,{children:[e.jsx(Vs,{children:"결과가 없습니다"}),(h=t.options)==null?void 0:h.map(d=>{const j=i.includes(d.value);return e.jsxs(Ms,{value:d.label,onSelect:()=>b(d.value),children:[e.jsx("span",{className:`mr-2 ${j?"":"opacity-0"}`,children:e.jsx(Y,{className:"h-4 w-4"})}),d.label]},d.value)})]})]})})]}),i.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:f.map((d,j)=>e.jsx(O,{variant:"secondary",className:"text-xs",children:d},`${d}-${j}`))}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description}),r&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),r]})]})},Js=({field:t,value:s,onChange:a,error:r,disabled:c})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(G,{htmlFor:t.key,className:"text-sm font-medium",children:[t.label,t.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]}),e.jsx(_s,{id:t.key,checked:!!s,onCheckedChange:a,disabled:c})]}),r&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),r]})]}),Ee=({title:t,description:s,settingKey:a,fields:r=[],defaultOpen:c=!1,disabled:i=!1,className:u="",onFieldChange:x,showSaveButton:b=!1,showResetButton:f=!1})=>{const[v,h]=n.useState(c),[d,j]=n.useState(!1),{settings:S,updateSettings:_,updateSectionLocal:l,saving:w,error:g,validationErrors:o,logInfo:p,saveImmediately:y,defaultSettings:E}=oe(),C=S[a]||{},D=n.useMemo(()=>{const P={};return Object.entries(o).forEach(([$,U])=>{if($.startsWith(`${a}.`)){const ce=$.replace(`${a}.`,"");P[ce]=U}}),P},[o,a]),A=Object.keys(D).length>0,B=n.useCallback((P,$)=>{p(`SettingBox 필드 변경: ${a}.${P}`,{oldValue:C[P],newValue:$});const U={...C,[P]:$};b?l(a,U):_({[a]:U}),x==null||x(P,$,U),j(!0)},[a,C,_,x,p]),le=n.useCallback(async()=>{p(`SettingBox 즉시 저장: ${a}`),await y()},[y,p,a]),q=n.useCallback(()=>{p(`SettingBox 초기화: ${a}`);const P=E[a]||{};_({[a]:P}),j(!1)},[a,_,E,p]),Q=n.useCallback(P=>{const $=C[P.key],U=d?D[P.key]:null,Z={field:P,value:$,onChange:xe=>B(P.key,xe),error:U,disabled:i||w};switch(P.type){case"text":case"number":return e.jsx(Us,{...Z},P.key);case"select":return e.jsx(Gs,{...Z},P.key);case"multiselect":return e.jsx(qs,{...Z},P.key);case"switch":case"checkbox":return e.jsx(Js,{...Z},P.key);default:return e.jsxs("div",{className:"text-sm text-muted-foreground",children:["지원하지 않는 필드 타입: ",P.type]},P.key)}},[C,D,d,i,w,B]);return e.jsx(F,{className:`w-full ${u}`,children:e.jsxs(ze,{open:v,onOpenChange:h,children:[e.jsx(Fe,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[t,w&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"저장 중"]}),d&&A&&e.jsxs(O,{variant:"destructive",className:"text-xs",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"오류"]}),d&&!A&&!w&&e.jsxs(O,{variant:"default",className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"유효"]})]}),s&&e.jsx(ae,{children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"outline",className:"text-xs",children:[r.length,"개 설정"]}),v?e.jsx(je,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})]})]})})}),e.jsx(Ve,{children:e.jsxs(V,{className:"space-y-6",children:[g&&e.jsxs(Me,{variant:"destructive",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(Be,{children:g})]}),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(Q)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"설정할 수 있는 항목이 없습니다."}),(b||f||A)&&e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:f&&e.jsxs(I,{variant:"outline",size:"sm",onClick:q,disabled:i||w,children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"초기화"]})}),e.jsx("div",{className:"flex items-center gap-2",children:b&&e.jsxs(I,{size:"sm",onClick:le,disabled:i||w||A,children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"저장"]})})]})]})]})})]})})};function Ws({className:t,value:s,...a}){return e.jsx(Tt,{"data-slot":"progress",className:N("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...a,children:e.jsx(Dt,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}const me=[{key:"dashboardSettings",label:"Dashboard 설정",description:"선택된 PEG, 차트 스타일, 새로고침 간격 등"},{key:"statisticsSettings",label:"Statistics 설정",description:"기본 날짜 범위, 비교 옵션, 소수점 자릿수 등"},{key:"derivedPegSettings",label:"Derived PEG 설정",description:"사용자 정의 수식, 활성화 상태, 계산 정밀도 등"},{key:"notificationSettings",label:"알림 설정",description:"토스트, 사운드, 알림 타입 설정"},{key:"generalSettings",label:"일반 설정",description:"언어, 시간대, 날짜 형식 등"}],Hs=({title:t="설정 백업 & 복원",description:s="설정을 JSON 파일로 내보내거나 가져올 수 있습니다",defaultOpen:a=!1,className:r=""})=>{const[c,i]=n.useState(a),[u,x]=n.useState(!1),[b,f]=n.useState(!1),[v,h]=n.useState(0),[d,j]=n.useState(!1),[S,_]=n.useState(null),[l,w]=n.useState(null),[g,o]=n.useState(me.reduce((m,k)=>({...m,[k.key]:!0}),{})),[p,y]=n.useState(""),E=n.useRef(null),{settings:C,exportSettings:D,importSettings:A,hasUnsavedChanges:B,saving:le,logInfo:q,logError:Q}=oe(),P=n.useCallback(async(m="full")=>{f(!0),_(null);try{q("설정 내보내기 시작",{exportType:m,customFileName:p});let k=C;if(m==="partial"){const he=Object.entries(g).filter(([te,se])=>se).map(([te])=>te);if(he.length===0){R.error("내보낼 설정 섹션을 하나 이상 선택해주세요");return}k=he.reduce((te,se)=>(C[se]&&(te[se]=C[se]),te),{}),q("부분 내보내기 선택된 섹션",he)}const de=new Date().toISOString().split("T")[0],ue=p.trim()||(m==="partial"?`preference-settings-partial-${de}.json`:`preference-settings-${de}.json`);await D(ue,k)&&(R.success(`설정이 "${ue}" 파일로 내보내졌습니다`),y(""))}catch(k){Q("설정 내보내기 실패",k),R.error("설정 내보내기 실패: "+k.message)}finally{f(!1)}},[C,g,p,D,q,Q]),$=n.useCallback(async m=>{if(m){x(!0),h(0),_(null);try{if(q("설정 가져오기 시작",{fileName:m.name,fileSize:m.size}),!m.name.toLowerCase().endsWith(".json"))throw new Error("JSON 파일만 지원됩니다");if(m.size>5*1024*1024)throw new Error("파일 크기가 너무 큽니다 (최대 5MB)");h(20);const k=await A(m);h(80),w({name:m.name,size:m.size,importedAt:new Date,sectionsCount:Object.keys(k).length}),h(100),q("설정 가져오기 완료",{fileName:m.name,sectionsImported:Object.keys(k).length}),R.success(`"${m.name}"에서 설정을 성공적으로 가져왔습니다`)}catch(k){Q("설정 가져오기 실패",k),_(k.message),R.error("설정 가져오기 실패: "+k.message)}finally{x(!1),setTimeout(()=>{h(0)},3e3)}}},[A,q,Q]),U=n.useCallback(m=>{const k=m.target.files[0];k&&($(k),m.target.value="")},[$]),ce=n.useCallback(m=>{m.preventDefault(),j(!0)},[]),Z=n.useCallback(m=>{m.preventDefault(),j(!1)},[]),xe=n.useCallback(m=>{m.preventDefault(),j(!1);const k=m.dataTransfer.files;k.length>0&&$(k[0])},[$]),Je=n.useCallback(m=>{o(k=>({...k,[m]:!k[m]}))},[]),We=n.useCallback(()=>{const m=Object.values(g).every(Boolean),k=me.reduce((de,ue)=>({...de,[ue.key]:!m}),{});o(k)},[g]);return e.jsx(F,{className:`w-full ${r}`,children:e.jsxs(ze,{open:c,onOpenChange:i,children:[e.jsx(Fe,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5"}),t,u&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"가져오는 중"]}),b&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"내보내는 중"]}),B&&e.jsxs(O,{variant:"outline",className:"text-xs",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),"저장되지 않은 변경사항"]})]}),s&&e.jsx(ae,{children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsxs(O,{variant:"default",className:"text-xs",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"가져옴"]}),c?e.jsx(je,{className:"h-4 w-4"}):e.jsx(pe,{className:"h-4 w-4"})]})]})})}),e.jsx(Ve,{children:e.jsxs(V,{className:"space-y-6",children:[S&&e.jsxs(Me,{variant:"destructive",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx(Be,{children:S})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"파일 가져오는 중..."}),e.jsxs("span",{children:[v,"%"]})]}),e.jsx(Ws,{value:v,className:"h-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"설정 가져오기"]}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${d?"border-primary bg-primary/5":u?"border-muted bg-muted/20":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,onDragOver:ce,onDragLeave:Z,onDrop:xe,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Gt,{className:`h-8 w-8 mx-auto ${d?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${d?"text-primary":""}`,children:d?"파일을 여기에 놓으세요":"JSON 파일을 드래그하거나 클릭하여 선택하세요"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"최대 5MB, .json 파일만 지원"})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{var m;return(m=E.current)==null?void 0:m.click()},disabled:u,className:"mt-2",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"파일 선택"]})]})}),e.jsx("input",{ref:E,type:"file",accept:".json",onChange:U,style:{display:"none"}}),l&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Y,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"마지막 가져온 파일:"}),e.jsx("span",{children:l.name}),e.jsxs(O,{variant:"secondary",className:"text-xs",children:[l.sectionsCount,"개 섹션"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.importedAt.toLocaleString()})]})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"설정 내보내기"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"fileName",className:"text-sm",children:"파일명 (선택사항)"}),e.jsx(ye,{id:"fileName",value:p,onChange:m=>y(m.target.value),placeholder:"preference-settings-custom.json",disabled:b}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"비워두면 자동으로 날짜가 포함된 파일명이 생성됩니다"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-sm font-medium",children:"내보낼 설정 선택"}),e.jsx(I,{variant:"outline",size:"sm",onClick:We,disabled:b,children:Object.values(g).every(Boolean)?"전체 해제":"전체 선택"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:me.map(m=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(Ds,{id:m.key,checked:g[m.key],onCheckedChange:()=>Je(m.key),disabled:b}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(G,{htmlFor:m.key,className:"text-sm font-medium cursor-pointer",children:m.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m.description})]})]},m.key))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(I,{onClick:()=>P("full"),disabled:b||le,className:"flex-1",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"전체 설정 내보내기"]}),e.jsxs(I,{variant:"outline",onClick:()=>P("partial"),disabled:b||le||Object.values(g).every(m=>!m),className:"flex-1",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"선택된 설정만 내보내기"]})]}),Object.values(g).every(m=>!m)&&e.jsx("p",{className:"text-xs text-destructive",children:"내보낼 설정 섹션을 하나 이상 선택해주세요"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"현재 설정 상태"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:me.map(m=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[m.label,":"]}),e.jsx("span",{className:"text-muted-foreground",children:C[m.key]?"설정됨":"기본값"})]},m.key))}),B&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),"저장되지 않은 변경사항이 있습니다"]})]})]})})]})})},Ys=()=>{var E,C;const{settings:t,loading:s,saving:a,error:r,hasUnsavedChanges:c,lastSaved:i,validationErrors:u,hasValidationErrors:x,saveImmediately:b,resetSettings:f,logInfo:v}=oe(),{settings:h,updateSettings:d,hasErrors:j}=Ns(),{settings:S,updateSettings:_,hasErrors:l}=Ss(),w=()=>{v("Dashboard 설정 테스트 시작"),d({selectedPegs:["availability","rrc","erab","sar","mobility_intra"],defaultNe:"TEST_NE_001",defaultCellId:"TEST_CELL_001",autoRefreshInterval:60})},g=()=>{v("Statistics 설정 테스트 시작"),_({defaultDateRange:14,showDelta:!0,showRsd:!0,decimalPlaces:3,defaultPegs:["availability","rrc","erab"]})},o=()=>{v("유효성 검증 테스트 시작"),d({autoRefreshInterval:500,selectedPegs:[]})},p=[{key:"selectedPegs",type:"multiselect",label:"선택된 PEG 항목",description:"대시보드에 표시할 PEG 항목들을 선택하세요",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"defaultNe",type:"text",label:"기본 NE ID",description:"통계 분석 시 기본으로 사용할 NE ID",placeholder:"NE_001"},{key:"defaultCellId",type:"text",label:"기본 Cell ID",description:"통계 분석 시 기본으로 사용할 Cell ID",placeholder:"Cell_001"},{key:"autoRefreshInterval",type:"number",label:"자동 새로고침 간격 (초)",description:"대시보드 데이터 자동 새로고침 간격",required:!0,min:5,max:300},{key:"chartStyle",type:"select",label:"차트 스타일",description:"대시보드 차트의 기본 스타일",options:[{value:"line",label:"선형 차트"},{value:"bar",label:"막대 차트"},{value:"area",label:"영역 차트"}]},{key:"showLegend",type:"switch",label:"범례 표시",description:"차트에 범례를 표시할지 여부"},{key:"showGrid",type:"switch",label:"격자 표시",description:"차트에 격자를 표시할지 여부"}],y=[{key:"defaultDateRange",type:"number",label:"기본 날짜 범위 (일)",description:"통계 분석 시 기본 날짜 범위",required:!0,min:1,max:365},{key:"showDelta",type:"switch",label:"Delta 값 표시",description:"비교 분석 시 Delta 값을 표시할지 여부"},{key:"showRsd",type:"switch",label:"RSD 값 표시",description:"비교 분석 시 RSD 값을 표시할지 여부"},{key:"decimalPlaces",type:"number",label:"소수점 자릿수",description:"숫자 표시 시 소수점 자릿수",required:!0,min:0,max:6},{key:"defaultPegs",type:"multiselect",label:"기본 PEG 선택",description:"통계 분석 시 기본으로 선택할 PEG 항목들",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"chartType",type:"select",label:"차트 타입",description:"통계 차트의 기본 타입",options:[{value:"bar",label:"막대 차트"},{value:"line",label:"선형 차트"},{value:"scatter",label:"산점도"}]}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Preference 훅 테스트"}),e.jsx("p",{className:"text-muted-foreground",children:"usePreference 훅의 동작을 테스트합니다"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s&&e.jsxs(O,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3"}),"로딩 중"]}),a&&e.jsxs(O,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3"}),"저장 중"]}),c&&e.jsxs(O,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),"저장되지 않은 변경사항"]}),!c&&i&&e.jsxs(O,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),"저장됨"]})]})]}),r&&e.jsx(F,{className:"border-destructive",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["오류: ",r]})]})})}),x&&e.jsxs(F,{className:"border-yellow-500",children:[e.jsx(J,{children:e.jsx(W,{className:"text-yellow-600",children:"유효성 검증 오류"})}),e.jsx(V,{children:e.jsx("ul",{className:"space-y-1",children:Object.entries(u).map(([D,A])=>e.jsxs("li",{className:"text-sm text-yellow-600",children:["• ",e.jsxs("strong",{children:[D,":"]})," ",A]},D))})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"SettingBox 컴포넌트 테스트"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"실제 SettingBox 컴포넌트를 사용하여 설정을 관리해보세요. 변경사항은 자동으로 저장되며 유효성 검증이 실시간으로 적용됩니다."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{title:"Dashboard 설정",description:"대시보드의 표시 방식과 동작을 설정합니다",settingKey:"dashboardSettings",fields:p,defaultOpen:!0,showResetButton:!0,onFieldChange:(D,A,B)=>{console.log("Dashboard 필드 변경:",{fieldKey:D,newValue:A,updatedSettings:B})}}),e.jsx(Ee,{title:"Statistics 설정",description:"통계 분석의 기본값과 표시 옵션을 설정합니다",settingKey:"statisticsSettings",fields:y,defaultOpen:!1,showResetButton:!0,showSaveButton:!0,onFieldChange:(D,A,B)=>{console.log("Statistics 필드 변경:",{fieldKey:D,newValue:A,updatedSettings:B})}}),e.jsx(Hs,{title:"설정 백업 & 복원",description:"설정을 JSON 파일로 내보내거나 백업 파일에서 가져올 수 있습니다",defaultOpen:!1})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"테스트 액션"}),e.jsx(ae,{children:"다양한 설정 업데이트 시나리오를 테스트합니다"})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(I,{onClick:w,className:"w-full",children:"Dashboard 설정 업데이트 테스트"}),e.jsx(I,{onClick:g,className:"w-full",children:"Statistics 설정 업데이트 테스트"}),e.jsx(I,{onClick:o,variant:"destructive",className:"w-full",children:"유효성 검증 실패 테스트"}),e.jsx(K,{}),e.jsx(I,{onClick:b,variant:"outline",className:"w-full",children:"즉시 저장"}),e.jsxs(I,{onClick:f,variant:"outline",className:"w-full",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"설정 초기화"]}),e.jsx(K,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'📄 Import/Export 기능은 위의 "설정 백업 & 복원" 박스에서 테스트할 수 있습니다.'})]})]}),e.jsxs(F,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"현재 상태"}),e.jsx(ae,{children:"실시간 설정 상태를 표시합니다"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Dashboard 설정 ",j&&e.jsx(O,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"선택된 PEGs:"})," ",(E=h.selectedPegs)==null?void 0:E.join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 NE:"})," ",h.defaultNe||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 Cell ID:"})," ",h.defaultCellId||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"자동 새로고침:"})," ",h.autoRefreshInterval,"초"]})]})]}),e.jsx(K,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Statistics 설정 ",l&&e.jsx(O,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"기본 날짜 범위:"})," ",S.defaultDateRange,"일"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Delta 표시:"})," ",S.showDelta?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"RSD 표시:"})," ",S.showRsd?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"소수점 자릿수:"})," ",S.decimalPlaces]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 PEGs:"})," ",(C=S.defaultPegs)==null?void 0:C.join(", ")]})]})]}),e.jsx(K,{}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"마지막 저장:"})," ",i?i.toLocaleTimeString():"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"저장되지 않은 변경사항:"})," ",c?"있음":"없음"]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"전체 설정 데이터 (개발용)"}),e.jsx(ae,{children:"JSON 형태의 전체 설정 구조를 표시합니다"})]}),e.jsx(V,{children:e.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-xs",children:JSON.stringify(t,null,2)})})]})]})};function Xs(){const[t,s]=n.useState("dashboard"),a=()=>{switch(t){case"dashboard":return e.jsx(we,{});case"results":return e.jsx(is,{});case"statistics":return e.jsx(rs,{});case"preference":return e.jsx(ns,{});case"preference-old":return e.jsx(fs,{});case"preference-test":return e.jsx(Ys,{});case"llm-analysis":return e.jsx(os,{});default:return e.jsx(we,{})}};return e.jsx(js,{children:e.jsx(ls,{activeMenu:t,setActiveMenu:s,children:a()})})}const Qs=({...t})=>{const{theme:s="system"}=Xe();return e.jsx(Qe,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};let T=null,Ne={};function H(t){console.log(`📊 ${t.name}: ${t.value.toFixed(2)}${t.unit||"ms"}`),Ne[t.name]={value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType}}async function Ue(){console.log("🔍 Web Vitals 측정 시작...");try{T||(T=await L(()=>import("./vendor-CPBPwzYD.js").then(t=>t.a8),__vite__mapDeps([1,2,3]))),(T.onCLS||T.getCLS)&&(T.onCLS||T.getCLS)(s=>{H(s)}),(T.onFID||T.getFID)&&(T.onFID||T.getFID)(s=>{H(s)}),(T.onFCP||T.getFCP)&&(T.onFCP||T.getFCP)(s=>{H(s)}),(T.onLCP||T.getLCP)&&(T.onLCP||T.getLCP)(s=>{H(s)}),(T.onTTFB||T.getTTFB)&&(T.onTTFB||T.getTTFB)(s=>{H(s)})}catch(t){console.warn("⚠️ Web Vitals 측정 실패:",t),Zs()}}function Zs(){if(typeof window<"u"&&window.performance){window.addEventListener("load",()=>{const s=performance.now();H({name:"PageLoad",value:s,rating:s<2e3?"good":s<4e3?"needs-improvement":"poor"})});let t=!1;["click","keydown","touchstart"].forEach(s=>{document.addEventListener(s,()=>{if(!t){t=!0;const a=performance.now();H({name:"FirstInteraction",value:a,rating:a<1e3?"good":a<3e3?"needs-improvement":"poor"})}},{once:!0})})}}function Ge(){return Ne}function qe(t=Ne){const s={CLS:{good:.1,needsImprovement:.25},FID:{good:100,needsImprovement:300},FCP:{good:1800,needsImprovement:3e3},LCP:{good:2500,needsImprovement:4e3},TTFB:{good:800,needsImprovement:1800}},a={};return Object.entries(t).forEach(([r,c])=>{const i=s[r];i&&(c.value<=i.good?a[r]="good":c.value<=i.needsImprovement?a[r]="needs-improvement":a[r]="poor")}),a}function Ks(){const t=Ge(),s=qe(t),a={timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,vitals:t,evaluation:s,summary:{totalMetrics:Object.keys(t).length,goodMetrics:Object.values(s).filter(r=>r==="good").length,poorMetrics:Object.values(s).filter(r=>r==="poor").length}};return console.log("📊 성능 리포트:",a),a}const ea=Object.freeze(Object.defineProperty({__proto__:null,evaluatePerformance:qe,generatePerformanceReport:Ks,getVitalsData:Ge,measureWebVitals:Ue},Symbol.toStringTag,{value:"Module"}));typeof window<"u"&&(Ue(),setTimeout(()=>{L(async()=>{const{generatePerformanceReport:t}=await Promise.resolve().then(()=>ea);return{generatePerformanceReport:t}},void 0).then(({generatePerformanceReport:t})=>{t()})},5e3));Ze.createRoot(document.getElementById("root")).render(e.jsxs(n.StrictMode,{children:[e.jsx(Xs,{}),e.jsx(Qs,{position:"top-right",richColors:!0})]}));export{O as B,F as C,cs as D,ye as I,G as L,_s as S,fe as T,z as a,J as b,W as c,V as d,I as e,Ss as f,ys as g,Cs as h,Es as i,ks as j,Ps as k,Is as l,K as m,ae as n,oe as o,Ee as p,Hs as q,N as r,Ht as s,ia as t,Ns as u,oa as v,Ds as w,gs as x,ps as y,xs as z};
