import{r as s,M as e}from"./vendor-D_Wz334c.js";import{f as w,g as T,B as t,a as h}from"./index-BAtDSpDQ.js";import{T as R,a as E,b as S,c as v}from"./scroll-area-DLqPd2TV.js";import A from"./AdvancedChart-OyYhNMkM.js";import O from"./BasicComparison-BgaF1uep.js";import{g as I,T as P,C as B}from"./icon-vendor-DhUEaqm7.js";import"./utils-vendor-DrCDvq1f.js";import"./ui-vendor-D1gbbhYx.js";import"./chart-vendor-C0q5LQDY.js";import"./ComparisonChart-DQBTrcac.js";const oe=()=>{const{settings:a,saving:j,error:b}=w(),l=a.defaultDateRange||7,i=a.defaultNe||"",c=a.defaultCellId||"",o=a.decimalPlaces||2,u=a.showComparisonOptions!==!1,m=a.autoCalculateStats!==!1,[L,C]=s.useState({startDate:new Date(Date.now()-l*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],ne:i,cellid:c}),[p,M]=s.useState([]),{settings:d}=T();d!=null&&d.databaseSettings;const[k,_]=s.useState({status:"idle",message:""}),[F,K]=s.useState(null),[U,$]=s.useState(""),[q,G]=s.useState(!1),[Q,N]=s.useState([]),[V,y]=s.useState([]),[z,H]=s.useState([]),[J,W]=s.useState([]),D=[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Success Rate"},{value:"erab",label:"ERAB Success Rate"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"},{value:"se",label:"Spectral Efficiency"},{value:"dl_thp",label:"DL Throughput"},{value:"ul_int",label:"UL Interference"}],[X,Y]=s.useState(D);return s.useEffect(()=>{console.log("[Statistics] 설정 변경 감지:",{defaultDateRange:l,defaultNe:i,defaultCellId:c,decimalPlaces:o}),C(n=>({...n,startDate:new Date(Date.now()-l*24*60*60*1e3).toISOString().split("T")[0],ne:i,cellid:c}))},[l,i,c]),s.useEffect(()=>{(async()=>{var g,x;try{console.info("[Statistics] Fetching master PEGs/Cells");const[r,f]=await Promise.all([h.get("/api/master/pegs"),h.get("/api/master/cells")]);N(r.data.pegs||[]),y(f.data.cells||[]),console.info("[Statistics] Master loaded:",((g=r.data.pegs)==null?void 0:g.length)||0,((x=f.data.cells)==null?void 0:x.length)||0)}catch(r){console.error("Error fetching master data:",r)}})()},[]),p.length>0&&Object.keys(p[0]).filter(n=>n!=="time"),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Statistics"}),e.jsxs("p",{className:"text-muted-foreground",children:["기본 날짜 범위: ",l,"일 • 소수점: ",o,"자리",i&&` • 기본 NE: ${i}`,c&&` • 기본 Cell: ${c}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j&&e.jsxs(t,{variant:"secondary",className:"text-xs",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"설정 저장 중"]}),b&&e.jsx(t,{variant:"destructive",className:"text-xs",children:"설정 오류"}),m&&e.jsxs(t,{variant:"outline",className:"text-xs",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"자동 통계 계산"]}),u&&e.jsxs(t,{variant:"outline",className:"text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"비교 옵션 활성"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(t,{variant:"default",children:["기본 기간: ",l,"일"]}),e.jsxs(t,{variant:"outline",children:["소수점: ",o,"자리"]}),m&&e.jsx(t,{variant:"secondary",children:"자동 통계 계산"}),u&&e.jsx(t,{variant:"secondary",children:"비교 옵션"})]}),e.jsxs(R,{defaultValue:"basic",className:"w-full",children:[e.jsxs(E,{className:"grid w-full grid-cols-2",children:[e.jsx(S,{value:"basic",children:"Basic Analysis"}),e.jsx(S,{value:"advanced",children:"Advanced Analysis"})]}),e.jsx(v,{value:"basic",className:"space-y-6",children:e.jsx(O,{})}),e.jsx(v,{value:"advanced",className:"space-y-6",children:e.jsx(A,{})})]})]})};export{oe as default};
