const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard.optimized-D2B2BWEo.js","assets/react-vendor-BbkKAD8O.js","assets/vendor-B4aOkbPy.js","assets/ui-vendor-BA32w1ww.js","assets/chart-vendor-DLa56ojw.js","assets/utils-vendor-DgsWbSrd.js","assets/Statistics-CHSx6E93.js","assets/scroll-area-E1Oa0Jgs.js","assets/AdvancedChart-Bw2EyRDn.js","assets/BasicComparison-BEtCHXKc.js","assets/ComparisonChart-DO7zaJaz.js","assets/PreferenceManager-Dxqpzujz.js","assets/ResultsList-DzzuvtLw.js","assets/ResultDetail-CQuUO92x.js","assets/SummaryReport-BWra6378.js"])))=>i.map(i=>d[i]);
import{j as e,S as _e,r as n,C as Je,D as We,F as He,T as Ye,d as ke,e as Qe,f as Xe,h as Ze,i as Ke,X as es,k as ss,P as ts,O as as,l as rs,U as Ee,m as ns,n as ue,o as is,p as Ce,q as ls,s as os,t as cs,u as ds,v as us,I as ms,w as me,V as gs,x as xs,y as hs,z as ps,B as fs,E as vs,G as Z,H as bs,J as js,K as fe,L as ys,M as Ns,N as Ss,Q as ws,W as _s,Y as ks,Z as ae,_ as B,$ as Pe,a0 as Es,a1 as Cs,a2 as Ps,a3 as Is,a4 as Ds,a5 as Ts}from"./react-vendor-BbkKAD8O.js";import{f as Rs,C as ve}from"./utils-vendor-DgsWbSrd.js";import{a2 as Os,a3 as Ls,a4 as I,a5 as $s,a6 as As}from"./vendor-B4aOkbPy.js";import"./ui-vendor-BA32w1ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}})();const Fs="modulepreload",zs=function(s){return"/"+s},ye={},O=function(t,a,i){let c=Promise.resolve();if(a&&a.length>0){let m=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),j=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));c=m(a.map(d=>{if(d=zs(d),d in ye)return;ye[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":Fs,p||(f.as="script"),f.crossOrigin="",f.href=d,j&&f.setAttribute("nonce",j),document.head.appendChild(f),p)return new Promise((w,S)=>{f.addEventListener("load",w),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return c.then(m=>{for(const x of m||[])x.status==="rejected"&&r(x.reason);return t().catch(r)})};function _(...s){return Os(Rs(s))}const Vs=ve("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function P({className:s,variant:t,size:a,asChild:i=!1,...c}){const r=i?_e:"button";return e.jsx(r,{"data-slot":"button",className:_(Vs({variant:t,size:a,className:s})),...c})}function z({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:_("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function J({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:_("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function W({className:s,...t}){return e.jsx("div",{"data-slot":"card-title",className:_("leading-none font-semibold",s),...t})}function te({className:s,...t}){return e.jsx("div",{"data-slot":"card-description",className:_("text-muted-foreground text-sm",s),...t})}function V({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:_("px-6",s),...t})}const Bs=n.lazy(()=>O(()=>import("./Dashboard.optimized-D2B2BWEo.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ms=n.lazy(()=>O(()=>import("./Statistics-CHSx6E93.js"),__vite__mapDeps([6,1,2,3,7,8,4,5,9,10]))),Us=n.lazy(()=>O(()=>import("./PreferenceManager-Dxqpzujz.js"),__vite__mapDeps([11,1,2,3,7,5]))),Gs=n.lazy(()=>O(()=>import("./ResultsList-DzzuvtLw.js"),__vite__mapDeps([12,1,2,3,13,7,4,5]))),qs=n.lazy(()=>O(()=>import("./SummaryReport-BWra6378.js"),__vite__mapDeps([14,1,2,3,5])));n.lazy(()=>O(()=>import("./AdvancedChart-Bw2EyRDn.js"),__vite__mapDeps([8,1,2,3,4,5])));n.lazy(()=>O(()=>import("./ComparisonChart-DO7zaJaz.js"),__vite__mapDeps([10,1,2,3,4,5])));n.lazy(()=>O(()=>import("./BasicComparison-BEtCHXKc.js"),__vite__mapDeps([9,1,2,3,7,10,4,5])));n.lazy(()=>O(()=>import("./ResultDetail-CQuUO92x.js"),__vite__mapDeps([13,1,2,3,7,4,5])));const pe=()=>O(()=>import("./Dashboard.optimized-D2B2BWEo.js"),__vite__mapDeps([0,1,2,3,4,5])),Ie=()=>O(()=>import("./Statistics-CHSx6E93.js"),__vite__mapDeps([6,1,2,3,7,8,4,5,9,10])),De=()=>O(()=>import("./PreferenceManager-Dxqpzujz.js"),__vite__mapDeps([11,1,2,3,7,5])),Te=()=>O(()=>import("./ResultsList-DzzuvtLw.js"),__vite__mapDeps([12,1,2,3,13,7,4,5])),Js=()=>O(()=>import("./SummaryReport-BWra6378.js"),__vite__mapDeps([14,1,2,3,5])),Ws=()=>O(()=>import("./AdvancedChart-Bw2EyRDn.js"),__vite__mapDeps([8,1,2,3,4,5])),Hs=()=>O(()=>import("./ComparisonChart-DO7zaJaz.js"),__vite__mapDeps([10,1,2,3,4,5])),Ys=()=>{if("connection"in navigator){const t=navigator.connection.effectiveType;console.log(`🌐 네트워크 속도: ${t}`),t==="4g"||t==="3g"?(console.log("🚀 빠른 네트워크 감지 - 컴포넌트 프리로딩 시작"),setTimeout(()=>{pe().catch(console.warn),Ie().catch(console.warn)},1e3),setTimeout(()=>{De().catch(console.warn),Te().catch(console.warn)},2e3),setTimeout(()=>{Ws().catch(console.warn),Hs().catch(console.warn)},3e3)):console.log("📶 느린 네트워크 - 필요시에만 로드")}else console.log("📶 네트워크 정보 불가 - 기본 프리로딩"),setTimeout(()=>{pe().catch(console.warn)},2e3)},re=({name:s="컴포넌트"})=>e.jsxs("div",{className:"flex items-center justify-center min-h-[200px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[s," 로딩 중..."]})]}),Ne=({...s})=>e.jsx(n.Suspense,{fallback:e.jsx(re,{name:"Dashboard"}),children:e.jsx(Bs,{...s})}),Qs=({...s})=>e.jsx(n.Suspense,{fallback:e.jsx(re,{name:"Statistics"}),children:e.jsx(Ms,{...s})}),Xs=({...s})=>e.jsx(n.Suspense,{fallback:e.jsx(re,{name:"Preference"}),children:e.jsx(Us,{...s})}),Zs=({...s})=>e.jsx(n.Suspense,{fallback:e.jsx(re,{name:"분석 결과"}),children:e.jsx(Gs,{...s})}),Ks=({...s})=>e.jsx(n.Suspense,{fallback:e.jsx(re,{name:"요약 리포트"}),children:e.jsx(qs,{...s})}),et=({children:s,activeMenu:t,setActiveMenu:a})=>{const i=[{id:"dashboard",label:"Dashboard",icon:Je,preload:pe},{id:"results",label:"분석 결과",icon:We,preload:Te},{id:"summary",label:"Summary Report",icon:He,preload:Js},{id:"statistics",label:"Statistics",icon:Ye,preload:Ie},{id:"preference",label:"Preference",icon:ke,preload:De}];n.useEffect(()=>{Ys()},[]);const c=r=>{r.preload&&t!==r.id&&(console.log(`🎯 메뉴 호버 감지 - ${r.label} 프리로딩 시작`),r.preload().catch(m=>{console.warn(`⚠️ ${r.label} 프리로딩 실패:`,m)}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"3GPP KPI Dashboard"})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-64 bg-white shadow-sm min-h-screen",children:e.jsx("nav",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:i.map(r=>{const m=r.icon;return e.jsxs(P,{variant:t===r.id?"default":"ghost",className:"w-full justify-start",onClick:()=>a(r.id),onMouseEnter:()=>c(r),children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),r.label]},r.id)})})})}),e.jsx("main",{className:"flex-1 p-6",children:s})]})]})};function be({className:s,type:t,...a}){return e.jsx("input",{type:t,"data-slot":"input",className:_("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...a})}function M({className:s,...t}){return e.jsx(Qe,{"data-slot":"label",className:_("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function he({className:s,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:_("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}function st({...s}){return e.jsx(Xe,{"data-slot":"dialog",...s})}function tt({...s}){return e.jsx(rs,{"data-slot":"dialog-trigger",...s})}function at({...s}){return e.jsx(ts,{"data-slot":"dialog-portal",...s})}function rt({className:s,...t}){return e.jsx(as,{"data-slot":"dialog-overlay",className:_("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function nt({className:s,children:t,...a}){return e.jsxs(at,{"data-slot":"dialog-portal",children:[e.jsx(rt,{}),e.jsxs(Ze,{"data-slot":"dialog-content",className:_("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a,children:[t,e.jsxs(Ke,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(es,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function it({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:_("flex flex-col gap-2 text-center sm:text-left",s),...t})}function lt({className:s,...t}){return e.jsx(ss,{"data-slot":"dialog-title",className:_("text-lg leading-none font-semibold",s),...t})}const ot="http://localhost:8000",U=Ls.create({baseURL:ot,timeout:15e3});U.interceptors.response.use(s=>s,s=>{var a,i;const t=((i=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:i.detail)||(s==null?void 0:s.message)||"알 수 없는 오류가 발생했습니다.";return I.error(`요청 실패: ${t}`),Promise.reject(s)});const ct=()=>{const[s,t]=n.useState([]),[a,i]=n.useState(null),[c,r]=n.useState(!1),[m,x]=n.useState({name:"",description:"",config:{}}),[j,d]=n.useState(!0),[p,g]=n.useState(`{
  "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
}`),[f,w]=n.useState(`{
  "availability": { "peg_like": ["Accessibility_%"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`);n.useEffect(()=>{S()},[]);const S=async()=>{var l;try{d(!0);const b=await U.get("/api/preference/settings",{params:{user_id:"default"}});if((l=b.data)!=null&&l.data){const N=b.data.data,D=[{id:N.id||"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:N.dashboard_settings,statisticsSettings:N.statistics_settings,notificationSettings:N.notification_settings,theme:N.theme,language:N.language}}];t(D),D.length>0&&i(D[0])}}catch(b){console.error("Error fetching preferences:",b);const N=[{id:"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:{selected_pegs:[],selected_nes:[],selected_cell_ids:[],auto_refresh:!0,refresh_interval:30},statisticsSettings:{date_range_1:{},date_range_2:{},comparison_options:{show_delta:!0,show_rsd:!0,show_percentage:!0,decimal_places:2,chart_type:"bar"}},theme:"light",language:"ko"}}];t(N),i(N[0])}finally{d(!1)}},y=async()=>{try{const l={dashboardLayout:"grid",defaultKPIs:["availability","rrc","erab"],defaultDateRange:7,defaultNEs:["nvgnb#10000","nvgnb#20000"],defaultCellIDs:["2010","2011"],chartSettings:{showGrid:!0,showLegend:!0,lineWidth:2}};await U.post("/api/preferences",{...m,config:l}),x({name:"",description:"",config:{}}),r(!1),S()}catch(l){console.error("Error creating preference:",l)}},o=async l=>{try{await U.delete(`/api/preferences/${l}`),S(),(a==null?void 0:a.id)===l&&i(null)}catch(b){console.error("Error deleting preference:",b)}},h=l=>{const b=JSON.stringify(l,null,2),N="data:application/json;charset=utf-8,"+encodeURIComponent(b),D=`${l.name.replace(/\s+/g,"_")}_preference.json`,E=document.createElement("a");E.setAttribute("href",N),E.setAttribute("download",D),E.click()},v=l=>{const b=l.target.files[0];if(b){const N=new FileReader;N.onload=async D=>{try{const E=JSON.parse(D.target.result);await U.post("/api/preferences",{name:`${E.name} (Imported)`,description:E.description,config:E.config}),S()}catch(E){console.error("Error importing preference:",E)}},N.readAsText(b)}};return j?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsx(z,{children:e.jsx(V,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Loading preferences..."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:".json",onChange:v,style:{display:"none"},id:"import-file"}),e.jsxs(P,{variant:"outline",onClick:()=>document.getElementById("import-file").click(),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Import"]}),e.jsxs(st,{open:c,onOpenChange:r,children:[e.jsx(tt,{asChild:!0,children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"New Preference"]})}),e.jsxs(nt,{children:[e.jsx(it,{children:e.jsx(lt,{children:"Create New Preference"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"name",children:"Name"}),e.jsx(be,{id:"name",value:m.name,onChange:l=>x(b=>({...b,name:l.target.value})),placeholder:"Enter preference name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"description",children:"Description"}),e.jsx(he,{id:"description",value:m.description,onChange:l=>x(b=>({...b,description:l.target.value})),placeholder:"Enter preference description"})]}),e.jsx(P,{onClick:y,className:"w-full",children:"Create Preference"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Saved Preferences"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No preferences saved yet"}):s.map(l=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${(a==null?void 0:a.id)===l.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>i(l),children:[e.jsx("div",{className:"font-medium",children:l.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:l.description})]},l.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(W,{children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>h(a),className:"flex items-center gap-1",children:[e.jsx(ue,{className:"h-3 w-3"}),"Export"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(a.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(is,{className:"h-3 w-3"}),"Delete"]})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Configuration"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:JSON.stringify(a.config,null,2)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Options Reference"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:`{
  "dashboardLayout": "grid", // options: "grid", "masonry", "single"
  "defaultKPIs": ["availability", "rrc", "erab"],
  "defaultDateRange": 7,       // days. options: 1, 7, 14, 30, 90
  "defaultNEs": ["nvgnb#10000", "nvgnb#20000"],   // array of strings
  "defaultCellIDs": ["2010", "2011"],            // array of strings
  "availableKPIs": [                                 // KPI picker list
    { "value": "availability", "label": "Availability (%)", "threshold": 99.0 },
    { "value": "rrc", "label": "RRC Success Rate (%)", "threshold": 98.5 }
  ],
  "chartSettings": {
    "showGrid": true,     // boolean
    "showLegend": true,   // boolean
    "lineWidth": 2        // integer (1..4)
    // optional: "palette": "default"  // options: "default", "pastel", "vivid"
  },
  "derived_pegs": {        // optional: custom formulas, name: expression
    "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
  }
}`})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Derived PEGs (JSON)"}),e.jsx(he,{value:p,onChange:l=>g(l.target.value),rows:8,placeholder:`{
  "peg_name": "A/B*100"
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=JSON.parse(p),b=await U.put(`/api/preferences/${a.id}/derived-pegs`,{derived_pegs:l});i(N=>({...N,config:{...(N==null?void 0:N.config)||{},derived_pegs:b.data.derived_pegs}}))}catch(l){console.error("Invalid JSON or update failed",l)}},children:"Save Derived PEGs"}),e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=await U.get(`/api/preferences/${a.id}/derived-pegs`);g(JSON.stringify(l.data.derived_pegs||{},null,2))}catch(l){console.error("Fetch derived pegs failed",l)}},children:"Load from Server"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"KPI Mappings (JSON)"}),e.jsx(he,{value:f,onChange:l=>w(l.target.value),rows:8,placeholder:`{
  "availability": { "peg_names": ["Accessibility_Attempts","Accessibility_Success"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=JSON.parse(f),b={...(a==null?void 0:a.config)||{},kpiMappings:l};await U.put(`/api/preferences/${a.id}`,{name:a.name,description:a.description,config:b}),i(N=>({...N||{},config:b})),I.success("KPI mappings saved")}catch(l){console.error("Invalid JSON or save failed",l),I.error("Save failed")}},children:"Save KPI Mappings"}),e.jsx(P,{variant:"outline",onClick:()=>{var l;try{const b=((l=a==null?void 0:a.config)==null?void 0:l.kpiMappings)||{};w(JSON.stringify(b,null,2))}catch{w("{}")}},children:"Load from Preference"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{className:"flex items-center gap-2",onClick:async()=>{var l,b,N,D,E;try{if(!a)return;const R={dashboard_settings:((l=a.config)==null?void 0:l.dashboardSettings)||{},statistics_settings:((b=a.config)==null?void 0:b.statisticsSettings)||{},notification_settings:((N=a.config)==null?void 0:N.notificationSettings)||{},theme:((D=a.config)==null?void 0:D.theme)||"light",language:((E=a.config)==null?void 0:E.language)||"ko"};await U.put("/api/preference/settings",R,{params:{user_id:"default"}}),I.success("Preference saved"),await S()}catch(R){console.error("Failed to save preference",R),I.error("Save failed")}},children:[e.jsx(Ce,{className:"h-4 w-4"}),"Save Preference"]}),e.jsx(P,{variant:"default",onClick:()=>{try{if(!a)return;localStorage.setItem("activePreference",JSON.stringify(a)),I.success("Applied to Dashboard")}catch(l){console.error("Failed to apply to dashboard",l),I.error("Apply failed")}},children:"Apply to Dashboard"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"변경사항을 저장하려면 Save Preference, 대시보드에 적용하려면 Apply to Dashboard를 누르세요."})]})})]}):e.jsx(z,{children:e.jsx(V,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Select a preference to view its details"})})})})]})]})},Q={dashboardSettings:{selectedPegs:["availability","rrc","erab"],defaultNe:"",defaultCellId:"",autoRefreshInterval:30,chartStyle:"line",showLegend:!0,showGrid:!0,theme:"light"},statisticsSettings:{defaultDateRange:7,comparisonEnabled:!0,showDelta:!0,showRsd:!0,defaultPegs:["availability","rrc"],chartType:"bar",decimalPlaces:2,autoAnalysis:!1},notificationSettings:{enableToasts:!0,enableSounds:!1,saveNotification:!0,errorNotification:!0},generalSettings:{language:"ko",timezone:"Asia/Seoul",dateFormat:"YYYY-MM-DD",numberFormat:"comma"}},dt={settings:Q,loading:!1,saving:!1,error:null,lastSaved:null,hasUnsavedChanges:!1,userId:"default",initialized:!1},ut=(s,t)=>{switch(t.type){case"SET_LOADING":return{...s,loading:t.payload,error:t.payload?null:s.error};case"SET_SAVING":return{...s,saving:t.payload};case"SET_ERROR":return{...s,error:t.payload,loading:!1,saving:!1};case"SET_SETTINGS":return{...s,settings:t.payload,error:null,initialized:!0,hasUnsavedChanges:!1};case"UPDATE_SETTINGS":return{...s,settings:{...s.settings,...t.payload},hasUnsavedChanges:!0};case"SAVE_SUCCESS":return{...s,saving:!1,error:null,lastSaved:new Date,hasUnsavedChanges:!1};case"RESET_SETTINGS":return{...s,settings:Q,hasUnsavedChanges:!0};default:return s}},Re=n.createContext(null),mt=({children:s})=>{var y,o;const[t,a]=n.useReducer(ut,dt),i=n.useRef(null),c=n.useRef(!0),r=n.useCallback((h,v=null)=>{console.log(`[PreferenceContext] ${h}`,v||"")},[]),m=n.useCallback((h,v=null)=>{console.error(`[PreferenceContext] ${h}`,v)},[]),x=n.useCallback(async()=>{var h,v;if(c.current)try{a({type:"SET_LOADING",payload:!0}),r("사용자 설정 로드 시작"),r("Mock 데이터 사용 (API 문제로 인한 임시 조치)");const l={...Q,dashboardSettings:{...Q.dashboardSettings,selectedPegs:["availability","rrc","erab","sar"],defaultNe:"NE_001",defaultCellId:"Cell_001"}};if(await new Promise(b=>setTimeout(b,500)),!c.current)return;a({type:"SET_SETTINGS",payload:l}),r("사용자 설정 로드 완료",l),(h=t.settings.notificationSettings)!=null&&h.enableToasts&&I.success("설정을 불러왔습니다")}catch(l){m("설정 로드 실패",l),a({type:"SET_ERROR",payload:"설정을 불러오는데 실패했습니다."}),(v=t.settings.notificationSettings)!=null&&v.enableToasts&&I.error("설정 로드 실패: "+(l.message||"알 수 없는 오류"))}finally{a({type:"SET_LOADING",payload:!1})}},[t.userId,(y=t.settings.notificationSettings)==null?void 0:y.enableToasts,r,m]),j=n.useCallback(async(h=null)=>{var l,b;if(!c.current)return;const v=h||t.settings;try{if(a({type:"SET_SAVING",payload:!0}),r("사용자 설정 저장 시작",v),await new Promise(N=>setTimeout(N,300)),!c.current)return;a({type:"SAVE_SUCCESS"}),r("사용자 설정 저장 완료"),(l=v.notificationSettings)!=null&&l.saveNotification&&I.success("설정이 저장되었습니다")}catch(N){m("설정 저장 실패",N),a({type:"SET_ERROR",payload:"설정 저장에 실패했습니다."}),(b=v.notificationSettings)!=null&&b.errorNotification&&I.error("설정 저장 실패: "+(N.message||"알 수 없는 오류"))}},[t.settings,t.userId,r,m]),d=n.useCallback(h=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{r("디바운싱된 자동 저장 실행"),j(h)},500)},[j,r]),p=n.useCallback(h=>{r("설정 업데이트",h),a({type:"UPDATE_SETTINGS",payload:h});const v={...t.settings,...h};d(v)},[t.settings,d,r]),g=n.useCallback(()=>(i.current&&(clearTimeout(i.current),i.current=null),r("즉시 저장 실행"),j()),[j,r]),f=n.useCallback(()=>{var h;r("설정 초기화"),a({type:"RESET_SETTINGS"}),d(Q),(h=t.settings.notificationSettings)!=null&&h.enableToasts&&I.info("설정이 초기화되었습니다")},[d,(o=t.settings.notificationSettings)==null?void 0:o.enableToasts,r]),w=n.useCallback(()=>{a({type:"SET_ERROR",payload:null})},[]);n.useEffect(()=>(r("PreferenceProvider 초기화 시작"),x(),()=>{c.current=!1,i.current&&clearTimeout(i.current),r("PreferenceProvider 정리 완료")}),[x,r]);const S={...t,updateSettings:p,saveImmediately:g,resetSettings:f,clearError:w,loadSettings:x,defaultSettings:Q,logInfo:r,logError:m};return e.jsx(Re.Provider,{value:S,children:s})},gt=()=>{const s=n.useContext(Re);if(!s)throw new Error("usePreference는 PreferenceProvider 내부에서만 사용할 수 있습니다.");return s},Se={dashboardSettings:{selectedPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 PEG를 선택해야 합니다."},autoRefreshInterval:{required:!0,type:"number",min:5,max:300,message:"자동 새로고침 간격은 5초~300초 사이여야 합니다."},defaultNe:{type:"string",maxLength:50,message:"NE ID는 50자를 초과할 수 없습니다."},defaultCellId:{type:"string",maxLength:50,message:"Cell ID는 50자를 초과할 수 없습니다."}},statisticsSettings:{defaultDateRange:{required:!0,type:"number",min:1,max:365,message:"기본 날짜 범위는 1일~365일 사이여야 합니다."},decimalPlaces:{required:!0,type:"number",min:0,max:6,message:"소수점 자릿수는 0~6자리 사이여야 합니다."},defaultPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 기본 PEG를 선택해야 합니다."}}},ne=()=>{const s=gt(),t=n.useRef({}),a=n.useCallback((d,p=null)=>{const g={},f=p?{[p]:Se[p]}:Se;return Object.entries(f).forEach(([w,S])=>{d[w]&&Object.entries(S).forEach(([y,o])=>{const h=d[w][y],v=`${w}.${y}`;if(o.required&&(h==null||h==="")){g[v]=o.message||`${y}는 필수 항목입니다.`;return}if(!(h==null||h==="")){if(o.type==="array"&&!Array.isArray(h)){g[v]=o.message||`${y}는 배열이어야 합니다.`;return}if(o.type==="number"&&typeof h!="number"){g[v]=o.message||`${y}는 숫자여야 합니다.`;return}if(o.type==="string"&&typeof h!="string"){g[v]=o.message||`${y}는 문자열이어야 합니다.`;return}if(o.type==="number"){if(o.min!==void 0&&h<o.min){g[v]=o.message||`${y}는 ${o.min} 이상이어야 합니다.`;return}if(o.max!==void 0&&h>o.max){g[v]=o.message||`${y}는 ${o.max} 이하여야 합니다.`;return}}if(o.type==="array"){if(o.minLength!==void 0&&h.length<o.minLength){g[v]=o.message||`${y}는 최소 ${o.minLength}개 항목이 필요합니다.`;return}if(o.maxLength!==void 0&&h.length>o.maxLength){g[v]=o.message||`${y}는 최대 ${o.maxLength}개 항목만 허용됩니다.`;return}}if(o.type==="string"){if(o.minLength!==void 0&&h.length<o.minLength){g[v]=o.message||`${y}는 최소 ${o.minLength}자 이상이어야 합니다.`;return}if(o.maxLength!==void 0&&h.length>o.maxLength){g[v]=o.message||`${y}는 최대 ${o.maxLength}자까지 허용됩니다.`;return}}}})}),g},[]),i=n.useCallback((d,p=null)=>{var w;s.logInfo("설정 업데이트 및 검증 시작",{newSettings:d,section:p});const g=p?{...s.settings,[p]:{...s.settings[p],...d[p]}}:{...s.settings,...d},f=a(g,p);if(t.current=f,Object.keys(f).length>0){s.logError("설정 유효성 검증 실패",f);const S=Object.values(f)[0];return(w=s.settings.notificationSettings)!=null&&w.errorNotification&&I.error(`설정 오류: ${S}`),!1}return s.updateSettings(d),s.logInfo("설정 업데이트 완료"),!0},[s,a]),c=n.useCallback((d=null)=>{var p,g;try{const f={settings:s.settings,metadata:{exportedAt:new Date().toISOString(),version:"1.0.0",userId:s.userId}},w=JSON.stringify(f,null,2),S=new Blob([w],{type:"application/json"}),y=document.createElement("a");return y.href=URL.createObjectURL(S),y.download=d||`preference-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(y.href),s.logInfo("설정 내보내기 완료",{filename:y.download}),(p=s.settings.notificationSettings)!=null&&p.enableToasts&&I.success("설정이 파일로 내보내졌습니다"),!0}catch(f){return s.logError("설정 내보내기 실패",f),(g=s.settings.notificationSettings)!=null&&g.errorNotification&&I.error("설정 내보내기 실패: "+f.message),!1}},[s]),r=n.useCallback(d=>new Promise((p,g)=>{const f=new FileReader;f.onload=w=>{var S,y;try{const o=JSON.parse(w.target.result);if(!o.settings)throw new Error("유효하지 않은 설정 파일 형식입니다.");const h=a(o.settings);if(Object.keys(h).length>0){const v=Object.values(h).join(", ");throw new Error(`설정 유효성 검증 실패: ${v}`)}s.updateSettings(o.settings),s.logInfo("설정 가져오기 완료",o.settings),(S=s.settings.notificationSettings)!=null&&S.enableToasts&&I.success("설정이 성공적으로 가져와졌습니다"),p(o.settings)}catch(o){s.logError("설정 가져오기 실패",o),(y=s.settings.notificationSettings)!=null&&y.errorNotification&&I.error("설정 가져오기 실패: "+o.message),g(o)}},f.onerror=()=>{var S;const w=new Error("파일 읽기 실패");s.logError("파일 읽기 실패",w),(S=s.settings.notificationSettings)!=null&&S.errorNotification&&I.error("파일을 읽을 수 없습니다"),g(w)},f.readAsText(d)}),[s,a]),m=n.useMemo(()=>t.current,[t.current]),x=n.useMemo(()=>Object.keys(m).length>0,[m]),j=n.useMemo(()=>!x,[x]);return{...s,validationErrors:m,hasValidationErrors:x,isValid:j,validateSettings:a,updateSettings:i,exportSettings:c,importSettings:r,dashboardSettings:s.settings.dashboardSettings,statisticsSettings:s.settings.statisticsSettings,notificationSettings:s.settings.notificationSettings,generalSettings:s.settings.generalSettings}},xt=()=>{const{dashboardSettings:s,updateSettings:t,saving:a,error:i,validationErrors:c,logInfo:r}=ne(),m=n.useCallback(j=>(r("Dashboard 설정 업데이트",j),t({dashboardSettings:j},"dashboardSettings")),[t,r]),x=n.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([j])=>j.startsWith("dashboardSettings."))),[c]);return{settings:s,updateSettings:m,saving:a,error:i,validationErrors:x,hasErrors:Object.keys(x).length>0}},ht=()=>{const{statisticsSettings:s,updateSettings:t,saving:a,error:i,validationErrors:c,logInfo:r}=ne(),m=n.useCallback(j=>(r("Statistics 설정 업데이트",j),t({statisticsSettings:j},"statisticsSettings")),[t,r]),x=n.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([j])=>j.startsWith("statisticsSettings."))),[c]);return{settings:s,updateSettings:m,saving:a,error:i,validationErrors:x,hasErrors:Object.keys(x).length>0}},pt=ve("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function L({className:s,variant:t,asChild:a=!1,...i}){const c=a?_e:"span";return e.jsx(c,{"data-slot":"badge",className:_(pt({variant:t}),s),...i})}function X({className:s,orientation:t="horizontal",decorative:a=!0,...i}){return e.jsx(ls,{"data-slot":"separator-root",decorative:a,orientation:t,className:_("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...i})}function ft({className:s,...t}){return e.jsx(os,{"data-slot":"switch",className:_("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(cs,{"data-slot":"switch-thumb",className:_("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function vt({...s}){return e.jsx(ds,{"data-slot":"select",...s})}function bt({...s}){return e.jsx(gs,{"data-slot":"select-value",...s})}function jt({className:s,size:t="default",children:a,...i}){return e.jsxs(us,{"data-slot":"select-trigger","data-size":t,className:_("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[a,e.jsx(ms,{asChild:!0,children:e.jsx(me,{className:"size-4 opacity-50"})})]})}function yt({className:s,children:t,position:a="popper",...i}){return e.jsx(xs,{children:e.jsxs(hs,{"data-slot":"select-content",className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...i,children:[e.jsx(St,{}),e.jsx(ps,{className:_("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(wt,{})]})})}function Nt({className:s,children:t,...a}){return e.jsxs(fs,{"data-slot":"select-item",className:_("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(vs,{children:e.jsx(Z,{className:"size-4"})})}),e.jsx(bs,{children:t})]})}function St({className:s,...t}){return e.jsx(js,{"data-slot":"select-scroll-up-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(fe,{className:"size-4"})})}function wt({className:s,...t}){return e.jsx(ys,{"data-slot":"select-scroll-down-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(me,{className:"size-4"})})}function Oe({className:s,...t}){return e.jsx(Ns,{"data-slot":"checkbox",className:_("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(Ss,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Z,{className:"size-3.5"})})})}function Le({...s}){return e.jsx(ws,{"data-slot":"collapsible",...s})}function $e({...s}){return e.jsx(_s,{"data-slot":"collapsible-trigger",...s})}function Ae({...s}){return e.jsx(ks,{"data-slot":"collapsible-content",...s})}const _t=ve("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Fe({className:s,variant:t,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:_(_t({variant:t}),s),...a})}function ze({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:_("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}const se={text:{placeholder:"텍스트를 입력하세요",maxLength:100},number:{placeholder:"숫자를 입력하세요",min:0,max:999999},select:{placeholder:"선택하세요",options:[]},multiselect:{placeholder:"하나 이상 선택하세요",options:[]},checkbox:{label:"활성화"},switch:{label:"켜기/끄기"}},kt=({field:s,value:t,onChange:a,error:i,disabled:c})=>{var r,m,x,j;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(be,{id:s.key,type:s.type==="number"?"number":"text",value:t||"",onChange:d=>{const p=s.type==="number"?d.target.value===""?"":Number(d.target.value):d.target.value;a(p)},placeholder:s.placeholder||((r=se[s.type])==null?void 0:r.placeholder),maxLength:s.maxLength||((m=se[s.type])==null?void 0:m.maxLength),min:s.min||((x=se[s.type])==null?void 0:x.min),max:s.max||((j=se[s.type])==null?void 0:j.max),disabled:c,className:i?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),i&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),i]})]})},Et=({field:s,value:t,onChange:a,error:i,disabled:c})=>{var r;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(vt,{value:t||"",onValueChange:a,disabled:c,children:[e.jsx(jt,{className:i?"border-destructive":"",children:e.jsx(bt,{placeholder:s.placeholder||se.select.placeholder})}),e.jsx(yt,{children:(r=s.options)==null?void 0:r.map(m=>e.jsx(Nt,{value:m.value,children:m.label},m.value))})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),i&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),i]})]})},Ct=({field:s,value:t,onChange:a,error:i,disabled:c})=>{var x,j;const r=Array.isArray(t)?t:[],m=d=>{const p=r.includes(d)?r.filter(g=>g!==d):[...r,d];a(p)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(M,{className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:`border rounded-md p-3 space-y-2 ${i?"border-destructive":"border-input"}`,children:[(x=s.options)==null?void 0:x.map(d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{id:`${s.key}-${d.value}`,checked:r.includes(d.value),onCheckedChange:()=>m(d.value),disabled:c}),e.jsx(M,{htmlFor:`${s.key}-${d.value}`,className:"text-sm cursor-pointer",children:d.label})]},d.value)),((j=s.options)==null?void 0:j.length)===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"선택 가능한 옵션이 없습니다"})]}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(d=>{var g;const p=(g=s.options)==null?void 0:g.find(f=>f.value===d);return p?e.jsx(L,{variant:"secondary",className:"text-xs",children:p.label},d):null})}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),i&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),i]})]})},Pt=({field:s,value:t,onChange:a,error:i,disabled:c})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(M,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),e.jsx(ft,{id:s.key,checked:!!t,onCheckedChange:a,disabled:c})]}),i&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),i]})]}),we=({title:s,description:t,settingKey:a,fields:i=[],defaultOpen:c=!1,disabled:r=!1,className:m="",onFieldChange:x,showSaveButton:j=!1,showResetButton:d=!1})=>{const[p,g]=n.useState(c),[f,w]=n.useState(!1),{settings:S,updateSettings:y,saving:o,error:h,validationErrors:v,logInfo:l,saveImmediately:b,defaultSettings:N}=ne(),D=S[a]||{},E=n.useMemo(()=>{const k={};return Object.entries(v).forEach(([A,F])=>{if(A.startsWith(`${a}.`)){const le=A.replace(`${a}.`,"");k[le]=F}}),k},[v,a]),R=Object.keys(E).length>0,$=n.useCallback((k,A)=>{l(`SettingBox 필드 변경: ${a}.${k}`,{oldValue:D[k],newValue:A});const F={...D,[k]:A};y({[a]:F}),x==null||x(k,A,F),w(!0)},[a,D,y,x,l]),G=n.useCallback(async()=>{l(`SettingBox 즉시 저장: ${a}`),await b()},[b,l,a]),ie=n.useCallback(()=>{l(`SettingBox 초기화: ${a}`);const k=N[a]||{};y({[a]:k}),w(!1)},[a,y,N,l]),q=n.useCallback(k=>{const A=D[k.key],F=f?E[k.key]:null,Y={field:k,value:A,onChange:ge=>$(k.key,ge),error:F,disabled:r||o};switch(k.type){case"text":case"number":return e.jsx(kt,{...Y},k.key);case"select":return e.jsx(Et,{...Y},k.key);case"multiselect":return e.jsx(Ct,{...Y},k.key);case"switch":case"checkbox":return e.jsx(Pt,{...Y},k.key);default:return e.jsxs("div",{className:"text-sm text-muted-foreground",children:["지원하지 않는 필드 타입: ",k.type]},k.key)}},[D,E,f,r,o,$]);return e.jsx(z,{className:`w-full ${m}`,children:e.jsxs(Le,{open:p,onOpenChange:g,children:[e.jsx($e,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[s,o&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"저장 중"]}),f&&R&&e.jsxs(L,{variant:"destructive",className:"text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"오류"]}),f&&!R&&!o&&e.jsxs(L,{variant:"default",className:"text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"유효"]})]}),t&&e.jsx(te,{children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",className:"text-xs",children:[i.length,"개 설정"]}),p?e.jsx(fe,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})]})]})})}),e.jsx(Ae,{children:e.jsxs(V,{className:"space-y-6",children:[h&&e.jsxs(Fe,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(ze,{children:h})]}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(q)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"설정할 수 있는 항목이 없습니다."}),(j||d||R)&&e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:d&&e.jsxs(P,{variant:"outline",size:"sm",onClick:ie,disabled:r||o,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"초기화"]})}),e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsxs(P,{size:"sm",onClick:G,disabled:r||o||R,children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"저장"]})})]})]})]})})]})})};function It({className:s,value:t,...a}){return e.jsx(Es,{"data-slot":"progress",className:_("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...a,children:e.jsx(Cs,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const de=[{key:"dashboardSettings",label:"Dashboard 설정",description:"선택된 PEG, 차트 스타일, 새로고침 간격 등"},{key:"statisticsSettings",label:"Statistics 설정",description:"기본 날짜 범위, 비교 옵션, 소수점 자릿수 등"},{key:"notificationSettings",label:"알림 설정",description:"토스트, 사운드, 알림 타입 설정"},{key:"generalSettings",label:"일반 설정",description:"언어, 시간대, 날짜 형식 등"}],Dt=({title:s="설정 백업 & 복원",description:t="설정을 JSON 파일로 내보내거나 가져올 수 있습니다",defaultOpen:a=!1,className:i=""})=>{const[c,r]=n.useState(a),[m,x]=n.useState(!1),[j,d]=n.useState(!1),[p,g]=n.useState(0),[f,w]=n.useState(!1),[S,y]=n.useState(null),[o,h]=n.useState(null),[v,l]=n.useState(de.reduce((u,C)=>({...u,[C.key]:!0}),{})),[b,N]=n.useState(""),D=n.useRef(null),{settings:E,exportSettings:R,importSettings:$,hasUnsavedChanges:G,saving:ie,logInfo:q,logError:k}=ne(),A=n.useCallback(async(u="full")=>{d(!0),y(null);try{q("설정 내보내기 시작",{exportType:u,customFileName:b});let C=E;if(u==="partial"){const xe=Object.entries(v).filter(([K,ee])=>ee).map(([K])=>K);if(xe.length===0){I.error("내보낼 설정 섹션을 하나 이상 선택해주세요");return}C=xe.reduce((K,ee)=>(E[ee]&&(K[ee]=E[ee]),K),{}),q("부분 내보내기 선택된 섹션",xe)}const oe=new Date().toISOString().split("T")[0],ce=b.trim()||(u==="partial"?`preference-settings-partial-${oe}.json`:`preference-settings-${oe}.json`);await R(ce)&&(I.success(`설정이 "${ce}" 파일로 내보내졌습니다`),N(""))}catch(C){k("설정 내보내기 실패",C),I.error("설정 내보내기 실패: "+C.message)}finally{d(!1)}},[E,v,b,R,q,k]),F=n.useCallback(async u=>{if(u){x(!0),g(0),y(null);try{if(q("설정 가져오기 시작",{fileName:u.name,fileSize:u.size}),!u.name.toLowerCase().endsWith(".json"))throw new Error("JSON 파일만 지원됩니다");if(u.size>5*1024*1024)throw new Error("파일 크기가 너무 큽니다 (최대 5MB)");g(20);const C=await $(u);g(80),h({name:u.name,size:u.size,importedAt:new Date,sectionsCount:Object.keys(C).length}),g(100),q("설정 가져오기 완료",{fileName:u.name,sectionsImported:Object.keys(C).length}),I.success(`"${u.name}"에서 설정을 성공적으로 가져왔습니다`)}catch(C){k("설정 가져오기 실패",C),y(C.message),I.error("설정 가져오기 실패: "+C.message)}finally{x(!1),setTimeout(()=>{g(0)},3e3)}}},[$,q,k]),le=n.useCallback(u=>{const C=u.target.files[0];C&&(F(C),u.target.value="")},[F]),Y=n.useCallback(u=>{u.preventDefault(),w(!0)},[]),ge=n.useCallback(u=>{u.preventDefault(),w(!1)},[]),Ue=n.useCallback(u=>{u.preventDefault(),w(!1);const C=u.dataTransfer.files;C.length>0&&F(C[0])},[F]),Ge=n.useCallback(u=>{l(C=>({...C,[u]:!C[u]}))},[]),qe=n.useCallback(()=>{const u=Object.values(v).every(Boolean),C=de.reduce((oe,ce)=>({...oe,[ce.key]:!u}),{});l(C)},[v]);return e.jsx(z,{className:`w-full ${i}`,children:e.jsxs(Le,{open:c,onOpenChange:r,children:[e.jsx($e,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ps,{className:"h-5 w-5"}),s,m&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"가져오는 중"]}),j&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"내보내는 중"]}),G&&e.jsxs(L,{variant:"outline",className:"text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"저장되지 않은 변경사항"]})]}),t&&e.jsx(te,{children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs(L,{variant:"default",className:"text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"가져옴"]}),c?e.jsx(fe,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})]})]})})}),e.jsx(Ae,{children:e.jsxs(V,{className:"space-y-6",children:[S&&e.jsxs(Fe,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(ze,{children:S})]}),m&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"파일 가져오는 중..."}),e.jsxs("span",{children:[p,"%"]})]}),e.jsx(It,{value:p,className:"h-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"설정 가져오기"]}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${f?"border-primary bg-primary/5":m?"border-muted bg-muted/20":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,onDragOver:Y,onDragLeave:ge,onDrop:Ue,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Is,{className:`h-8 w-8 mx-auto ${f?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${f?"text-primary":""}`,children:f?"파일을 여기에 놓으세요":"JSON 파일을 드래그하거나 클릭하여 선택하세요"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"최대 5MB, .json 파일만 지원"})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{var u;return(u=D.current)==null?void 0:u.click()},disabled:m,className:"mt-2",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"파일 선택"]})]})}),e.jsx("input",{ref:D,type:"file",accept:".json",onChange:le,style:{display:"none"}}),o&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"마지막 가져온 파일:"}),e.jsx("span",{children:o.name}),e.jsxs(L,{variant:"secondary",className:"text-xs",children:[o.sectionsCount,"개 섹션"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o.importedAt.toLocaleString()})]})]}),e.jsx(X,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"설정 내보내기"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"fileName",className:"text-sm",children:"파일명 (선택사항)"}),e.jsx(be,{id:"fileName",value:b,onChange:u=>N(u.target.value),placeholder:"preference-settings-custom.json",disabled:j}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"비워두면 자동으로 날짜가 포함된 파일명이 생성됩니다"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{className:"text-sm font-medium",children:"내보낼 설정 선택"}),e.jsx(P,{variant:"outline",size:"sm",onClick:qe,disabled:j,children:Object.values(v).every(Boolean)?"전체 해제":"전체 선택"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:de.map(u=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(Oe,{id:u.key,checked:v[u.key],onCheckedChange:()=>Ge(u.key),disabled:j}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(M,{htmlFor:u.key,className:"text-sm font-medium cursor-pointer",children:u.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]})]},u.key))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(P,{onClick:()=>A("full"),disabled:j||ie,className:"flex-1",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"전체 설정 내보내기"]}),e.jsxs(P,{variant:"outline",onClick:()=>A("partial"),disabled:j||ie||Object.values(v).every(u=>!u),className:"flex-1",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"선택된 설정만 내보내기"]})]}),Object.values(v).every(u=>!u)&&e.jsx("p",{className:"text-xs text-destructive",children:"내보낼 설정 섹션을 하나 이상 선택해주세요"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"현재 설정 상태"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:de.map(u=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[u.label,":"]}),e.jsx("span",{className:"text-muted-foreground",children:E[u.key]?"설정됨":"기본값"})]},u.key))}),G&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"저장되지 않은 변경사항이 있습니다"]})]})]})})]})})},Tt=()=>{var D,E;const{settings:s,loading:t,saving:a,error:i,hasUnsavedChanges:c,lastSaved:r,validationErrors:m,hasValidationErrors:x,saveImmediately:j,resetSettings:d,logInfo:p}=ne(),{settings:g,updateSettings:f,hasErrors:w}=xt(),{settings:S,updateSettings:y,hasErrors:o}=ht(),h=()=>{p("Dashboard 설정 테스트 시작"),f({selectedPegs:["availability","rrc","erab","sar","mobility_intra"],defaultNe:"TEST_NE_001",defaultCellId:"TEST_CELL_001",autoRefreshInterval:60})},v=()=>{p("Statistics 설정 테스트 시작"),y({defaultDateRange:14,showDelta:!0,showRsd:!0,decimalPlaces:3,defaultPegs:["availability","rrc","erab"]})},l=()=>{p("유효성 검증 테스트 시작"),f({autoRefreshInterval:500,selectedPegs:[]})},b=[{key:"selectedPegs",type:"multiselect",label:"선택된 PEG 항목",description:"대시보드에 표시할 PEG 항목들을 선택하세요",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"defaultNe",type:"text",label:"기본 NE ID",description:"통계 분석 시 기본으로 사용할 NE ID",placeholder:"NE_001"},{key:"defaultCellId",type:"text",label:"기본 Cell ID",description:"통계 분석 시 기본으로 사용할 Cell ID",placeholder:"Cell_001"},{key:"autoRefreshInterval",type:"number",label:"자동 새로고침 간격 (초)",description:"대시보드 데이터 자동 새로고침 간격",required:!0,min:5,max:300},{key:"chartStyle",type:"select",label:"차트 스타일",description:"대시보드 차트의 기본 스타일",options:[{value:"line",label:"선형 차트"},{value:"bar",label:"막대 차트"},{value:"area",label:"영역 차트"}]},{key:"showLegend",type:"switch",label:"범례 표시",description:"차트에 범례를 표시할지 여부"},{key:"showGrid",type:"switch",label:"격자 표시",description:"차트에 격자를 표시할지 여부"}],N=[{key:"defaultDateRange",type:"number",label:"기본 날짜 범위 (일)",description:"통계 분석 시 기본 날짜 범위",required:!0,min:1,max:365},{key:"showDelta",type:"switch",label:"Delta 값 표시",description:"비교 분석 시 Delta 값을 표시할지 여부"},{key:"showRsd",type:"switch",label:"RSD 값 표시",description:"비교 분석 시 RSD 값을 표시할지 여부"},{key:"decimalPlaces",type:"number",label:"소수점 자릿수",description:"숫자 표시 시 소수점 자릿수",required:!0,min:0,max:6},{key:"defaultPegs",type:"multiselect",label:"기본 PEG 선택",description:"통계 분석 시 기본으로 선택할 PEG 항목들",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"chartType",type:"select",label:"차트 타입",description:"통계 차트의 기본 타입",options:[{value:"bar",label:"막대 차트"},{value:"line",label:"선형 차트"},{value:"scatter",label:"산점도"}]}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Preference 훅 테스트"}),e.jsx("p",{className:"text-muted-foreground",children:"usePreference 훅의 동작을 테스트합니다"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsxs(L,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),"로딩 중"]}),a&&e.jsxs(L,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),"저장 중"]}),c&&e.jsxs(L,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"저장되지 않은 변경사항"]}),!c&&r&&e.jsxs(L,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),"저장됨"]})]})]}),i&&e.jsx(z,{className:"border-destructive",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["오류: ",i]})]})})}),x&&e.jsxs(z,{className:"border-yellow-500",children:[e.jsx(J,{children:e.jsx(W,{className:"text-yellow-600",children:"유효성 검증 오류"})}),e.jsx(V,{children:e.jsx("ul",{className:"space-y-1",children:Object.entries(m).map(([R,$])=>e.jsxs("li",{className:"text-sm text-yellow-600",children:["• ",e.jsxs("strong",{children:[R,":"]})," ",$]},R))})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"SettingBox 컴포넌트 테스트"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"실제 SettingBox 컴포넌트를 사용하여 설정을 관리해보세요. 변경사항은 자동으로 저장되며 유효성 검증이 실시간으로 적용됩니다."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{title:"Dashboard 설정",description:"대시보드의 표시 방식과 동작을 설정합니다",settingKey:"dashboardSettings",fields:b,defaultOpen:!0,showResetButton:!0,onFieldChange:(R,$,G)=>{console.log("Dashboard 필드 변경:",{fieldKey:R,newValue:$,updatedSettings:G})}}),e.jsx(we,{title:"Statistics 설정",description:"통계 분석의 기본값과 표시 옵션을 설정합니다",settingKey:"statisticsSettings",fields:N,defaultOpen:!1,showResetButton:!0,showSaveButton:!0,onFieldChange:(R,$,G)=>{console.log("Statistics 필드 변경:",{fieldKey:R,newValue:$,updatedSettings:G})}}),e.jsx(Dt,{title:"설정 백업 & 복원",description:"설정을 JSON 파일로 내보내거나 백업 파일에서 가져올 수 있습니다",defaultOpen:!1})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(z,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"테스트 액션"}),e.jsx(te,{children:"다양한 설정 업데이트 시나리오를 테스트합니다"})]}),e.jsxs(V,{className:"space-y-3",children:[e.jsx(P,{onClick:h,className:"w-full",children:"Dashboard 설정 업데이트 테스트"}),e.jsx(P,{onClick:v,className:"w-full",children:"Statistics 설정 업데이트 테스트"}),e.jsx(P,{onClick:l,variant:"destructive",className:"w-full",children:"유효성 검증 실패 테스트"}),e.jsx(X,{}),e.jsx(P,{onClick:j,variant:"outline",className:"w-full",children:"즉시 저장"}),e.jsxs(P,{onClick:d,variant:"outline",className:"w-full",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"설정 초기화"]}),e.jsx(X,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'📄 Import/Export 기능은 위의 "설정 백업 & 복원" 박스에서 테스트할 수 있습니다.'})]})]}),e.jsxs(z,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"현재 상태"}),e.jsx(te,{children:"실시간 설정 상태를 표시합니다"})]}),e.jsxs(V,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Dashboard 설정 ",w&&e.jsx(L,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"선택된 PEGs:"})," ",(D=g.selectedPegs)==null?void 0:D.join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 NE:"})," ",g.defaultNe||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 Cell ID:"})," ",g.defaultCellId||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"자동 새로고침:"})," ",g.autoRefreshInterval,"초"]})]})]}),e.jsx(X,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Statistics 설정 ",o&&e.jsx(L,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"기본 날짜 범위:"})," ",S.defaultDateRange,"일"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Delta 표시:"})," ",S.showDelta?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"RSD 표시:"})," ",S.showRsd?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"소수점 자릿수:"})," ",S.decimalPlaces]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 PEGs:"})," ",(E=S.defaultPegs)==null?void 0:E.join(", ")]})]})]}),e.jsx(X,{}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"마지막 저장:"})," ",r?r.toLocaleTimeString():"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"저장되지 않은 변경사항:"})," ",c?"있음":"없음"]})]})]})]})]}),e.jsxs(z,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"전체 설정 데이터 (개발용)"}),e.jsx(te,{children:"JSON 형태의 전체 설정 구조를 표시합니다"})]}),e.jsx(V,{children:e.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-xs",children:JSON.stringify(s,null,2)})})]})]})};function Rt(){const[s,t]=n.useState("dashboard"),a=()=>{switch(s){case"dashboard":return e.jsx(Ne,{});case"results":return e.jsx(Zs,{});case"summary":return e.jsx(Ks,{});case"statistics":return e.jsx(Qs,{});case"preference":return e.jsx(Xs,{});case"preference-old":return e.jsx(ct,{});case"preference-test":return e.jsx(Tt,{});default:return e.jsx(Ne,{})}};return e.jsx(mt,{children:e.jsx(et,{activeMenu:s,setActiveMenu:t,children:a()})})}const Ot=({...s})=>{const{theme:t="system"}=$s();return e.jsx(As,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...s})};let T=null,je={};function H(s){console.log(`📊 ${s.name}: ${s.value.toFixed(2)}${s.unit||"ms"}`),je[s.name]={value:s.value,rating:s.rating,delta:s.delta,navigationType:s.navigationType}}async function Ve(){console.log("🔍 Web Vitals 측정 시작...");try{T||(T=await O(()=>import("./vendor-B4aOkbPy.js").then(s=>s.a7),__vite__mapDeps([2,1,3]))),(T.onCLS||T.getCLS)&&(T.onCLS||T.getCLS)(t=>{H(t)}),(T.onFID||T.getFID)&&(T.onFID||T.getFID)(t=>{H(t)}),(T.onFCP||T.getFCP)&&(T.onFCP||T.getFCP)(t=>{H(t)}),(T.onLCP||T.getLCP)&&(T.onLCP||T.getLCP)(t=>{H(t)}),(T.onTTFB||T.getTTFB)&&(T.onTTFB||T.getTTFB)(t=>{H(t)})}catch(s){console.warn("⚠️ Web Vitals 측정 실패:",s),Lt()}}function Lt(){if(typeof window<"u"&&window.performance){window.addEventListener("load",()=>{const t=performance.now();H({name:"PageLoad",value:t,rating:t<2e3?"good":t<4e3?"needs-improvement":"poor"})});let s=!1;["click","keydown","touchstart"].forEach(t=>{document.addEventListener(t,()=>{if(!s){s=!0;const a=performance.now();H({name:"FirstInteraction",value:a,rating:a<1e3?"good":a<3e3?"needs-improvement":"poor"})}},{once:!0})})}}function Be(){return je}function Me(s=je){const t={CLS:{good:.1,needsImprovement:.25},FID:{good:100,needsImprovement:300},FCP:{good:1800,needsImprovement:3e3},LCP:{good:2500,needsImprovement:4e3},TTFB:{good:800,needsImprovement:1800}},a={};return Object.entries(s).forEach(([i,c])=>{const r=t[i];r&&(c.value<=r.good?a[i]="good":c.value<=r.needsImprovement?a[i]="needs-improvement":a[i]="poor")}),a}function $t(){const s=Be(),t=Me(s),a={timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,vitals:s,evaluation:t,summary:{totalMetrics:Object.keys(s).length,goodMetrics:Object.values(t).filter(i=>i==="good").length,poorMetrics:Object.values(t).filter(i=>i==="poor").length}};return console.log("📊 성능 리포트:",a),a}const At=Object.freeze(Object.defineProperty({__proto__:null,evaluatePerformance:Me,generatePerformanceReport:$t,getVitalsData:Be,measureWebVitals:Ve},Symbol.toStringTag,{value:"Module"}));typeof window<"u"&&(Ve(),setTimeout(()=>{O(async()=>{const{generatePerformanceReport:s}=await Promise.resolve().then(()=>At);return{generatePerformanceReport:s}},void 0).then(({generatePerformanceReport:s})=>{s()})},5e3));Ts.createRoot(document.getElementById("root")).render(e.jsxs(n.StrictMode,{children:[e.jsx(Rt,{}),e.jsx(Ot,{position:"top-right",richColors:!0})]}));export{L as B,z as C,st as D,be as I,M as L,ft as S,he as T,U as a,J as b,W as c,V as d,P as e,ht as f,vt as g,jt as h,bt as i,yt as j,Nt as k,X as l,te as m,ne as n,we as o,Dt as p,_ as q,Vs as r,Oe as s,nt as t,xt as u,it as v,lt as w};
