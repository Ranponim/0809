const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard.optimized-DO7Ym8BC.js","assets/vendor-D_Wz334c.js","assets/utils-vendor-DrCDvq1f.js","assets/icon-vendor-DhUEaqm7.js","assets/chart-vendor-C0q5LQDY.js","assets/ui-vendor-D1gbbhYx.js","assets/Statistics-C1RVr2o_.js","assets/scroll-area-DLqPd2TV.js","assets/AdvancedChart-OyYhNMkM.js","assets/BasicComparison-BgaF1uep.js","assets/ComparisonChart-DQBTrcac.js","assets/PreferenceManager-Dsq0sx8j.js","assets/ResultsList-MfQQdcYa.js","assets/ResultDetail-BoGfniGW.js","assets/SummaryReport-DeyKBxLS.js","assets/LLMAnalysisManager-CCY39miT.js"])))=>i.map(i=>d[i]);
import{a1 as Je,M as e,r as i,a2 as We,a3 as I,a4 as He,a5 as Ye,a6 as Xe}from"./vendor-D_Wz334c.js";import{S as _e,R as Qe,a as Ze,C as Ke,b as es,T as ss,P as ts,O as as,c as rs,d as ns,e as is,f as ls,g as os,h as cs,I as ds,V as us,i as ms,j as gs,k as xs,l as ps,m as hs,n as fs,o as vs,p as bs,q as js,r as ys,s as Ns,t as Ss,u as ws,v as _s,w as ks}from"./ui-vendor-D1gbbhYx.js";import{f as Es,D as fe}from"./utils-vendor-DrCDvq1f.js";import{C as Cs,D as Ps,F as Is,T as Ds,S as ke,B as Ts,X as Rs,U as Ee,P as Ls,a as ue,b as Os,c as Ce,d as me,e as Z,f as ve,g as re,h as B,R as Pe,i as As,j as $s,k as Fs}from"./icon-vendor-DhUEaqm7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function a(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(c){if(c.ep)return;c.ep=!0;const r=a(c);fetch(c.href,r)}})();const zs="modulepreload",Vs=function(s){return"/"+s},ye={},R=function(t,a,n){let c=Promise.resolve();if(a&&a.length>0){let m=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),j=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));c=m(a.map(d=>{if(d=Vs(d),d in ye)return;ye[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":zs,h||(f.as="script"),f.crossOrigin="",f.href=d,j&&f.setAttribute("nonce",j),document.head.appendChild(f),h)return new Promise((w,S)=>{f.addEventListener("load",w),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(m){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=m,window.dispatchEvent(x),!x.defaultPrevented)throw m}return c.then(m=>{for(const x of m||[])x.status==="rejected"&&r(x.reason);return t().catch(r)})};function _(...s){return Je(Es(s))}const Ms=fe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function P({className:s,variant:t,size:a,asChild:n=!1,...c}){const r=n?_e:"button";return e.jsx(r,{"data-slot":"button",className:_(Ms({variant:t,size:a,className:s})),...c})}function V({className:s,...t}){return e.jsx("div",{"data-slot":"card",className:_("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function J({className:s,...t}){return e.jsx("div",{"data-slot":"card-header",className:_("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function W({className:s,...t}){return e.jsx("div",{"data-slot":"card-title",className:_("leading-none font-semibold",s),...t})}function ae({className:s,...t}){return e.jsx("div",{"data-slot":"card-description",className:_("text-muted-foreground text-sm",s),...t})}function M({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:_("px-6",s),...t})}const Bs=i.lazy(()=>R(()=>import("./Dashboard.optimized-DO7Ym8BC.js"),__vite__mapDeps([0,1,2,3,4,5]))),Us=i.lazy(()=>R(()=>import("./Statistics-C1RVr2o_.js"),__vite__mapDeps([6,1,2,7,5,8,3,4,9,10]))),Gs=i.lazy(()=>R(()=>import("./PreferenceManager-Dsq0sx8j.js"),__vite__mapDeps([11,1,2,7,5,3]))),qs=i.lazy(()=>R(()=>import("./ResultsList-MfQQdcYa.js"),__vite__mapDeps([12,1,2,5,3,13,7,4]))),Js=i.lazy(()=>R(()=>import("./SummaryReport-DeyKBxLS.js"),__vite__mapDeps([14,1,2,3,5]))),Ws=i.lazy(()=>R(()=>import("./LLMAnalysisManager-CCY39miT.js"),__vite__mapDeps([15,1,2,3,5])));i.lazy(()=>R(()=>import("./AdvancedChart-OyYhNMkM.js"),__vite__mapDeps([8,1,2,3,4,5])));i.lazy(()=>R(()=>import("./ComparisonChart-DQBTrcac.js"),__vite__mapDeps([10,1,2,3,4,5])));i.lazy(()=>R(()=>import("./BasicComparison-BgaF1uep.js"),__vite__mapDeps([9,1,2,7,5,3,10,4])));i.lazy(()=>R(()=>import("./ResultDetail-BoGfniGW.js"),__vite__mapDeps([13,1,2,7,5,3,4])));const he=()=>R(()=>import("./Dashboard.optimized-DO7Ym8BC.js"),__vite__mapDeps([0,1,2,3,4,5])),Ie=()=>R(()=>import("./Statistics-C1RVr2o_.js"),__vite__mapDeps([6,1,2,7,5,8,3,4,9,10])),De=()=>R(()=>import("./PreferenceManager-Dsq0sx8j.js"),__vite__mapDeps([11,1,2,7,5,3])),Te=()=>R(()=>import("./ResultsList-MfQQdcYa.js"),__vite__mapDeps([12,1,2,5,3,13,7,4])),Hs=()=>R(()=>import("./SummaryReport-DeyKBxLS.js"),__vite__mapDeps([14,1,2,3,5])),Ys=()=>R(()=>import("./LLMAnalysisManager-CCY39miT.js"),__vite__mapDeps([15,1,2,3,5])),Xs=()=>R(()=>import("./AdvancedChart-OyYhNMkM.js"),__vite__mapDeps([8,1,2,3,4,5])),Qs=()=>R(()=>import("./ComparisonChart-DQBTrcac.js"),__vite__mapDeps([10,1,2,3,4,5])),Zs=()=>{if("connection"in navigator){const t=navigator.connection.effectiveType;console.log(`🌐 네트워크 속도: ${t}`),t==="4g"||t==="3g"?(console.log("🚀 빠른 네트워크 감지 - 컴포넌트 프리로딩 시작"),setTimeout(()=>{he().catch(console.warn),Ie().catch(console.warn)},1e3),setTimeout(()=>{De().catch(console.warn),Te().catch(console.warn)},2e3),setTimeout(()=>{Xs().catch(console.warn),Qs().catch(console.warn)},3e3)):console.log("📶 느린 네트워크 - 필요시에만 로드")}else console.log("📶 네트워크 정보 불가 - 기본 프리로딩"),setTimeout(()=>{he().catch(console.warn)},2e3)},K=({name:s="컴포넌트"})=>e.jsxs("div",{className:"flex items-center justify-center min-h-[200px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[s," 로딩 중..."]})]}),Ne=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"Dashboard"}),children:e.jsx(Bs,{...s})}),Ks=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"Statistics"}),children:e.jsx(Us,{...s})}),et=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"Preference"}),children:e.jsx(Gs,{...s})}),st=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"분석 결과"}),children:e.jsx(qs,{...s})}),tt=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"요약 리포트"}),children:e.jsx(Js,{...s})}),at=({...s})=>e.jsx(i.Suspense,{fallback:e.jsx(K,{name:"LLM 분석"}),children:e.jsx(Ws,{...s})}),rt=({children:s,activeMenu:t,setActiveMenu:a})=>{const n=[{id:"dashboard",label:"Dashboard",icon:Cs,preload:he},{id:"results",label:"분석 결과",icon:Ps,preload:Te},{id:"summary",label:"Summary Report",icon:Is,preload:Hs},{id:"statistics",label:"Statistics",icon:Ds,preload:Ie},{id:"preference",label:"Preference",icon:ke,preload:De},{id:"llm-analysis",label:"LLM 분석",icon:Ts,preload:Ys}];i.useEffect(()=>{Zs()},[]);const c=r=>{r.preload&&t!==r.id&&(console.log(`🎯 메뉴 호버 감지 - ${r.label} 프리로딩 시작`),r.preload().catch(m=>{console.warn(`⚠️ ${r.label} 프리로딩 실패:`,m)}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"3GPP KPI Dashboard"})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-64 bg-white shadow-sm min-h-screen",children:e.jsx("nav",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:n.map(r=>{const m=r.icon;return e.jsxs(P,{variant:t===r.id?"default":"ghost",className:"w-full justify-start",onClick:()=>a(r.id),onMouseEnter:()=>c(r),children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),r.label]},r.id)})})})}),e.jsx("main",{className:"flex-1 p-6",children:s})]})]})};function be({className:s,type:t,...a}){return e.jsx("input",{type:t,"data-slot":"input",className:_("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...a})}function U({className:s,...t}){return e.jsx(Qe,{"data-slot":"label",className:_("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function pe({className:s,...t}){return e.jsx("textarea",{"data-slot":"textarea",className:_("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}function nt({...s}){return e.jsx(Ze,{"data-slot":"dialog",...s})}function it({...s}){return e.jsx(rs,{"data-slot":"dialog-trigger",...s})}function lt({...s}){return e.jsx(ts,{"data-slot":"dialog-portal",...s})}function ot({className:s,...t}){return e.jsx(as,{"data-slot":"dialog-overlay",className:_("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function ct({className:s,children:t,...a}){return e.jsxs(lt,{"data-slot":"dialog-portal",children:[e.jsx(ot,{}),e.jsxs(Ke,{"data-slot":"dialog-content",className:_("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a,children:[t,e.jsxs(es,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Rs,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function dt({className:s,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:_("flex flex-col gap-2 text-center sm:text-left",s),...t})}function ut({className:s,...t}){return e.jsx(ss,{"data-slot":"dialog-title",className:_("text-lg leading-none font-semibold",s),...t})}const mt="http://localhost:8000",A=We.create({baseURL:mt,timeout:15e3});A.interceptors.response.use(s=>s,s=>{var a,n;const t=((n=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:n.detail)||(s==null?void 0:s.message)||"알 수 없는 오류가 발생했습니다.";return I.error(`요청 실패: ${t}`),Promise.reject(s)});const Wt=async(s,t,a="default")=>{console.log("🤖 LLM 분석 요청 시작:",{dbConfig:{...s,password:"[HIDDEN]"},analysisParams:t});const n=await A.post("/api/analysis/trigger-llm-analysis",{user_id:a,db_config:s,...t});return console.log("✅ LLM 분석 트리거 성공:",n.data),n.data},Ht=async s=>{console.log("📊 LLM 분석 결과 조회:",s);const t=await A.get(`/api/analysis/llm-analysis/${s}`);return console.log("✅ LLM 분석 결과 조회 성공"),t.data},Yt=async s=>{var t,a;console.log("🔌 Database 연결 테스트:",{...s,password:"[HIDDEN]"});try{const n=await A.post("/api/master/test-connection",s);return console.log("✅ Database 연결 성공"),{success:!0,data:n.data}}catch(n){return console.error("❌ Database 연결 실패:",n),{success:!1,error:((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.detail)||(n==null?void 0:n.message)||"Connection failed"}}},gt=()=>{const[s,t]=i.useState([]),[a,n]=i.useState(null),[c,r]=i.useState(!1),[m,x]=i.useState({name:"",description:"",config:{}}),[j,d]=i.useState(!0),[h,g]=i.useState(`{
  "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
}`),[f,w]=i.useState(`{
  "availability": { "peg_like": ["Accessibility_%"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`);i.useEffect(()=>{S()},[]);const S=async()=>{var l;try{d(!0);const b=await A.get("/api/preference/settings",{params:{user_id:"default"}});if((l=b.data)!=null&&l.data){const N=b.data.data,D=[{id:N.id||"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:N.dashboard_settings,statisticsSettings:N.statistics_settings,notificationSettings:N.notification_settings,theme:N.theme,language:N.language}}];t(D),D.length>0&&n(D[0])}}catch(b){console.error("Error fetching preferences:",b);const N=[{id:"default",name:"Default Settings",description:"Default user preferences",config:{dashboardSettings:{selected_pegs:[],selected_nes:[],selected_cell_ids:[],auto_refresh:!0,refresh_interval:30},statisticsSettings:{date_range_1:{},date_range_2:{},comparison_options:{show_delta:!0,show_rsd:!0,show_percentage:!0,decimal_places:2,chart_type:"bar"}},theme:"light",language:"ko"}}];t(N),n(N[0])}finally{d(!1)}},y=async()=>{try{const l={dashboardLayout:"grid",defaultKPIs:["availability","rrc","erab"],defaultDateRange:7,defaultNEs:["nvgnb#10000","nvgnb#20000"],defaultCellIDs:["2010","2011"],chartSettings:{showGrid:!0,showLegend:!0,lineWidth:2}};await A.post("/api/preferences",{...m,config:l}),x({name:"",description:"",config:{}}),r(!1),S()}catch(l){console.error("Error creating preference:",l)}},o=async l=>{try{await A.delete(`/api/preferences/${l}`),S(),(a==null?void 0:a.id)===l&&n(null)}catch(b){console.error("Error deleting preference:",b)}},p=l=>{const b=JSON.stringify(l,null,2),N="data:application/json;charset=utf-8,"+encodeURIComponent(b),D=`${l.name.replace(/\s+/g,"_")}_preference.json`,E=document.createElement("a");E.setAttribute("href",N),E.setAttribute("download",D),E.click()},v=l=>{const b=l.target.files[0];if(b){const N=new FileReader;N.onload=async D=>{try{const E=JSON.parse(D.target.result);await A.post("/api/preferences",{name:`${E.name} (Imported)`,description:E.description,config:E.config}),S()}catch(E){console.error("Error importing preference:",E)}},N.readAsText(b)}};return j?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsx(V,{children:e.jsx(M,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Loading preferences..."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Preference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:".json",onChange:v,style:{display:"none"},id:"import-file"}),e.jsxs(P,{variant:"outline",onClick:()=>document.getElementById("import-file").click(),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Import"]}),e.jsxs(nt,{open:c,onOpenChange:r,children:[e.jsx(it,{asChild:!0,children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"New Preference"]})}),e.jsxs(ct,{children:[e.jsx(dt,{children:e.jsx(ut,{children:"Create New Preference"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Name"}),e.jsx(be,{id:"name",value:m.name,onChange:l=>x(b=>({...b,name:l.target.value})),placeholder:"Enter preference name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(pe,{id:"description",value:m.description,onChange:l=>x(b=>({...b,description:l.target.value})),placeholder:"Enter preference description"})]}),e.jsx(P,{onClick:y,className:"w-full",children:"Create Preference"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Saved Preferences"]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No preferences saved yet"}):s.map(l=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${(a==null?void 0:a.id)===l.id?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>n(l),children:[e.jsx("div",{className:"font-medium",children:l.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:l.description})]},l.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(W,{children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>p(a),className:"flex items-center gap-1",children:[e.jsx(ue,{className:"h-3 w-3"}),"Export"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(a.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(Os,{className:"h-3 w-3"}),"Delete"]})]})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Configuration"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:JSON.stringify(a.config,null,2)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Options Reference"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded text-sm overflow-auto",children:`{
  "dashboardLayout": "grid", // options: "grid", "masonry", "single"
  "defaultKPIs": ["availability", "rrc", "erab"],
  "defaultDateRange": 7,       // days. options: 1, 7, 14, 30, 90
  "defaultNEs": ["nvgnb#10000", "nvgnb#20000"],   // array of strings
  "defaultCellIDs": ["2010", "2011"],            // array of strings
  "availableKPIs": [                                 // KPI picker list
    { "value": "availability", "label": "Availability (%)", "threshold": 99.0 },
    { "value": "rrc", "label": "RRC Success Rate (%)", "threshold": 98.5 }
  ],
  "chartSettings": {
    "showGrid": true,     // boolean
    "showLegend": true,   // boolean
    "lineWidth": 2        // integer (1..4)
    // optional: "palette": "default"  // options: "default", "pastel", "vivid"
  },
  "derived_pegs": {        // optional: custom formulas, name: expression
    "telus_RACH_Success": "Random_access_preamble_count/Random_access_response*100"
  }
}`})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Derived PEGs (JSON)"}),e.jsx(pe,{value:h,onChange:l=>g(l.target.value),rows:8,placeholder:`{
  "peg_name": "A/B*100"
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=JSON.parse(h),b=await A.put(`/api/preferences/${a.id}/derived-pegs`,{derived_pegs:l});n(N=>({...N,config:{...(N==null?void 0:N.config)||{},derived_pegs:b.data.derived_pegs}}))}catch(l){console.error("Invalid JSON or update failed",l)}},children:"Save Derived PEGs"}),e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=await A.get(`/api/preferences/${a.id}/derived-pegs`);g(JSON.stringify(l.data.derived_pegs||{},null,2))}catch(l){console.error("Fetch derived pegs failed",l)}},children:"Load from Server"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"KPI Mappings (JSON)"}),e.jsx(pe,{value:f,onChange:l=>w(l.target.value),rows:8,placeholder:`{
  "availability": { "peg_names": ["Accessibility_Attempts","Accessibility_Success"] },
  "rrc": { "peg_like": ["RRC_%"] }
}`}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:async()=>{try{const l=JSON.parse(f),b={...(a==null?void 0:a.config)||{},kpiMappings:l};await A.put(`/api/preferences/${a.id}`,{name:a.name,description:a.description,config:b}),n(N=>({...N||{},config:b})),I.success("KPI mappings saved")}catch(l){console.error("Invalid JSON or save failed",l),I.error("Save failed")}},children:"Save KPI Mappings"}),e.jsx(P,{variant:"outline",onClick:()=>{var l;try{const b=((l=a==null?void 0:a.config)==null?void 0:l.kpiMappings)||{};w(JSON.stringify(b,null,2))}catch{w("{}")}},children:"Load from Preference"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{className:"flex items-center gap-2",onClick:async()=>{var l,b,N,D,E;try{if(!a)return;const L={dashboard_settings:((l=a.config)==null?void 0:l.dashboardSettings)||{},statistics_settings:((b=a.config)==null?void 0:b.statisticsSettings)||{},notification_settings:((N=a.config)==null?void 0:N.notificationSettings)||{},theme:((D=a.config)==null?void 0:D.theme)||"light",language:((E=a.config)==null?void 0:E.language)||"ko"};await A.put("/api/preference/settings",L,{params:{user_id:"default"}}),I.success("Preference saved"),await S()}catch(L){console.error("Failed to save preference",L),I.error("Save failed")}},children:[e.jsx(Ce,{className:"h-4 w-4"}),"Save Preference"]}),e.jsx(P,{variant:"default",onClick:()=>{try{if(!a)return;localStorage.setItem("activePreference",JSON.stringify(a)),I.success("Applied to Dashboard")}catch(l){console.error("Failed to apply to dashboard",l),I.error("Apply failed")}},children:"Apply to Dashboard"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"변경사항을 저장하려면 Save Preference, 대시보드에 적용하려면 Apply to Dashboard를 누르세요."})]})})]}):e.jsx(V,{children:e.jsx(M,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"Select a preference to view its details"})})})})]})]})},X={dashboardSettings:{selectedPegs:["availability","rrc","erab"],defaultNe:"",defaultCellId:"",autoRefreshInterval:30,chartStyle:"line",showLegend:!0,showGrid:!0,theme:"light"},statisticsSettings:{defaultDateRange:7,comparisonEnabled:!0,showDelta:!0,showRsd:!0,defaultPegs:["availability","rrc"],chartType:"bar",decimalPlaces:2,autoAnalysis:!1},databaseSettings:{host:"",port:5432,user:"postgres",password:"",dbname:"postgres",table:"summary"},notificationSettings:{enableToasts:!0,enableSounds:!1,saveNotification:!0,errorNotification:!0},generalSettings:{language:"ko",timezone:"Asia/Seoul",dateFormat:"YYYY-MM-DD",numberFormat:"comma"}},xt={settings:X,loading:!1,saving:!1,error:null,lastSaved:null,hasUnsavedChanges:!1,userId:"default",initialized:!1},pt=(s,t)=>{switch(t.type){case"SET_LOADING":return{...s,loading:t.payload,error:t.payload?null:s.error};case"SET_SAVING":return{...s,saving:t.payload};case"SET_ERROR":return{...s,error:t.payload,loading:!1,saving:!1};case"SET_SETTINGS":return{...s,settings:t.payload,error:null,initialized:!0,hasUnsavedChanges:!1};case"UPDATE_SETTINGS":return{...s,settings:{...s.settings,...t.payload},hasUnsavedChanges:!0};case"SAVE_SUCCESS":return{...s,saving:!1,error:null,lastSaved:new Date,hasUnsavedChanges:!1};case"RESET_SETTINGS":return{...s,settings:X,hasUnsavedChanges:!0};default:return s}},Re=i.createContext(null),ht=({children:s})=>{var y,o;const[t,a]=i.useReducer(pt,xt),n=i.useRef(null),c=i.useRef(!0),r=i.useCallback((p,v=null)=>{console.log(`[PreferenceContext] ${p}`,v||"")},[]),m=i.useCallback((p,v=null)=>{console.error(`[PreferenceContext] ${p}`,v)},[]),x=i.useCallback(async()=>{var p,v;if(c.current)try{a({type:"SET_LOADING",payload:!0}),r("사용자 설정 로드 시작"),r("Mock 데이터 사용 (API 문제로 인한 임시 조치)");const l={...X,dashboardSettings:{...X.dashboardSettings,selectedPegs:["availability","rrc","erab","sar"],defaultNe:"NE_001",defaultCellId:"Cell_001"}};if(await new Promise(b=>setTimeout(b,500)),!c.current)return;a({type:"SET_SETTINGS",payload:l}),r("사용자 설정 로드 완료",l),(p=t.settings.notificationSettings)!=null&&p.enableToasts&&I.success("설정을 불러왔습니다")}catch(l){m("설정 로드 실패",l),a({type:"SET_ERROR",payload:"설정을 불러오는데 실패했습니다."}),(v=t.settings.notificationSettings)!=null&&v.enableToasts&&I.error("설정 로드 실패: "+(l.message||"알 수 없는 오류"))}finally{a({type:"SET_LOADING",payload:!1})}},[t.userId,(y=t.settings.notificationSettings)==null?void 0:y.enableToasts,r,m]),j=i.useCallback(async(p=null)=>{var l,b;if(!c.current)return;const v=p||t.settings;try{if(a({type:"SET_SAVING",payload:!0}),r("사용자 설정 저장 시작",v),await new Promise(N=>setTimeout(N,300)),!c.current)return;a({type:"SAVE_SUCCESS"}),r("사용자 설정 저장 완료"),(l=v.notificationSettings)!=null&&l.saveNotification&&I.success("설정이 저장되었습니다")}catch(N){m("설정 저장 실패",N),a({type:"SET_ERROR",payload:"설정 저장에 실패했습니다."}),(b=v.notificationSettings)!=null&&b.errorNotification&&I.error("설정 저장 실패: "+(N.message||"알 수 없는 오류"))}},[t.settings,t.userId,r,m]),d=i.useCallback(p=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r("디바운싱된 자동 저장 실행"),j(p)},500)},[j,r]),h=i.useCallback(p=>{r("설정 업데이트",p),a({type:"UPDATE_SETTINGS",payload:p});const v={...t.settings,...p};d(v)},[t.settings,d,r]),g=i.useCallback(()=>(n.current&&(clearTimeout(n.current),n.current=null),r("즉시 저장 실행"),j()),[j,r]),f=i.useCallback(()=>{var p;r("설정 초기화"),a({type:"RESET_SETTINGS"}),d(X),(p=t.settings.notificationSettings)!=null&&p.enableToasts&&I.info("설정이 초기화되었습니다")},[d,(o=t.settings.notificationSettings)==null?void 0:o.enableToasts,r]),w=i.useCallback(()=>{a({type:"SET_ERROR",payload:null})},[]);i.useEffect(()=>(r("PreferenceProvider 초기화 시작"),x(),()=>{c.current=!1,n.current&&clearTimeout(n.current),r("PreferenceProvider 정리 완료")}),[x,r]);const S={...t,updateSettings:h,saveImmediately:g,resetSettings:f,clearError:w,loadSettings:x,defaultSettings:X,logInfo:r,logError:m};return e.jsx(Re.Provider,{value:S,children:s})},ft=()=>{const s=i.useContext(Re);if(!s)throw new Error("usePreference는 PreferenceProvider 내부에서만 사용할 수 있습니다.");return s},Se={dashboardSettings:{selectedPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 PEG를 선택해야 합니다."},autoRefreshInterval:{required:!0,type:"number",min:5,max:300,message:"자동 새로고침 간격은 5초~300초 사이여야 합니다."},defaultNe:{type:"string",maxLength:50,message:"NE ID는 50자를 초과할 수 없습니다."},defaultCellId:{type:"string",maxLength:50,message:"Cell ID는 50자를 초과할 수 없습니다."}},statisticsSettings:{defaultDateRange:{required:!0,type:"number",min:1,max:365,message:"기본 날짜 범위는 1일~365일 사이여야 합니다."},decimalPlaces:{required:!0,type:"number",min:0,max:6,message:"소수점 자릿수는 0~6자리 사이여야 합니다."},defaultPegs:{required:!0,type:"array",minLength:1,message:"최소 하나의 기본 PEG를 선택해야 합니다."}}},ne=()=>{const s=ft(),t=i.useRef({}),a=i.useCallback((d,h=null)=>{const g={},f=h?{[h]:Se[h]}:Se;return Object.entries(f).forEach(([w,S])=>{d[w]&&Object.entries(S).forEach(([y,o])=>{const p=d[w][y],v=`${w}.${y}`;if(o.required&&(p==null||p==="")){g[v]=o.message||`${y}는 필수 항목입니다.`;return}if(!(p==null||p==="")){if(o.type==="array"&&!Array.isArray(p)){g[v]=o.message||`${y}는 배열이어야 합니다.`;return}if(o.type==="number"&&typeof p!="number"){g[v]=o.message||`${y}는 숫자여야 합니다.`;return}if(o.type==="string"&&typeof p!="string"){g[v]=o.message||`${y}는 문자열이어야 합니다.`;return}if(o.type==="number"){if(o.min!==void 0&&p<o.min){g[v]=o.message||`${y}는 ${o.min} 이상이어야 합니다.`;return}if(o.max!==void 0&&p>o.max){g[v]=o.message||`${y}는 ${o.max} 이하여야 합니다.`;return}}if(o.type==="array"){if(o.minLength!==void 0&&p.length<o.minLength){g[v]=o.message||`${y}는 최소 ${o.minLength}개 항목이 필요합니다.`;return}if(o.maxLength!==void 0&&p.length>o.maxLength){g[v]=o.message||`${y}는 최대 ${o.maxLength}개 항목만 허용됩니다.`;return}}if(o.type==="string"){if(o.minLength!==void 0&&p.length<o.minLength){g[v]=o.message||`${y}는 최소 ${o.minLength}자 이상이어야 합니다.`;return}if(o.maxLength!==void 0&&p.length>o.maxLength){g[v]=o.message||`${y}는 최대 ${o.maxLength}자까지 허용됩니다.`;return}}}})}),g},[]),n=i.useCallback((d,h=null)=>{var w;s.logInfo("설정 업데이트 및 검증 시작",{newSettings:d,section:h});const g=h?{...s.settings,[h]:{...s.settings[h],...d[h]}}:{...s.settings,...d},f=a(g,h);if(t.current=f,Object.keys(f).length>0){s.logError("설정 유효성 검증 실패",f);const S=Object.values(f)[0];return(w=s.settings.notificationSettings)!=null&&w.errorNotification&&I.error(`설정 오류: ${S}`),!1}return s.updateSettings(d),s.logInfo("설정 업데이트 완료"),!0},[s,a]),c=i.useCallback((d=null)=>{var h,g;try{const f={settings:s.settings,metadata:{exportedAt:new Date().toISOString(),version:"1.0.0",userId:s.userId}},w=JSON.stringify(f,null,2),S=new Blob([w],{type:"application/json"}),y=document.createElement("a");return y.href=URL.createObjectURL(S),y.download=d||`preference-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(y.href),s.logInfo("설정 내보내기 완료",{filename:y.download}),(h=s.settings.notificationSettings)!=null&&h.enableToasts&&I.success("설정이 파일로 내보내졌습니다"),!0}catch(f){return s.logError("설정 내보내기 실패",f),(g=s.settings.notificationSettings)!=null&&g.errorNotification&&I.error("설정 내보내기 실패: "+f.message),!1}},[s]),r=i.useCallback(d=>new Promise((h,g)=>{const f=new FileReader;f.onload=w=>{var S,y;try{const o=JSON.parse(w.target.result);if(!o.settings)throw new Error("유효하지 않은 설정 파일 형식입니다.");const p=a(o.settings);if(Object.keys(p).length>0){const v=Object.values(p).join(", ");throw new Error(`설정 유효성 검증 실패: ${v}`)}s.updateSettings(o.settings),s.logInfo("설정 가져오기 완료",o.settings),(S=s.settings.notificationSettings)!=null&&S.enableToasts&&I.success("설정이 성공적으로 가져와졌습니다"),h(o.settings)}catch(o){s.logError("설정 가져오기 실패",o),(y=s.settings.notificationSettings)!=null&&y.errorNotification&&I.error("설정 가져오기 실패: "+o.message),g(o)}},f.onerror=()=>{var S;const w=new Error("파일 읽기 실패");s.logError("파일 읽기 실패",w),(S=s.settings.notificationSettings)!=null&&S.errorNotification&&I.error("파일을 읽을 수 없습니다"),g(w)},f.readAsText(d)}),[s,a]),m=i.useMemo(()=>t.current,[t.current]),x=i.useMemo(()=>Object.keys(m).length>0,[m]),j=i.useMemo(()=>!x,[x]);return{...s,validationErrors:m,hasValidationErrors:x,isValid:j,validateSettings:a,updateSettings:n,exportSettings:c,importSettings:r,dashboardSettings:s.settings.dashboardSettings,statisticsSettings:s.settings.statisticsSettings,notificationSettings:s.settings.notificationSettings,generalSettings:s.settings.generalSettings}},vt=()=>{const{dashboardSettings:s,updateSettings:t,saving:a,error:n,validationErrors:c,logInfo:r}=ne(),m=i.useCallback(j=>(r("Dashboard 설정 업데이트",j),t({dashboardSettings:j},"dashboardSettings")),[t,r]),x=i.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([j])=>j.startsWith("dashboardSettings."))),[c]);return{settings:s,updateSettings:m,saving:a,error:n,validationErrors:x,hasErrors:Object.keys(x).length>0}},bt=()=>{const{statisticsSettings:s,updateSettings:t,saving:a,error:n,validationErrors:c,logInfo:r}=ne(),m=i.useCallback(j=>(r("Statistics 설정 업데이트",j),t({statisticsSettings:j},"statisticsSettings")),[t,r]),x=i.useMemo(()=>Object.fromEntries(Object.entries(c).filter(([j])=>j.startsWith("statisticsSettings."))),[c]);return{settings:s,updateSettings:m,saving:a,error:n,validationErrors:x,hasErrors:Object.keys(x).length>0}},jt=fe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function O({className:s,variant:t,asChild:a=!1,...n}){const c=a?_e:"span";return e.jsx(c,{"data-slot":"badge",className:_(jt({variant:t}),s),...n})}function Q({className:s,orientation:t="horizontal",decorative:a=!0,...n}){return e.jsx(ns,{"data-slot":"separator-root",decorative:a,orientation:t,className:_("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...n})}function yt({className:s,...t}){return e.jsx(is,{"data-slot":"switch",className:_("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(ls,{"data-slot":"switch-thumb",className:_("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Nt({...s}){return e.jsx(os,{"data-slot":"select",...s})}function St({...s}){return e.jsx(us,{"data-slot":"select-value",...s})}function wt({className:s,size:t="default",children:a,...n}){return e.jsxs(cs,{"data-slot":"select-trigger","data-size":t,className:_("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[a,e.jsx(ds,{asChild:!0,children:e.jsx(me,{className:"size-4 opacity-50"})})]})}function _t({className:s,children:t,position:a="popper",...n}){return e.jsx(ms,{children:e.jsxs(gs,{"data-slot":"select-content",className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...n,children:[e.jsx(Et,{}),e.jsx(xs,{className:_("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),e.jsx(Ct,{})]})})}function kt({className:s,children:t,...a}){return e.jsxs(ps,{"data-slot":"select-item",className:_("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(hs,{children:e.jsx(Z,{className:"size-4"})})}),e.jsx(fs,{children:t})]})}function Et({className:s,...t}){return e.jsx(vs,{"data-slot":"select-scroll-up-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ve,{className:"size-4"})})}function Ct({className:s,...t}){return e.jsx(bs,{"data-slot":"select-scroll-down-button",className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(me,{className:"size-4"})})}function Le({className:s,...t}){return e.jsx(js,{"data-slot":"checkbox",className:_("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(ys,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Z,{className:"size-3.5"})})})}function Oe({...s}){return e.jsx(Ns,{"data-slot":"collapsible",...s})}function Ae({...s}){return e.jsx(Ss,{"data-slot":"collapsible-trigger",...s})}function $e({...s}){return e.jsx(ws,{"data-slot":"collapsible-content",...s})}const Pt=fe("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Fe({className:s,variant:t,...a}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:_(Pt({variant:t}),s),...a})}function ze({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:_("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}const te={text:{placeholder:"텍스트를 입력하세요",maxLength:100},number:{placeholder:"숫자를 입력하세요",min:0,max:999999},select:{placeholder:"선택하세요",options:[]},multiselect:{placeholder:"하나 이상 선택하세요",options:[]},checkbox:{label:"활성화"},switch:{label:"켜기/끄기"}},It=({field:s,value:t,onChange:a,error:n,disabled:c})=>{var r,m,x,j;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(be,{id:s.key,type:s.type==="number"?"number":"text",value:t||"",onChange:d=>{const h=s.type==="number"?d.target.value===""?"":Number(d.target.value):d.target.value;a(h)},placeholder:s.placeholder||((r=te[s.type])==null?void 0:r.placeholder),maxLength:s.maxLength||((m=te[s.type])==null?void 0:m.maxLength),min:s.min||((x=te[s.type])==null?void 0:x.min),max:s.max||((j=te[s.type])==null?void 0:j.max),disabled:c,className:n?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),n&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),n]})]})},Dt=({field:s,value:t,onChange:a,error:n,disabled:c})=>{var r;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(Nt,{value:t||"",onValueChange:a,disabled:c,children:[e.jsx(wt,{className:n?"border-destructive":"",children:e.jsx(St,{placeholder:s.placeholder||te.select.placeholder})}),e.jsx(_t,{children:(r=s.options)==null?void 0:r.map(m=>e.jsx(kt,{value:m.value,children:m.label},m.value))})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),n&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),n]})]})},Tt=({field:s,value:t,onChange:a,error:n,disabled:c})=>{var x,j;const r=Array.isArray(t)?t:[],m=d=>{const h=r.includes(d)?r.filter(g=>g!==d):[...r,d];a(h)};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:`border rounded-md p-3 space-y-2 ${n?"border-destructive":"border-input"}`,children:[(x=s.options)==null?void 0:x.map(d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{id:`${s.key}-${d.value}`,checked:r.includes(d.value),onCheckedChange:()=>m(d.value),disabled:c}),e.jsx(U,{htmlFor:`${s.key}-${d.value}`,className:"text-sm cursor-pointer",children:d.label})]},d.value)),((j=s.options)==null?void 0:j.length)===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"선택 가능한 옵션이 없습니다"})]}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(d=>{var g;const h=(g=s.options)==null?void 0:g.find(f=>f.value===d);return h?e.jsx(O,{variant:"secondary",className:"text-xs",children:h.label},d):null})}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),n&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),n]})]})},Rt=({field:s,value:t,onChange:a,error:n,disabled:c})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(U,{htmlFor:s.key,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]}),e.jsx(yt,{id:s.key,checked:!!t,onCheckedChange:a,disabled:c})]}),n&&e.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),n]})]}),we=({title:s,description:t,settingKey:a,fields:n=[],defaultOpen:c=!1,disabled:r=!1,className:m="",onFieldChange:x,showSaveButton:j=!1,showResetButton:d=!1})=>{const[h,g]=i.useState(c),[f,w]=i.useState(!1),{settings:S,updateSettings:y,saving:o,error:p,validationErrors:v,logInfo:l,saveImmediately:b,defaultSettings:N}=ne(),D=S[a]||{},E=i.useMemo(()=>{const k={};return Object.entries(v).forEach(([F,z])=>{if(F.startsWith(`${a}.`)){const le=F.replace(`${a}.`,"");k[le]=z}}),k},[v,a]),L=Object.keys(E).length>0,$=i.useCallback((k,F)=>{l(`SettingBox 필드 변경: ${a}.${k}`,{oldValue:D[k],newValue:F});const z={...D,[k]:F};y({[a]:z}),x==null||x(k,F,z),w(!0)},[a,D,y,x,l]),G=i.useCallback(async()=>{l(`SettingBox 즉시 저장: ${a}`),await b()},[b,l,a]),ie=i.useCallback(()=>{l(`SettingBox 초기화: ${a}`);const k=N[a]||{};y({[a]:k}),w(!1)},[a,y,N,l]),q=i.useCallback(k=>{const F=D[k.key],z=f?E[k.key]:null,Y={field:k,value:F,onChange:ge=>$(k.key,ge),error:z,disabled:r||o};switch(k.type){case"text":case"number":return e.jsx(It,{...Y},k.key);case"select":return e.jsx(Dt,{...Y},k.key);case"multiselect":return e.jsx(Tt,{...Y},k.key);case"switch":case"checkbox":return e.jsx(Rt,{...Y},k.key);default:return e.jsxs("div",{className:"text-sm text-muted-foreground",children:["지원하지 않는 필드 타입: ",k.type]},k.key)}},[D,E,f,r,o,$]);return e.jsx(V,{className:`w-full ${m}`,children:e.jsxs(Oe,{open:h,onOpenChange:g,children:[e.jsx(Ae,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[s,o&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"저장 중"]}),f&&L&&e.jsxs(O,{variant:"destructive",className:"text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"오류"]}),f&&!L&&!o&&e.jsxs(O,{variant:"default",className:"text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"유효"]})]}),t&&e.jsx(ae,{children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"outline",className:"text-xs",children:[n.length,"개 설정"]}),h?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})]})]})})}),e.jsx($e,{children:e.jsxs(M,{className:"space-y-6",children:[p&&e.jsxs(Fe,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(ze,{children:p})]}),n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(q)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"설정할 수 있는 항목이 없습니다."}),(j||d||L)&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:d&&e.jsxs(P,{variant:"outline",size:"sm",onClick:ie,disabled:r||o,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"초기화"]})}),e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsxs(P,{size:"sm",onClick:G,disabled:r||o||L,children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"저장"]})})]})]})]})})]})})};function Lt({className:s,value:t,...a}){return e.jsx(_s,{"data-slot":"progress",className:_("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...a,children:e.jsx(ks,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const de=[{key:"dashboardSettings",label:"Dashboard 설정",description:"선택된 PEG, 차트 스타일, 새로고침 간격 등"},{key:"statisticsSettings",label:"Statistics 설정",description:"기본 날짜 범위, 비교 옵션, 소수점 자릿수 등"},{key:"notificationSettings",label:"알림 설정",description:"토스트, 사운드, 알림 타입 설정"},{key:"generalSettings",label:"일반 설정",description:"언어, 시간대, 날짜 형식 등"}],Ot=({title:s="설정 백업 & 복원",description:t="설정을 JSON 파일로 내보내거나 가져올 수 있습니다",defaultOpen:a=!1,className:n=""})=>{const[c,r]=i.useState(a),[m,x]=i.useState(!1),[j,d]=i.useState(!1),[h,g]=i.useState(0),[f,w]=i.useState(!1),[S,y]=i.useState(null),[o,p]=i.useState(null),[v,l]=i.useState(de.reduce((u,C)=>({...u,[C.key]:!0}),{})),[b,N]=i.useState(""),D=i.useRef(null),{settings:E,exportSettings:L,importSettings:$,hasUnsavedChanges:G,saving:ie,logInfo:q,logError:k}=ne(),F=i.useCallback(async(u="full")=>{d(!0),y(null);try{q("설정 내보내기 시작",{exportType:u,customFileName:b});let C=E;if(u==="partial"){const xe=Object.entries(v).filter(([ee,se])=>se).map(([ee])=>ee);if(xe.length===0){I.error("내보낼 설정 섹션을 하나 이상 선택해주세요");return}C=xe.reduce((ee,se)=>(E[se]&&(ee[se]=E[se]),ee),{}),q("부분 내보내기 선택된 섹션",xe)}const oe=new Date().toISOString().split("T")[0],ce=b.trim()||(u==="partial"?`preference-settings-partial-${oe}.json`:`preference-settings-${oe}.json`);await L(ce)&&(I.success(`설정이 "${ce}" 파일로 내보내졌습니다`),N(""))}catch(C){k("설정 내보내기 실패",C),I.error("설정 내보내기 실패: "+C.message)}finally{d(!1)}},[E,v,b,L,q,k]),z=i.useCallback(async u=>{if(u){x(!0),g(0),y(null);try{if(q("설정 가져오기 시작",{fileName:u.name,fileSize:u.size}),!u.name.toLowerCase().endsWith(".json"))throw new Error("JSON 파일만 지원됩니다");if(u.size>5*1024*1024)throw new Error("파일 크기가 너무 큽니다 (최대 5MB)");g(20);const C=await $(u);g(80),p({name:u.name,size:u.size,importedAt:new Date,sectionsCount:Object.keys(C).length}),g(100),q("설정 가져오기 완료",{fileName:u.name,sectionsImported:Object.keys(C).length}),I.success(`"${u.name}"에서 설정을 성공적으로 가져왔습니다`)}catch(C){k("설정 가져오기 실패",C),y(C.message),I.error("설정 가져오기 실패: "+C.message)}finally{x(!1),setTimeout(()=>{g(0)},3e3)}}},[$,q,k]),le=i.useCallback(u=>{const C=u.target.files[0];C&&(z(C),u.target.value="")},[z]),Y=i.useCallback(u=>{u.preventDefault(),w(!0)},[]),ge=i.useCallback(u=>{u.preventDefault(),w(!1)},[]),Ue=i.useCallback(u=>{u.preventDefault(),w(!1);const C=u.dataTransfer.files;C.length>0&&z(C[0])},[z]),Ge=i.useCallback(u=>{l(C=>({...C,[u]:!C[u]}))},[]),qe=i.useCallback(()=>{const u=Object.values(v).every(Boolean),C=de.reduce((oe,ce)=>({...oe,[ce.key]:!u}),{});l(C)},[v]);return e.jsx(V,{className:`w-full ${n}`,children:e.jsxs(Oe,{open:c,onOpenChange:r,children:[e.jsx(Ae,{asChild:!0,children:e.jsx(J,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(W,{className:"text-lg flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),s,m&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"가져오는 중"]}),j&&e.jsxs(O,{variant:"secondary",className:"text-xs",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"내보내는 중"]}),G&&e.jsxs(O,{variant:"outline",className:"text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"저장되지 않은 변경사항"]})]}),t&&e.jsx(ae,{children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs(O,{variant:"default",className:"text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"가져옴"]}),c?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})]})]})})}),e.jsx($e,{children:e.jsxs(M,{className:"space-y-6",children:[S&&e.jsxs(Fe,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(ze,{children:S})]}),m&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"파일 가져오는 중..."}),e.jsxs("span",{children:[h,"%"]})]}),e.jsx(Lt,{value:h,className:"h-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"설정 가져오기"]}),e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${f?"border-primary bg-primary/5":m?"border-muted bg-muted/20":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,onDragOver:Y,onDragLeave:ge,onDrop:Ue,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx($s,{className:`h-8 w-8 mx-auto ${f?"text-primary":"text-muted-foreground"}`}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${f?"text-primary":""}`,children:f?"파일을 여기에 놓으세요":"JSON 파일을 드래그하거나 클릭하여 선택하세요"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"최대 5MB, .json 파일만 지원"})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{var u;return(u=D.current)==null?void 0:u.click()},disabled:m,className:"mt-2",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"파일 선택"]})]})}),e.jsx("input",{ref:D,type:"file",accept:".json",onChange:le,style:{display:"none"}}),o&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"마지막 가져온 파일:"}),e.jsx("span",{children:o.name}),e.jsxs(O,{variant:"secondary",className:"text-xs",children:[o.sectionsCount,"개 섹션"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o.importedAt.toLocaleString()})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"설정 내보내기"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"fileName",className:"text-sm",children:"파일명 (선택사항)"}),e.jsx(be,{id:"fileName",value:b,onChange:u=>N(u.target.value),placeholder:"preference-settings-custom.json",disabled:j}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"비워두면 자동으로 날짜가 포함된 파일명이 생성됩니다"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{className:"text-sm font-medium",children:"내보낼 설정 선택"}),e.jsx(P,{variant:"outline",size:"sm",onClick:qe,disabled:j,children:Object.values(v).every(Boolean)?"전체 해제":"전체 선택"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:de.map(u=>e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded border",children:[e.jsx(Le,{id:u.key,checked:v[u.key],onCheckedChange:()=>Ge(u.key),disabled:j}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsx(U,{htmlFor:u.key,className:"text-sm font-medium cursor-pointer",children:u.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]})]},u.key))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(P,{onClick:()=>F("full"),disabled:j||ie,className:"flex-1",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"전체 설정 내보내기"]}),e.jsxs(P,{variant:"outline",onClick:()=>F("partial"),disabled:j||ie||Object.values(v).every(u=>!u),className:"flex-1",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"선택된 설정만 내보내기"]})]}),Object.values(v).every(u=>!u)&&e.jsx("p",{className:"text-xs text-destructive",children:"내보낼 설정 섹션을 하나 이상 선택해주세요"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"현재 설정 상태"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:de.map(u=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[u.label,":"]}),e.jsx("span",{className:"text-muted-foreground",children:E[u.key]?"설정됨":"기본값"})]},u.key))}),G&&e.jsxs("p",{className:"text-xs text-amber-600 mt-2 flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"저장되지 않은 변경사항이 있습니다"]})]})]})})]})})},At=()=>{var D,E;const{settings:s,loading:t,saving:a,error:n,hasUnsavedChanges:c,lastSaved:r,validationErrors:m,hasValidationErrors:x,saveImmediately:j,resetSettings:d,logInfo:h}=ne(),{settings:g,updateSettings:f,hasErrors:w}=vt(),{settings:S,updateSettings:y,hasErrors:o}=bt(),p=()=>{h("Dashboard 설정 테스트 시작"),f({selectedPegs:["availability","rrc","erab","sar","mobility_intra"],defaultNe:"TEST_NE_001",defaultCellId:"TEST_CELL_001",autoRefreshInterval:60})},v=()=>{h("Statistics 설정 테스트 시작"),y({defaultDateRange:14,showDelta:!0,showRsd:!0,decimalPlaces:3,defaultPegs:["availability","rrc","erab"]})},l=()=>{h("유효성 검증 테스트 시작"),f({autoRefreshInterval:500,selectedPegs:[]})},b=[{key:"selectedPegs",type:"multiselect",label:"선택된 PEG 항목",description:"대시보드에 표시할 PEG 항목들을 선택하세요",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"defaultNe",type:"text",label:"기본 NE ID",description:"통계 분석 시 기본으로 사용할 NE ID",placeholder:"NE_001"},{key:"defaultCellId",type:"text",label:"기본 Cell ID",description:"통계 분석 시 기본으로 사용할 Cell ID",placeholder:"Cell_001"},{key:"autoRefreshInterval",type:"number",label:"자동 새로고침 간격 (초)",description:"대시보드 데이터 자동 새로고침 간격",required:!0,min:5,max:300},{key:"chartStyle",type:"select",label:"차트 스타일",description:"대시보드 차트의 기본 스타일",options:[{value:"line",label:"선형 차트"},{value:"bar",label:"막대 차트"},{value:"area",label:"영역 차트"}]},{key:"showLegend",type:"switch",label:"범례 표시",description:"차트에 범례를 표시할지 여부"},{key:"showGrid",type:"switch",label:"격자 표시",description:"차트에 격자를 표시할지 여부"}],N=[{key:"defaultDateRange",type:"number",label:"기본 날짜 범위 (일)",description:"통계 분석 시 기본 날짜 범위",required:!0,min:1,max:365},{key:"showDelta",type:"switch",label:"Delta 값 표시",description:"비교 분석 시 Delta 값을 표시할지 여부"},{key:"showRsd",type:"switch",label:"RSD 값 표시",description:"비교 분석 시 RSD 값을 표시할지 여부"},{key:"decimalPlaces",type:"number",label:"소수점 자릿수",description:"숫자 표시 시 소수점 자릿수",required:!0,min:0,max:6},{key:"defaultPegs",type:"multiselect",label:"기본 PEG 선택",description:"통계 분석 시 기본으로 선택할 PEG 항목들",required:!0,options:[{value:"availability",label:"Availability"},{value:"rrc",label:"RRC Connection"},{value:"erab",label:"E-RAB"},{value:"sar",label:"SAR"},{value:"mobility_intra",label:"Mobility Intra"},{value:"cqi",label:"CQI"}]},{key:"chartType",type:"select",label:"차트 타입",description:"통계 차트의 기본 타입",options:[{value:"bar",label:"막대 차트"},{value:"line",label:"선형 차트"},{value:"scatter",label:"산점도"}]}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Preference 훅 테스트"}),e.jsx("p",{className:"text-muted-foreground",children:"usePreference 훅의 동작을 테스트합니다"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsxs(O,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),"로딩 중"]}),a&&e.jsxs(O,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3"}),"저장 중"]}),c&&e.jsxs(O,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(B,{className:"h-3 w-3"}),"저장되지 않은 변경사항"]}),!c&&r&&e.jsxs(O,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),"저장됨"]})]})]}),n&&e.jsx(V,{className:"border-destructive",children:e.jsx(M,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["오류: ",n]})]})})}),x&&e.jsxs(V,{className:"border-yellow-500",children:[e.jsx(J,{children:e.jsx(W,{className:"text-yellow-600",children:"유효성 검증 오류"})}),e.jsx(M,{children:e.jsx("ul",{className:"space-y-1",children:Object.entries(m).map(([L,$])=>e.jsxs("li",{className:"text-sm text-yellow-600",children:["• ",e.jsxs("strong",{children:[L,":"]})," ",$]},L))})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"SettingBox 컴포넌트 테스트"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"실제 SettingBox 컴포넌트를 사용하여 설정을 관리해보세요. 변경사항은 자동으로 저장되며 유효성 검증이 실시간으로 적용됩니다."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(we,{title:"Dashboard 설정",description:"대시보드의 표시 방식과 동작을 설정합니다",settingKey:"dashboardSettings",fields:b,defaultOpen:!0,showResetButton:!0,onFieldChange:(L,$,G)=>{console.log("Dashboard 필드 변경:",{fieldKey:L,newValue:$,updatedSettings:G})}}),e.jsx(we,{title:"Statistics 설정",description:"통계 분석의 기본값과 표시 옵션을 설정합니다",settingKey:"statisticsSettings",fields:N,defaultOpen:!1,showResetButton:!0,showSaveButton:!0,onFieldChange:(L,$,G)=>{console.log("Statistics 필드 변경:",{fieldKey:L,newValue:$,updatedSettings:G})}}),e.jsx(Ot,{title:"설정 백업 & 복원",description:"설정을 JSON 파일로 내보내거나 백업 파일에서 가져올 수 있습니다",defaultOpen:!1})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"테스트 액션"}),e.jsx(ae,{children:"다양한 설정 업데이트 시나리오를 테스트합니다"})]}),e.jsxs(M,{className:"space-y-3",children:[e.jsx(P,{onClick:p,className:"w-full",children:"Dashboard 설정 업데이트 테스트"}),e.jsx(P,{onClick:v,className:"w-full",children:"Statistics 설정 업데이트 테스트"}),e.jsx(P,{onClick:l,variant:"destructive",className:"w-full",children:"유효성 검증 실패 테스트"}),e.jsx(Q,{}),e.jsx(P,{onClick:j,variant:"outline",className:"w-full",children:"즉시 저장"}),e.jsxs(P,{onClick:d,variant:"outline",className:"w-full",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"설정 초기화"]}),e.jsx(Q,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'📄 Import/Export 기능은 위의 "설정 백업 & 복원" 박스에서 테스트할 수 있습니다.'})]})]}),e.jsxs(V,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"현재 상태"}),e.jsx(ae,{children:"실시간 설정 상태를 표시합니다"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Dashboard 설정 ",w&&e.jsx(O,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"선택된 PEGs:"})," ",(D=g.selectedPegs)==null?void 0:D.join(", ")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 NE:"})," ",g.defaultNe||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 Cell ID:"})," ",g.defaultCellId||"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"자동 새로고침:"})," ",g.autoRefreshInterval,"초"]})]})]}),e.jsx(Q,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Statistics 설정 ",o&&e.jsx(O,{variant:"destructive",children:"오류"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"기본 날짜 범위:"})," ",S.defaultDateRange,"일"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Delta 표시:"})," ",S.showDelta?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"RSD 표시:"})," ",S.showRsd?"예":"아니오"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"소수점 자릿수:"})," ",S.decimalPlaces]}),e.jsxs("div",{children:[e.jsx("strong",{children:"기본 PEGs:"})," ",(E=S.defaultPegs)==null?void 0:E.join(", ")]})]})]}),e.jsx(Q,{}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"마지막 저장:"})," ",r?r.toLocaleTimeString():"없음"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"저장되지 않은 변경사항:"})," ",c?"있음":"없음"]})]})]})]})]}),e.jsxs(V,{children:[e.jsxs(J,{children:[e.jsx(W,{children:"전체 설정 데이터 (개발용)"}),e.jsx(ae,{children:"JSON 형태의 전체 설정 구조를 표시합니다"})]}),e.jsx(M,{children:e.jsx("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-xs",children:JSON.stringify(s,null,2)})})]})]})};function $t(){const[s,t]=i.useState("dashboard"),a=()=>{switch(s){case"dashboard":return e.jsx(Ne,{});case"results":return e.jsx(st,{});case"summary":return e.jsx(tt,{});case"statistics":return e.jsx(Ks,{});case"preference":return e.jsx(et,{});case"preference-old":return e.jsx(gt,{});case"preference-test":return e.jsx(At,{});case"llm-analysis":return e.jsx(at,{});default:return e.jsx(Ne,{})}};return e.jsx(ht,{children:e.jsx(rt,{activeMenu:s,setActiveMenu:t,children:a()})})}const Ft=({...s})=>{const{theme:t="system"}=He();return e.jsx(Ye,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...s})};let T=null,je={};function H(s){console.log(`📊 ${s.name}: ${s.value.toFixed(2)}${s.unit||"ms"}`),je[s.name]={value:s.value,rating:s.rating,delta:s.delta,navigationType:s.navigationType}}async function Ve(){console.log("🔍 Web Vitals 측정 시작...");try{T||(T=await R(()=>import("./vendor-D_Wz334c.js").then(s=>s.a7),__vite__mapDeps([1,2]))),(T.onCLS||T.getCLS)&&(T.onCLS||T.getCLS)(t=>{H(t)}),(T.onFID||T.getFID)&&(T.onFID||T.getFID)(t=>{H(t)}),(T.onFCP||T.getFCP)&&(T.onFCP||T.getFCP)(t=>{H(t)}),(T.onLCP||T.getLCP)&&(T.onLCP||T.getLCP)(t=>{H(t)}),(T.onTTFB||T.getTTFB)&&(T.onTTFB||T.getTTFB)(t=>{H(t)})}catch(s){console.warn("⚠️ Web Vitals 측정 실패:",s),zt()}}function zt(){if(typeof window<"u"&&window.performance){window.addEventListener("load",()=>{const t=performance.now();H({name:"PageLoad",value:t,rating:t<2e3?"good":t<4e3?"needs-improvement":"poor"})});let s=!1;["click","keydown","touchstart"].forEach(t=>{document.addEventListener(t,()=>{if(!s){s=!0;const a=performance.now();H({name:"FirstInteraction",value:a,rating:a<1e3?"good":a<3e3?"needs-improvement":"poor"})}},{once:!0})})}}function Me(){return je}function Be(s=je){const t={CLS:{good:.1,needsImprovement:.25},FID:{good:100,needsImprovement:300},FCP:{good:1800,needsImprovement:3e3},LCP:{good:2500,needsImprovement:4e3},TTFB:{good:800,needsImprovement:1800}},a={};return Object.entries(s).forEach(([n,c])=>{const r=t[n];r&&(c.value<=r.good?a[n]="good":c.value<=r.needsImprovement?a[n]="needs-improvement":a[n]="poor")}),a}function Vt(){const s=Me(),t=Be(s),a={timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent,vitals:s,evaluation:t,summary:{totalMetrics:Object.keys(s).length,goodMetrics:Object.values(t).filter(n=>n==="good").length,poorMetrics:Object.values(t).filter(n=>n==="poor").length}};return console.log("📊 성능 리포트:",a),a}const Mt=Object.freeze(Object.defineProperty({__proto__:null,evaluatePerformance:Be,generatePerformanceReport:Vt,getVitalsData:Me,measureWebVitals:Ve},Symbol.toStringTag,{value:"Module"}));typeof window<"u"&&(Ve(),setTimeout(()=>{R(async()=>{const{generatePerformanceReport:s}=await Promise.resolve().then(()=>Mt);return{generatePerformanceReport:s}},void 0).then(({generatePerformanceReport:s})=>{s()})},5e3));Xe.createRoot(document.getElementById("root")).render(e.jsxs(i.StrictMode,{children:[e.jsx($t,{}),e.jsx(Ft,{position:"top-right",richColors:!0})]}));export{ut as A,O as B,V as C,nt as D,be as I,U as L,yt as S,pe as T,A as a,J as b,W as c,M as d,P as e,bt as f,ft as g,Nt as h,wt as i,St as j,_t as k,kt as l,Q as m,ae as n,ne as o,we as p,Ot as q,_ as r,Ms as s,Yt as t,vt as u,Wt as v,Ht as w,Le as x,ct as y,dt as z};
